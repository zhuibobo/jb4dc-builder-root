"use strict";var ControlStatusUtility={DisableAtUpdateStatus:function(t,e){t.OperationType==BaseUtility.GetUpdateOperationName()&&$("#"+e).attr("disabled","disabled")}},DataValidateUtility={testBuildCodeError:function(t){return 18!=t.val().length?{$elem:t,errors:["建筑物编码长度必须为18位!"],labName:"编码错误"}:null},testHouseCodeError:function(t){return 5!=t.val().length?{$elem:t,errors:["房屋编码长度必须为5位!"],labName:"编码错误"}:null}},Organ3DDL={_prop:{mySessionData:null,myGridData:null,myCommunityData:null,myStreetData:null,allOrganMinProp:null,operationName:"",ddlStreetControl:null,oldDDLStreetControlValue:"",ddlCommunityControl:null,oldDDLCommunityControlValue:"",ddlGridControl:null,oldDDLGridControlValue:"",changeEnable:!0},GetOrganData:function(r){AjaxUtility.Get("/Rest/Grid/SSOProxy/OrganAndUser/GetALLOrganMinPropData",{},function(t){if(t.success){console.log(t),this._prop.mySessionData=t.data.MySessionData;var e=t.data.MySessionData.organId;this._prop.allOrganMinProp=t.data.ALLOrganMinProp;var i=ArrayUtility.WhereSingle(this._prop.allOrganMinProp,function(t){return t.organId==e});if("GridUnit"==i.organTypeValue){var o=(this._prop.myGridData=i).organParentId;this._prop.myCommunityData=ArrayUtility.WhereSingle(this._prop.allOrganMinProp,function(t){return t.organId==o}),o=this._prop.myCommunityData.organParentId,this._prop.myStreetData=ArrayUtility.WhereSingle(this._prop.allOrganMinProp,function(t){return t.organId==o})}else if("Community"==i.organTypeValue){this._prop.myCommunityData=i;o=this._prop.myCommunityData.organParentId;this._prop.myStreetData=ArrayUtility.WhereSingle(this._prop.allOrganMinProp,function(t){return t.organId==o})}else"Street"==i.organTypeValue&&(this._prop.myStreetData=i);r.call(this,t.data)}},this)},Init3DDL:function(t,e,i,a,o){this._prop.operationName=a,this._prop.ddlStreetControl=$("#"+t),this._prop.oldDDLStreetControlValue=this._prop.ddlStreetControl.attr("control_value"),this._prop.ddlCommunityControl=$("#"+e),this._prop.oldDDLCommunityControlValue=this._prop.ddlCommunityControl.attr("control_value"),this._prop.ddlGridControl=$("#"+i),this._prop.oldDDLGridControlValue=this._prop.ddlGridControl.attr("control_value"),this._prop.changeEnable=o,this.GetOrganData(function(t){if(a==BaseUtility.GetViewOperationName()){var e=this,i=ArrayUtility.WhereSingle(this._prop.allOrganMinProp,function(t){return t.organId==e._prop.oldDDLStreetControlValue}),o=ArrayUtility.WhereSingle(this._prop.allOrganMinProp,function(t){return t.organId==e._prop.oldDDLCommunityControlValue}),r=ArrayUtility.WhereSingle(this._prop.allOrganMinProp,function(t){return t.organId==e._prop.oldDDLGridControlValue});this._prop.ddlStreetControl.text(i.organName),this._prop.ddlCommunityControl.text(o.organName),this._prop.ddlGridControl.text(r.organName)}else this.Bind3DDL()}),this._prop.changeEnable||(this._prop.ddlStreetControl.attr("disabled","disabled"),this._prop.ddlCommunityControl.attr("disabled","disabled"),this._prop.ddlGridControl.attr("disabled","disabled"))},Bind3DDL:function(){var e=this,t=ArrayUtility.Where(this._prop.allOrganMinProp,function(t){return"Street"==t.organTypeValue});this.BindSingleDDL(this._prop.ddlStreetControl,t);var i=this.TryAutoSetStreet();this._prop.ddlStreetControl.change(function(){var t=$(this).val();e.StreetControlChange(t)});var o=ArrayUtility.Where(this._prop.allOrganMinProp,function(t){return t.organParentId==i});this.BindSingleDDL(this._prop.ddlCommunityControl,o);var r=this.TryAutoSetCommunity();this._prop.ddlCommunityControl.change(function(){var t=$(this).val();e.CommunityControlChange(t)});var a=ArrayUtility.Where(this._prop.allOrganMinProp,function(t){return t.organParentId==r});this.BindSingleDDL(this._prop.ddlGridControl,a),this.TryAutoSetGrid()},TryAutoSetStreet:function(){var t=this._prop.oldDDLStreetControlValue;return!t&&this._prop.myStreetData&&(t=this._prop.myStreetData.organId),t?(this._prop.ddlStreetControl.val(t),t):this._prop.ddlStreetControl.val()},TryAutoSetCommunity:function(){var t=this._prop.oldDDLCommunityControlValue;return!t&&this._prop.myCommunityData&&(t=this._prop.myCommunityData.organId),t?(this._prop.ddlCommunityControl.val(t),t):this._prop.ddlCommunityControl.val()},TryAutoSetGrid:function(){var t=this._prop.oldDDLGridControlValue;return!t&&this._prop.myGridData&&(t=this._prop.myGridData.organId),t?(this._prop.ddlGridControl.val(t),t):this._prop.ddlGridControl.val()},BindSingleDDL:function(t,e){t.html(""),t.append("<option value=' '>--请选择--</option>");for(var i=0;i<e.length;i++){var o=e[i],r="<option value='"+o.organId+"'>"+o.organName+"</option>";t.append(r)}},StreetControlChange:function(e){var t=ArrayUtility.Where(this._prop.allOrganMinProp,function(t){return t.organParentId==e});this.BindSingleDDL(this._prop.ddlCommunityControl,t),this._prop.ddlGridControl.html(""),this._prop.ddlGridControl.append("<option value=' '>--请选择--</option>")},CommunityControlChange:function(e){var t=ArrayUtility.Where(this._prop.allOrganMinProp,function(t){return t.organParentId==e});this.BindSingleDDL(this._prop.ddlGridControl,t)}};if(0<$("#viewHouseAndPersonWrap").length)var ViewHouseAndPersonWrap=new Vue({el:"#viewHouseAndPersonWrap",mounted:function(){var t=BaseUtility.GetUrlParaValue("windowHeight"),e=BaseUtility.GetUrlParaValue("recordId");$("#viewHouseAndPersonWrap").height(t-200),this.listHeight=t-260,this.loadHouseData(e)},data:{acInterface:{getHouseByBuildId:"/Rest/Grid/Build/HouseInfo/GetHouseByBuildId",editHouseView:"/HTML/Builder/Runtime/WebFormIndependenceRuntime.html",editHouseFormId:"ccfdac63-d9d7-4a67-ad9f-747e88a48f5d",deleteHouse:"/Rest/Grid/Build/HouseInfo/Delete",editPersonView:"/HTML/Builder/Runtime/WebFormIndependenceRuntime.html",editFamilyFormId:"1488ee50-efb6-409a-afc7-eb0f9710713f",editPersonFormId:"5d6de388-ce1e-43c7-b592-c9e80b71435c",getPersonByHouseId:"/Rest/Grid/Person/PersonMain/GetPersonByHouseId",deletePerson:"/Rest/Grid/Person/PersonMain/DeletePersonWithFamily",editEnterpriseView:"/HTML/Builder/Runtime/WebFormIndependenceRuntime.html",editEnterpriseFormId:"9e0e258a-639a-4209-83bf-607000de0f77",getEnterpriseByHouseId:"/Rest/Grid/Enterprise/EnterpriseMain/GetEnterpriseByHouseId",deleteEnterprise:"/Rest/Grid/Enterprise/EnterpriseMain/Delete"},listHeight:100,house:{selectedHouse:null,columnsConfig:[{title:"房屋编码",key:"houseCodeFull",align:"left"},{title:"房号",key:"houseNumName",align:"center",width:120},{title:"使用情况",key:"houseUsedDesc",align:"center"},{title:"操作",key:"houseId",width:80,align:"center",render:function(t,e){var i=[];return i.push(t("Tooltip",{props:{content:"查看"}},[t("div",{class:"list-row-button view",on:{click:function(){ViewHouseAndPersonWrap.viewHouse(e)}}})])),t("div",{class:"list-row-button-wrap"},i)}}],tableData:[],searchHouseText:""},person:{columnsConfig:[{title:"人员",key:"displayText",align:"left",width:120},{title:"身份证号",key:"personIdCard",align:"left"},{title:"联系电话",key:"personPhone",align:"left",width:140},{title:"操作",key:"personId",width:140,align:"center",render:function(t,e){var i=[];return i.push(t("Tooltip",{props:{content:"查看"}},[t("div",{class:"list-row-button view",on:{click:function(){ViewHouseAndPersonWrap.viewPerson(e)}}})])),t("div",{class:"list-row-button-wrap"},i)}}],tableData:[]},enterprise:{columnsConfig:[{title:"企业(门店名称)",key:"entName",align:"left"},{title:"操作",key:"entId",width:140,align:"center",render:function(t,e){var i=[];return i.push(t("Tooltip",{props:{content:"查看"}},[t("div",{class:"list-row-button view",on:{click:function(){gridManager.viewEnterprise(e)}}})])),i.push(t("Tooltip",{props:{content:"修改"}},[t("div",{class:"list-row-button edit",on:{click:function(){gridManager.editEnterprise(e)}}})])),i.push(t("Tooltip",{props:{content:"删除"}},[t("div",{class:"list-row-button del",on:{click:function(){gridManager.delEnterprise(e)}}})])),t("div",{class:"list-row-button-wrap"},i)}}],tableData:[]}},methods:{getFormPara:function(t,e,i,o,r){var a={formId:t,buttonId:"",listFormButtonElemId:"",recordId:i,operationType:e,windowWidth:1300,windowHeight:880,menuRightUrlPara:o,devOperationEndFunc:r,menuRightUrlParaJson:""};return PageStyleUtility.GetPageHeight()<500&&(a.windowHeight=600),a},getFormDialogPara:function(t){var e={width:1300,height:880,title:t};return PageStyleUtility.GetPageHeight()<500&&(e.height=600),e},selectionHouseChange:function(t,e){console.log(t),this.house.selectedHouse=t,this.loadPersonData(),this.loadEnterpriseData()},loadHouseData:function(t){AjaxUtility.Get(this.acInterface.getHouseByBuildId,{buildId:t},function(t){console.log(t),t.success&&(this.house.tableData=t.data)},this)},searchHouse:function(){var e=this.house.searchHouseText;this.house.sourceTableData&&(this.house.tableData=this.house.sourceTableData),0<this.house.tableData.length&&StringUtility.IsNotNullOrEmpty(e)&&(this.house.sourceTableData=this.house.tableData,this.house.tableData=ArrayUtility.Where(this.house.tableData,function(t){if(0<=t.houseCode.indexOf(e)||0<=t.houseNumName.indexOf(e))return!0}))},addHouse:function(){var t=this.buildTree.treeSelectedNode;if(null!=t){var e=[{ActionType:"BindToField",FieldName:"HOUSE_BUILD_ID",Value:t.buildId}],i=this.getFormPara(this.acInterface.editHouseFormId,BaseUtility.GetAddOperationName(),"",JsonUtility.JsonToString(e),"reLoadHouse");DialogUtility.Frame_OpenIframeWindow(window,DialogUtility.DialogId,BaseUtility.BuildView(this.acInterface.editBuildView,i),this.getFormDialogPara("房屋登记"),1,!0)}else DialogUtility.AlertText("请先选择建筑物!")},viewHouse:function(t){var e=t.row.houseId,i=this.getFormPara(this.acInterface.editHouseFormId,BaseUtility.GetViewOperationName(),e,"","reLoadHouse");DialogUtility.Frame_OpenIframeWindow(window,DialogUtility.DialogId03,BaseUtility.BuildView(this.acInterface.editHouseView,i),this.getFormDialogPara("房屋登记"),1,!0)},editHouse:function(t){var e=t.row.houseId,i=this.getFormPara(this.acInterface.editHouseFormId,BaseUtility.GetUpdateOperationName(),e,"","reLoadHouse");DialogUtility.Frame_OpenIframeWindow(window,DialogUtility.DialogId,BaseUtility.BuildView(this.acInterface.editBuildView,i),this.getFormDialogPara("房屋登记"),1,!0)},delHouse:function(t){var e=t.row.houseId;DialogUtility.Confirm(window,"确认要删除当前房屋吗？",function(){AjaxUtility.Delete(this.acInterface.deleteHouse,{recordId:e},function(t){t.success&&(DialogUtility.AlertText(t.message),this.loadHouseData(this.buildTree.treeSelectedNode.buildId))},this)},this)},selectionPersonChange:function(){},loadPersonData:function(){var t=this.house.selectedHouse.houseId;AjaxUtility.Get(this.acInterface.getPersonByHouseId,{houseId:t},function(t){if(console.log(t),t.success){for(var e=0;e<t.data.length;e++)t.data[e].displayText=t.data[e].personName,"0"==t.data[e].personRelationship?t.data[e].displayText="[户主]"+t.data[e].displayText:t.data[e].displayText="[成员]"+t.data[e].displayText;this.person.tableData=t.data}},this)},addFamily:function(){var t=this.house.selectedHouse;if(null!=t){var e=[{ActionType:"BindToField",FieldName:"FAMILY_HOUSE_ID",Value:t.houseId},{ActionType:"BindToField",FieldName:"FAMILY_HOUSE_CODE_FULL",Value:t.houseCodeFull}],i=this.getFormPara(this.acInterface.editFamilyFormId,BaseUtility.GetAddOperationName(),"",JsonUtility.JsonToString(e),"reLoadPerson");DialogUtility.Frame_OpenIframeWindow(window,DialogUtility.DialogId,BaseUtility.BuildView(this.acInterface.editBuildView,i),this.getFormDialogPara("户登记"),1,!0)}else DialogUtility.AlertText("请先选择房屋!")},delPerson:function(t){var e=t.row.personId;DialogUtility.Confirm(window,"确认要删除当前人员吗？<br />1:需要先删除户中的其他成员,才可以删除户主.<br />2删除户主时,将同时删除该户的信息.",function(){AjaxUtility.Delete(this.acInterface.deletePerson,{personId:e},function(t){t.success&&(DialogUtility.AlertText(t.message),this.loadPersonData())},this)},this)},editPerson:function(t){var e=t.row.personId,i=this.getFormPara(this.acInterface.editPersonFormId,BaseUtility.GetUpdateOperationName(),e,"","reLoadPerson");DialogUtility.Frame_OpenIframeWindow(window,DialogUtility.DialogId,BaseUtility.BuildView(this.acInterface.editBuildView,i),this.getFormDialogPara("人员信息维护"),1,!0)},editFamily:function(t){var e=t.row.personFamilyId,i=this.getFormPara(this.acInterface.editFamilyFormId,BaseUtility.GetUpdateOperationName(),e,"","reLoadPerson");DialogUtility.Frame_OpenIframeWindow(window,DialogUtility.DialogId,BaseUtility.BuildView(this.acInterface.editBuildView,i),this.getFormDialogPara("户登记"),1,!0)},viewPerson:function(t){var e=t.row.personId,i=this.getFormPara(this.acInterface.editPersonFormId,BaseUtility.GetViewOperationName(),e,"","reLoadPerson");DialogUtility.Frame_OpenIframeWindow(window,DialogUtility.DialogId03,BaseUtility.BuildView(this.acInterface.editPersonView,i),this.getFormDialogPara("人员信息查看"),1,!0)},addEnterprise:function(){var t=this.house.selectedHouse;if(null!=t){var e=[{ActionType:"BindToField",FieldName:"ENT_HOUSE_ID",Value:t.houseId},{ActionType:"BindToField",FieldName:"ENT_HOUSE_CODE",Value:t.houseCodeFull}],i=this.getFormPara(this.acInterface.editEnterpriseFormId,BaseUtility.GetAddOperationName(),"",JsonUtility.JsonToString(e),"reLoadEnterprise");DialogUtility.Frame_OpenIframeWindow(window,DialogUtility.DialogId,BaseUtility.BuildView(this.acInterface.editBuildView,i),this.getFormDialogPara("企业法人登记"),1,!0)}else DialogUtility.AlertText("请先选择房屋!")},loadEnterpriseData:function(){var t=this.house.selectedHouse.houseId;AjaxUtility.Get(this.acInterface.getEnterpriseByHouseId,{houseId:t},function(t){console.log(t),t.success&&(this.enterprise.tableData=t.data)},this)},viewEnterprise:function(t){var e=t.row.entId,i=this.getFormPara(this.acInterface.editEnterpriseFormId,BaseUtility.GetViewOperationName(),e,"","reLoadEnterprise");DialogUtility.Frame_OpenIframeWindow(window,DialogUtility.DialogId,BaseUtility.BuildView(this.acInterface.editBuildView,i),this.getFormDialogPara("企业法人查看"),1,!0)},editEnterprise:function(t){var e=t.row.entId,i=this.getFormPara(this.acInterface.editEnterpriseFormId,BaseUtility.GetUpdateOperationName(),e,"","reLoadEnterprise");DialogUtility.Frame_OpenIframeWindow(window,DialogUtility.DialogId,BaseUtility.BuildView(this.acInterface.editBuildView,i),this.getFormDialogPara("企业法人登记"),1,!0)},delEnterprise:function(t){var e=t.row.entId;DialogUtility.Confirm(window,"确认要删除当前企业吗？",function(){AjaxUtility.Delete(this.acInterface.deleteEnterprise,{recordId:e},function(t){t.success&&(DialogUtility.AlertText(t.message),this.loadEnterpriseData())},this)},this)}}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNvbnRyb2xTdGF0dXNVdGlsaXR5LmpzIiwiRGF0YVZhbGlkYXRlVXRpbGl0eS5qcyIsIk9yZ2FuM0RETC5qcyIsIlZpZXdIb3VzZUFuZFBlcnNvbldyYXAuanMiXSwibmFtZXMiOlsiQ29udHJvbFN0YXR1c1V0aWxpdHkiLCJEaXNhYmxlQXRVcGRhdGVTdGF0dXMiLCJ3ZWJGb3JtUlRQYXJhcyIsImNvbnRyb2xJZCIsIk9wZXJhdGlvblR5cGUiLCJCYXNlVXRpbGl0eSIsIkdldFVwZGF0ZU9wZXJhdGlvbk5hbWUiLCIkIiwiYXR0ciIsIkRhdGFWYWxpZGF0ZVV0aWxpdHkiLCJ0ZXN0QnVpbGRDb2RlRXJyb3IiLCIkZWxlbSIsInZhbCIsImxlbmd0aCIsImVycm9ycyIsImxhYk5hbWUiLCJ0ZXN0SG91c2VDb2RlRXJyb3IiLCJPcmdhbjNEREwiLCJfcHJvcCIsIm15U2Vzc2lvbkRhdGEiLCJteUdyaWREYXRhIiwibXlDb21tdW5pdHlEYXRhIiwibXlTdHJlZXREYXRhIiwiYWxsT3JnYW5NaW5Qcm9wIiwib3BlcmF0aW9uTmFtZSIsImRkbFN0cmVldENvbnRyb2wiLCJvbGRERExTdHJlZXRDb250cm9sVmFsdWUiLCJkZGxDb21tdW5pdHlDb250cm9sIiwib2xkRERMQ29tbXVuaXR5Q29udHJvbFZhbHVlIiwiZGRsR3JpZENvbnRyb2wiLCJvbGRERExHcmlkQ29udHJvbFZhbHVlIiwiY2hhbmdlRW5hYmxlIiwiR2V0T3JnYW5EYXRhIiwiZW5kRnVuYyIsIkFqYXhVdGlsaXR5IiwiR2V0IiwicmVzdWx0Iiwic3VjY2VzcyIsImNvbnNvbGUiLCJsb2ciLCJ0aGlzIiwiZGF0YSIsIk15U2Vzc2lvbkRhdGEiLCJteU9yZ2FuSWQiLCJvcmdhbklkIiwiQUxMT3JnYW5NaW5Qcm9wIiwibXlPcmdhbkRhdGEiLCJBcnJheVV0aWxpdHkiLCJXaGVyZVNpbmdsZSIsIml0ZW0iLCJvcmdhblR5cGVWYWx1ZSIsInBhcmVudE9yZ2FuSWQiLCJvcmdhblBhcmVudElkIiwiY2FsbCIsIkluaXQzRERMIiwiZGRsU3RyZWV0Q29udHJvbElkIiwiZGRsQ29tbXVuaXR5Q29udHJvbElkIiwiZGRsR3JpZENvbnRyb2xJZCIsIkdldFZpZXdPcGVyYXRpb25OYW1lIiwiX3RoaXMiLCJzdHJlZXREYXRhIiwiY29tbXVuaXR5RGF0YSIsImdyaWREYXRhIiwidGV4dCIsIm9yZ2FuTmFtZSIsIkJpbmQzRERMIiwic3RyZWV0RGF0YUxpc3QiLCJXaGVyZSIsIkJpbmRTaW5nbGVEREwiLCJzZWxlY3RlZFN0cmVldFZhbHVlIiwiVHJ5QXV0b1NldFN0cmVldCIsImNoYW5nZSIsIm5ld1NlbGVjdGVkU3RyZWV0VmFsdWUiLCJTdHJlZXRDb250cm9sQ2hhbmdlIiwiY29tbXVuaXR5RGF0YUxpc3QiLCJzZWxlY3RlZENvbW11bml0eVZhbHVlIiwiVHJ5QXV0b1NldENvbW11bml0eSIsIm5ld1NlbGVjdGVkQ29tbXVuaXR5VmFsdWUiLCJDb21tdW5pdHlDb250cm9sQ2hhbmdlIiwiZ3JpZERhdGFMaXN0IiwiVHJ5QXV0b1NldEdyaWQiLCJzZWxlY3RlZFZhbHVlIiwiZGRsQ29udHJvbCIsIm9yZ2FuRGF0YUxpc3QiLCJodG1sIiwiYXBwZW5kIiwiaSIsIm9yZ2FuRGF0YSIsInNlbCIsIlZpZXdIb3VzZUFuZFBlcnNvbldyYXAiLCJWdWUiLCJlbCIsIm1vdW50ZWQiLCJ3aW5kb3dIZWlnaHQiLCJHZXRVcmxQYXJhVmFsdWUiLCJidWlsZElkIiwiaGVpZ2h0IiwibGlzdEhlaWdodCIsImxvYWRIb3VzZURhdGEiLCJhY0ludGVyZmFjZSIsImdldEhvdXNlQnlCdWlsZElkIiwiZWRpdEhvdXNlVmlldyIsImVkaXRIb3VzZUZvcm1JZCIsImRlbGV0ZUhvdXNlIiwiZWRpdFBlcnNvblZpZXciLCJlZGl0RmFtaWx5Rm9ybUlkIiwiZWRpdFBlcnNvbkZvcm1JZCIsImdldFBlcnNvbkJ5SG91c2VJZCIsImRlbGV0ZVBlcnNvbiIsImVkaXRFbnRlcnByaXNlVmlldyIsImVkaXRFbnRlcnByaXNlRm9ybUlkIiwiZ2V0RW50ZXJwcmlzZUJ5SG91c2VJZCIsImRlbGV0ZUVudGVycHJpc2UiLCJob3VzZSIsInNlbGVjdGVkSG91c2UiLCJjb2x1bW5zQ29uZmlnIiwidGl0bGUiLCJrZXkiLCJhbGlnbiIsIndpZHRoIiwicmVuZGVyIiwiaCIsInBhcmFtcyIsImJ1dHRvbnMiLCJwdXNoIiwicHJvcHMiLCJjb250ZW50IiwiY2xhc3MiLCJvbiIsImNsaWNrIiwidmlld0hvdXNlIiwidGFibGVEYXRhIiwic2VhcmNoSG91c2VUZXh0IiwicGVyc29uIiwidmlld1BlcnNvbiIsImVudGVycHJpc2UiLCJncmlkTWFuYWdlciIsInZpZXdFbnRlcnByaXNlIiwiZWRpdEVudGVycHJpc2UiLCJkZWxFbnRlcnByaXNlIiwibWV0aG9kcyIsImdldEZvcm1QYXJhIiwiZm9ybUlkIiwib3BOYW1lIiwicmVjb3JkSWQiLCJtZW51UmlnaHRVcmxQYXJhIiwicGFyYSIsImJ1dHRvbklkIiwibGlzdEZvcm1CdXR0b25FbGVtSWQiLCJvcGVyYXRpb25UeXBlIiwid2luZG93V2lkdGgiLCJkZXZPcGVyYXRpb25FbmRGdW5jIiwibWVudVJpZ2h0VXJsUGFyYUpzb24iLCJQYWdlU3R5bGVVdGlsaXR5IiwiR2V0UGFnZUhlaWdodCIsImdldEZvcm1EaWFsb2dQYXJhIiwic2VsZWN0aW9uSG91c2VDaGFuZ2UiLCJyb3ciLCJpbmRleCIsImxvYWRQZXJzb25EYXRhIiwibG9hZEVudGVycHJpc2VEYXRhIiwic2VhcmNoSG91c2UiLCJzb3VyY2VUYWJsZURhdGEiLCJTdHJpbmdVdGlsaXR5IiwiSXNOb3ROdWxsT3JFbXB0eSIsImhvdXNlQ29kZSIsImluZGV4T2YiLCJob3VzZU51bU5hbWUiLCJhZGRIb3VzZSIsInNlbGVjdGVkQnVpbGQiLCJidWlsZFRyZWUiLCJ0cmVlU2VsZWN0ZWROb2RlIiwiQWN0aW9uVHlwZSIsIkZpZWxkTmFtZSIsIlZhbHVlIiwiZm9ybVBhcmEiLCJHZXRBZGRPcGVyYXRpb25OYW1lIiwiSnNvblV0aWxpdHkiLCJKc29uVG9TdHJpbmciLCJEaWFsb2dVdGlsaXR5IiwiRnJhbWVfT3BlbklmcmFtZVdpbmRvdyIsIndpbmRvdyIsIkRpYWxvZ0lkIiwiQnVpbGRWaWV3IiwiZWRpdEJ1aWxkVmlldyIsIkFsZXJ0VGV4dCIsImhvdXNlSWQiLCJEaWFsb2dJZDAzIiwiZWRpdEhvdXNlIiwiZGVsSG91c2UiLCJDb25maXJtIiwiRGVsZXRlIiwibWVzc2FnZSIsInNlbGVjdGlvblBlcnNvbkNoYW5nZSIsImRpc3BsYXlUZXh0IiwicGVyc29uTmFtZSIsInBlcnNvblJlbGF0aW9uc2hpcCIsImFkZEZhbWlseSIsImhvdXNlQ29kZUZ1bGwiLCJkZWxQZXJzb24iLCJwZXJzb25JZCIsImVkaXRQZXJzb24iLCJlZGl0RmFtaWx5IiwicGVyc29uRmFtaWx5SWQiLCJhZGRFbnRlcnByaXNlIiwiZW50SWQiXSwibWFwcGluZ3MiOiJBQUFBLGFBRUEsSUFBQUEscUJBQUEsQ0FDQUMsc0JBQUEsU0FBQUMsRUFBQUMsR0FDQUQsRUFBQUUsZUFBQUMsWUFBQUMsMEJBQ0FDLEVBQUEsSUFBQUosR0FBQUssS0FBQSxXQUFBLGNDSEFDLG9CQUFBLENBQ0FDLG1CQUFBLFNBQUFDLEdBR0EsT0FBQSxJQUZBQSxFQUFBQyxNQUVBQyxPQUNBLENBQ0FGLE1BQUFBLEVBQ0FHLE9BQUEsQ0FBQSxrQkFDQUMsUUFBQSxRQUlBLE1BRUFDLG1CQUFBLFNBQUFMLEdBR0EsT0FBQSxHQUZBQSxFQUFBQyxNQUVBQyxPQUNBLENBQ0FGLE1BQUFBLEVBQ0FHLE9BQUEsQ0FBQSxnQkFDQUMsUUFBQSxRQUlBLE9DekJBRSxVQUFBLENBQ0FDLE1BQUEsQ0FDQUMsY0FBQSxLQUNBQyxXQUFBLEtBQ0FDLGdCQUFBLEtBQ0FDLGFBQUEsS0FDQUMsZ0JBQUEsS0FDQUMsY0FBQSxHQUNBQyxpQkFBQSxLQUNBQyx5QkFBQSxHQUNBQyxvQkFBQSxLQUNBQyw0QkFBQSxHQUNBQyxlQUFBLEtBQ0FDLHVCQUFBLEdBQ0FDLGNBQUEsR0FFQUMsYUFBQSxTQUFBQyxHQUNBQyxZQUFBQyxJQUFBLDBE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R0FDQSxJQUFBMkQsRUFBQTNELEVBQUFXLElBQUFnRCxNQUNBOUIsRUFBQXZJLEtBQUFxRyxZQUFBckcsS0FBQTJELFlBQUFXLHFCQUFBekcsWUFBQUMseUJBQUF1TSxFQUFBLEdBQUEsb0JBQ0ExQixjQUFBQyx1QkFBQUMsT0FBQUYsY0FBQUcsU0FBQWpMLFlBQUFrTCxVQUFBL0ksS0FBQTJELFlBQUFxRixjQUFBVCxHQUFBdkksS0FBQW1ILGtCQUFBLFVBQUEsR0FBQSxJQUVBaEIsY0FBQSxTQUFBTyxHQUNBLElBQUEyRCxFQUFBM0QsRUFBQVcsSUFBQWdELE1BQ0ExQixjQUFBVyxRQUFBVCxPQUFBLGNBQUEsV0FDQW5KLFlBQUE2SixPQUFBdkosS0FBQTJELFlBQUFhLGlCQUFBLENBQ0FnQyxTQUFBNkQsR0FDQSxTQUFBekssR0FDQUEsRUFBQUMsVUFDQThJLGNBQUFNLFVBQUFySixFQUFBNEosU0FDQXhKLEtBQUF3SCx1QkFFQXhILE9BQ0FBIiwiZmlsZSI6IkdyaWRVdGlsaXR5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBDb250cm9sU3RhdHVzVXRpbGl0eSA9IHtcbiAgRGlzYWJsZUF0VXBkYXRlU3RhdHVzOiBmdW5jdGlvbiBEaXNhYmxlQXRVcGRhdGVTdGF0dXMod2ViRm9ybVJUUGFyYXMsIGNvbnRyb2xJZCkge1xuICAgIGlmICh3ZWJGb3JtUlRQYXJhcy5PcGVyYXRpb25UeXBlID09IEJhc2VVdGlsaXR5LkdldFVwZGF0ZU9wZXJhdGlvbk5hbWUoKSkge1xuICAgICAgJChcIiNcIiArIGNvbnRyb2xJZCkuYXR0cihcImRpc2FibGVkXCIsIFwiZGlzYWJsZWRcIik7XG4gICAgfVxuICB9XG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgRGF0YVZhbGlkYXRlVXRpbGl0eSA9IHtcbiAgdGVzdEJ1aWxkQ29kZUVycm9yOiBmdW5jdGlvbiB0ZXN0QnVpbGRDb2RlRXJyb3IoJGVsZW0pIHtcbiAgICB2YXIgY29kZSA9ICRlbGVtLnZhbCgpO1xuXG4gICAgaWYgKGNvZGUubGVuZ3RoICE9IDE4KSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAkZWxlbTogJGVsZW0sXG4gICAgICAgIGVycm9yczogW1wi5bu6562R54mp57yW56CB6ZW/5bqm5b+F6aG75Li6MTjkvY0hXCJdLFxuICAgICAgICBsYWJOYW1lOiBcIue8lueggemUmeivr1wiXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9LFxuICB0ZXN0SG91c2VDb2RlRXJyb3I6IGZ1bmN0aW9uIHRlc3RIb3VzZUNvZGVFcnJvcigkZWxlbSkge1xuICAgIHZhciBjb2RlID0gJGVsZW0udmFsKCk7XG5cbiAgICBpZiAoY29kZS5sZW5ndGggIT0gNSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgJGVsZW06ICRlbGVtLFxuICAgICAgICBlcnJvcnM6IFtcIuaIv+Wxi+e8lueggemVv+W6puW/hemhu+S4ujXkvY0hXCJdLFxuICAgICAgICBsYWJOYW1lOiBcIue8lueggemUmeivr1wiXG4gICAgICB9O1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgT3JnYW4zRERMID0ge1xuICBfcHJvcDoge1xuICAgIG15U2Vzc2lvbkRhdGE6IG51bGwsXG4gICAgbXlHcmlkRGF0YTogbnVsbCxcbiAgICBteUNvbW11bml0eURhdGE6IG51bGwsXG4gICAgbXlTdHJlZXREYXRhOiBudWxsLFxuICAgIGFsbE9yZ2FuTWluUHJvcDogbnVsbCxcbiAgICBvcGVyYXRpb25OYW1lOiBcIlwiLFxuICAgIGRkbFN0cmVldENvbnRyb2w6IG51bGwsXG4gICAgb2xkRERMU3RyZWV0Q29udHJvbFZhbHVlOiBcIlwiLFxuICAgIGRkbENvbW11bml0eUNvbnRyb2w6IG51bGwsXG4gICAgb2xkRERMQ29tbXVuaXR5Q29udHJvbFZhbHVlOiBcIlwiLFxuICAgIGRkbEdyaWRDb250cm9sOiBudWxsLFxuICAgIG9sZERETEdyaWRDb250cm9sVmFsdWU6IFwiXCIsXG4gICAgY2hhbmdlRW5hYmxlOiB0cnVlXG4gIH0sXG4gIEdldE9yZ2FuRGF0YTogZnVuY3Rpb24gR2V0T3JnYW5EYXRhKGVuZEZ1bmMpIHtcbiAgICBBamF4VXRpbGl0eS5HZXQoXCIvUmVzdC9HcmlkL1NTT1Byb3h5L09yZ2FuQW5kVXNlci9HZXRBTExPcmdhbk1pblByb3BEYXRhXCIsIHt9LCBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgdGhpcy5fcHJvcC5teVNlc3Npb25EYXRhID0gcmVzdWx0LmRhdGEuTXlTZXNzaW9uRGF0YTtcbiAgICAgICAgdmFyIG15T3JnYW5JZCA9IHJlc3VsdC5kYXRhLk15U2Vzc2lvbkRhdGEub3JnYW5JZDtcbiAgICAgICAgdGhpcy5fcHJvcC5hbGxPcmdhbk1pblByb3AgPSByZXN1bHQuZGF0YS5BTExPcmdhbk1pblByb3A7XG4gICAgICAgIHZhciBteU9yZ2FuRGF0YSA9IEFycmF5VXRpbGl0eS5XaGVyZVNpbmdsZSh0aGlzLl9wcm9wLmFsbE9yZ2FuTWluUHJvcCwgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICByZXR1cm4gaXRlbS5vcmdhbklkID09IG15T3JnYW5JZDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKG15T3JnYW5EYXRhLm9yZ2FuVHlwZVZhbHVlID09IFwiR3JpZFVuaXRcIikge1xuICAgICAgICAgIHRoaXMuX3Byb3AubXlHcmlkRGF0YSA9IG15T3JnYW5EYXRhO1xuICAgICAgICAgIHZhciBwYXJlbnRPcmdhbklkID0gbXlPcmdhbkRhdGEub3JnYW5QYXJlbnRJZDtcbiAgICAgICAgICB0aGlzLl9wcm9wLm15Q29tbXVuaXR5RGF0YSA9IEFycmF5VXRpbGl0eS5XaGVyZVNpbmdsZSh0aGlzLl9wcm9wLmFsbE9yZ2FuTWluUHJvcCwgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIHJldHVybiBpdGVtLm9yZ2FuSWQgPT0gcGFyZW50T3JnYW5JZDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBwYXJlbnRPcmdhbklkID0gdGhpcy5fcHJvcC5teUNvbW11bml0eURhdGEub3JnYW5QYXJlbnRJZDtcbiAgICAgICAgICB0aGlzLl9wcm9wLm15U3RyZWV0RGF0YSA9IEFycmF5VXRpbGl0eS5XaGVyZVNpbmdsZSh0aGlzLl9wcm9wLmFsbE9yZ2FuTWluUHJvcCwgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICAgIHJldHVybiBpdGVtLm9yZ2FuSWQgPT0gcGFyZW50T3JnYW5JZDtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChteU9yZ2FuRGF0YS5vcmdhblR5cGVWYWx1ZSA9PSBcIkNvbW11bml0eVwiKSB7XG4gICAgICAgICAgdGhpcy5fcHJvcC5teUNvbW11bml0eURhdGEgPSBteU9yZ2FuRGF0YTtcbiAgICAgICAgICB2YXIgcGFyZW50T3JnYW5JZCA9IHRoaXMuX3Byb3AubXlDb21tdW5pdHlEYXRhLm9yZ2FuUGFyZW50SWQ7XG4gICAgICAgICAgdGhpcy5fcHJvcC5teVN0cmVldERhdGEgPSBBcnJheVV0aWxpdHkuV2hlcmVTaW5nbGUodGhpcy5fcHJvcC5hbGxPcmdhbk1pblByb3AsIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICByZXR1cm4gaXRlbS5vcmdhbklkID09IHBhcmVudE9yZ2FuSWQ7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAobXlPcmdhbkRhdGEub3JnYW5UeXBlVmFsdWUgPT0gXCJTdHJlZXRcIikge1xuICAgICAgICAgIHRoaXMuX3Byb3AubXlTdHJlZXREYXRhID0gbXlPcmdhbkRhdGE7XG4gICAgICAgIH1cblxuICAgICAgICBlbmRGdW5jLmNhbGwodGhpcywgcmVzdWx0LmRhdGEpO1xuICAgICAgfVxuICAgIH0sIHRoaXMpO1xuICB9LFxuICBJbml0M0RETDogZnVuY3Rpb24gSW5pdDNEREwoZGRsU3RyZWV0Q29udHJvbElkLCBkZGxDb21tdW5pdHlDb250cm9sSWQsIGRkbEdyaWRDb250cm9sSWQsIG9wZXJhdGlvbk5hbWUsIGNoYW5nZUVuYWJsZSkge1xuICAgIHRoaXMuX3Byb3Aub3BlcmF0aW9uTmFtZSA9IG9wZXJhdGlvbk5hbWU7XG4gICAgdGhpcy5fcHJvcC5kZGxTdHJlZXRDb250cm9sID0gJChcIiNcIiArIGRkbFN0cmVldENvbnRyb2xJZCk7XG4gICAgdGhpcy5fcHJvcC5vbGRERExTdHJlZXRDb250cm9sVmFsdWUgPSB0aGlzLl9wcm9wLmRkbFN0cmVldENvbnRyb2wuYXR0cihcImNvbnRyb2xfdmFsdWVcIik7XG4gICAgdGhpcy5fcHJvcC5kZGxDb21tdW5pdHlDb250cm9sID0gJChcIiNcIiArIGRkbENvbW11bml0eUNvbnRyb2xJZCk7XG4gICAgdGhpcy5fcHJvcC5vbGRERExDb21tdW5pdHlDb250cm9sVmFsdWUgPSB0aGlzLl9wcm9wLmRkbENvbW11bml0eUNvbnRyb2wuYXR0cihcImNvbnRyb2xfdmFsdWVcIik7XG4gICAgdGhpcy5fcHJvcC5kZGxHcmlkQ29udHJvbCA9ICQoXCIjXCIgKyBkZGxHcmlkQ29udHJvbElkKTtcbiAgICB0aGlzLl9wcm9wLm9sZERETEdyaWRDb250cm9sVmFsdWUgPSB0aGlzLl9wcm9wLmRkbEdyaWRDb250cm9sLmF0dHIoXCJjb250cm9sX3ZhbHVlXCIpO1xuICAgIHRoaXMuX3Byb3AuY2hhbmdlRW5hYmxlID0gY2hhbmdlRW5hYmxlO1xuICAgIHRoaXMuR2V0T3JnYW5EYXRhKGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgIGlmIChvcGVyYXRpb25OYW1lID09IEJhc2VVdGlsaXR5LkdldFZpZXdPcGVyYXRpb25OYW1lKCkpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICB2YXIgc3RyZWV0RGF0YSA9IEFycmF5VXRpbGl0eS5XaGVyZVNpbmdsZSh0aGlzLl9wcm9wLmFsbE9yZ2FuTWluUHJvcCwgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgICByZXR1cm4gaXRlbS5vcmdhbklkID09IF90aGlzLl9wcm9wLm9sZERETFN0cmVldENvbnRyb2xWYWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBjb21tdW5pdHlEYXRhID0gQXJyYXlVdGlsaXR5LldoZXJlU2luZ2xlKHRoaXMuX3Byb3AuYWxsT3JnYW5NaW5Qcm9wLCBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgIHJldHVybiBpdGVtLm9yZ2FuSWQgPT0gX3RoaXMuX3Byb3Aub2xkRERMQ29tbXVuaXR5Q29udHJvbFZhbHVlO1xuICAgICAgICB9KTtcbiAgICAgICAgdmFyIGdyaWREYXRhID0gQXJyYXlVdGlsaXR5LldoZXJlU2luZ2xlKHRoaXMuX3Byb3AuYWxsT3JnYW5NaW5Qcm9wLCBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgIHJldHVybiBpdGVtLm9yZ2FuSWQgPT0gX3RoaXMuX3Byb3Aub2xkRERMR3JpZENvbnRyb2xWYWx1ZTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5fcHJvcC5kZGxTdHJlZXRDb250cm9sLnRleHQoc3RyZWV0RGF0YS5vcmdhbk5hbWUpO1xuXG4gICAgICAgIHRoaXMuX3Byb3AuZGRsQ29tbXVuaXR5Q29udHJvbC50ZXh0KGNvbW11bml0eURhdGEub3JnYW5OYW1lKTtcblxuICAgICAgICB0aGlzLl9wcm9wLmRkbEdyaWRDb250cm9sLnRleHQoZ3JpZERhdGEub3JnYW5OYW1lKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuQmluZDNEREwoKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmICghdGhpcy5fcHJvcC5jaGFuZ2VFbmFibGUpIHtcbiAgICAgIHRoaXMuX3Byb3AuZGRsU3RyZWV0Q29udHJvbC5hdHRyKFwiZGlzYWJsZWRcIiwgXCJkaXNhYmxlZFwiKTtcblxuICAgICAgdGhpcy5fcHJvcC5kZGxDb21tdW5pdHlDb250cm9sLmF0dHIoXCJkaXNhYmxlZFwiLCBcImRpc2FibGVkXCIpO1xuXG4gICAgICB0aGlzLl9wcm9wLmRkbEdyaWRDb250cm9sLmF0dHIoXCJkaXNhYmxlZFwiLCBcImRpc2FibGVkXCIpO1xuICAgIH1cbiAgfSxcbiAgQmluZDNEREw6IGZ1bmN0aW9uIEJpbmQzRERMKCkge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICB2YXIgc3RyZWV0RGF0YUxpc3QgPSBBcnJheVV0aWxpdHkuV2hlcmUodGhpcy5fcHJvcC5hbGxPcmdhbk1pblByb3AsIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICByZXR1cm4gaXRlbS5vcmdhblR5cGVWYWx1ZSA9PSBcIlN0cmVldFwiO1xuICAgIH0pO1xuICAgIHRoaXMuQmluZFNpbmdsZURETCh0aGlzLl9wcm9wLmRkbFN0cmVldENvbnRyb2wsIHN0cmVldERhdGFMaXN0KTtcbiAgICB2YXIgc2VsZWN0ZWRTdHJlZXRWYWx1ZSA9IHRoaXMuVHJ5QXV0b1NldFN0cmVldCgpO1xuXG4gICAgdGhpcy5fcHJvcC5kZGxTdHJlZXRDb250cm9sLmNoYW5nZShmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgbmV3U2VsZWN0ZWRTdHJlZXRWYWx1ZSA9ICQodGhpcykudmFsKCk7XG5cbiAgICAgIF90aGlzLlN0cmVldENvbnRyb2xDaGFuZ2UobmV3U2VsZWN0ZWRTdHJlZXRWYWx1ZSk7XG4gICAgfSk7XG5cbiAgICB2YXIgY29tbXVuaXR5RGF0YUxpc3QgPSBBcnJheVV0aWxpdHkuV2hlcmUodGhpcy5fcHJvcC5hbGxPcmdhbk1pblByb3AsIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICByZXR1cm4gaXRlbS5vcmdhblBhcmVudElkID09IHNlbGVjdGVkU3RyZWV0VmFsdWU7XG4gICAgfSk7XG4gICAgdGhpcy5CaW5kU2luZ2xlRERMKHRoaXMuX3Byb3AuZGRsQ29tbXVuaXR5Q29udHJvbCwgY29tbXVuaXR5RGF0YUxpc3QpO1xuICAgIHZhciBzZWxlY3RlZENvbW11bml0eVZhbHVlID0gdGhpcy5UcnlBdXRvU2V0Q29tbXVuaXR5KCk7XG5cbiAgICB0aGlzLl9wcm9wLmRkbENvbW11bml0eUNvbnRyb2wuY2hhbmdlKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBuZXdTZWxlY3RlZENvbW11bml0eVZhbHVlID0gJCh0aGlzKS52YWwoKTtcblxuICAgICAgX3RoaXMuQ29tbXVuaXR5Q29udHJvbENoYW5nZShuZXdTZWxlY3RlZENvbW11bml0eVZhbHVlKTtcbiAgICB9KTtcblxuICAgIHZhciBncmlkRGF0YUxpc3QgPSBBcnJheVV0aWxpdHkuV2hlcmUodGhpcy5fcHJvcC5hbGxPcmdhbk1pblByb3AsIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICByZXR1cm4gaXRlbS5vcmdhblBhcmVudElkID09IHNlbGVjdGVkQ29tbXVuaXR5VmFsdWU7XG4gICAgfSk7XG4gICAgdGhpcy5CaW5kU2luZ2xlRERMKHRoaXMuX3Byb3AuZGRsR3JpZENvbnRyb2wsIGdyaWREYXRhTGlzdCk7XG4gICAgdGhpcy5UcnlBdXRvU2V0R3JpZCgpO1xuICB9LFxuICBUcnlBdXRvU2V0U3RyZWV0OiBmdW5jdGlvbiBUcnlBdXRvU2V0U3RyZWV0KCkge1xuICAgIHZhciBzZWxlY3RlZFZhbHVlID0gdGhpcy5fcHJvcC5vbGRERExTdHJlZXRDb250cm9sVmFsdWU7XG5cbiAgICBpZiAoIXNlbGVjdGVkVmFsdWUgJiYgdGhpcy5fcHJvcC5teVN0cmVldERhdGEpIHtcbiAgICAgIHNlbGVjdGVkVmFsdWUgPSB0aGlzLl9wcm9wLm15U3RyZWV0RGF0YS5vcmdhbklkO1xuICAgIH1cblxuICAgIGlmIChzZWxlY3RlZFZhbHVlKSB7XG4gICAgICB0aGlzLl9wcm9wLmRkbFN0cmVldENvbnRyb2wudmFsKHNlbGVjdGVkVmFsdWUpO1xuXG4gICAgICByZXR1cm4gc2VsZWN0ZWRWYWx1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fcHJvcC5kZGxTdHJlZXRDb250cm9sLnZhbCgpO1xuICB9LFxuICBUcnlBdXRvU2V0Q29tbXVuaXR5OiBmdW5jdGlvbiBUcnlBdXRvU2V0Q29tbXVuaXR5KCkge1xuICAgIHZhciBzZWxlY3RlZFZhbHVlID0gdGhpcy5fcHJvcC5vbGRERExDb21tdW5pdHlDb250cm9sVmFsdWU7XG5cbiAgICBpZiAoIXNlbGVjdGVkVmFsdWUgJiYgdGhpcy5fcHJvcC5teUNvbW11bml0eURhdGEpIHtcbiAgICAgIHNlbGVjdGVkVmFsdWUgPSB0aGlzLl9wcm9wLm15Q29tbXVuaXR5RGF0YS5vcmdhbklkO1xuICAgIH1cblxuICAgIGlmIChzZWxlY3RlZFZhbHVlKSB7XG4gICAgICB0aGlzLl9wcm9wLmRkbENvbW11bml0eUNvbnRyb2wudmFsKHNlbGVjdGVkVmFsdWUpO1xuXG4gICAgICByZXR1cm4gc2VsZWN0ZWRWYWx1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fcHJvcC5kZGxDb21tdW5pdHlDb250cm9sLnZhbCgpO1xuICB9LFxuICBUcnlBdXRvU2V0R3JpZDogZnVuY3Rpb24gVHJ5QXV0b1NldEdyaWQoKSB7XG4gICAgdmFyIHNlbGVjdGVkVmFsdWUgPSB0aGlzLl9wcm9wLm9sZERETEdyaWRDb250cm9sVmFsdWU7XG5cbiAgICBpZiAoIXNlbGVjdGVkVmFsdWUgJiYgdGhpcy5fcHJvcC5teUdyaWREYXRhKSB7XG4gICAgICBzZWxlY3RlZFZhbHVlID0gdGhpcy5fcHJvcC5teUdyaWREYXRhLm9yZ2FuSWQ7XG4gICAgfVxuXG4gICAgaWYgKHNlbGVjdGVkVmFsdWUpIHtcbiAgICAgIHRoaXMuX3Byb3AuZGRsR3JpZENvbnRyb2wudmFsKHNlbGVjdGVkVmFsdWUpO1xuXG4gICAgICByZXR1cm4gc2VsZWN0ZWRWYWx1ZTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fcHJvcC5kZGxHcmlkQ29udHJvbC52YWwoKTtcbiAgfSxcbiAgQmluZFNpbmdsZURETDogZnVuY3Rpb24gQmluZFNpbmdsZURETChkZGxDb250cm9sLCBvcmdhbkRhdGFMaXN0KSB7XG4gICAgZGRsQ29udHJvbC5odG1sKFwiXCIpO1xuICAgIGRkbENvbnRyb2wuYXBwZW5kKFwiPG9wdGlvbiB2YWx1ZT0nICc+LS3or7fpgInmi6ktLTwvb3B0aW9uPlwiKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3JnYW5EYXRhTGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIG9yZ2FuRGF0YSA9IG9yZ2FuRGF0YUxpc3RbaV07XG4gICAgICB2YXIgc2VsID0gXCI8b3B0aW9uIHZhbHVlPSdcIiArIG9yZ2FuRGF0YS5vcmdhbklkICsgXCInPlwiICsgb3JnYW5EYXRhLm9yZ2FuTmFtZSArIFwiPC9vcHRpb24+XCI7XG4gICAgICBkZGxDb250cm9sLmFwcGVuZChzZWwpO1xuICAgIH1cbiAgfSxcbiAgU3RyZWV0Q29udHJvbENoYW5nZTogZnVuY3Rpb24gU3RyZWV0Q29udHJvbENoYW5nZShuZXdTZWxlY3RlZFN0cmVldFZhbHVlKSB7XG4gICAgdmFyIGNvbW11bml0eURhdGFMaXN0ID0gQXJyYXlVdGlsaXR5LldoZXJlKHRoaXMuX3Byb3AuYWxsT3JnYW5NaW5Qcm9wLCBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgcmV0dXJuIGl0ZW0ub3JnYW5QYXJlbnRJZCA9PSBuZXdTZWxlY3RlZFN0cmVldFZhbHVlO1xuICAgIH0pO1xuICAgIHRoaXMuQmluZFNpbmdsZURETCh0aGlzLl9wcm9wLmRkbENvbW11bml0eUNvbnRyb2wsIGNvbW11bml0eURhdGFMaXN0KTtcblxuICAgIHRoaXMuX3Byb3AuZGRsR3JpZENvbnRyb2wuaHRtbChcIlwiKTtcblxuICAgIHRoaXMuX3Byb3AuZGRsR3JpZENvbnRyb2wuYXBwZW5kKFwiPG9wdGlvbiB2YWx1ZT0nICc+LS3or7fpgInmi6ktLTwvb3B0aW9uPlwiKTtcbiAgfSxcbiAgQ29tbXVuaXR5Q29udHJvbENoYW5nZTogZnVuY3Rpb24gQ29tbXVuaXR5Q29udHJvbENoYW5nZShuZXdTZWxlY3RlZENvbW11bml0eVZhbHVlKSB7XG4gICAgdmFyIGdyaWREYXRhTGlzdCA9IEFycmF5VXRpbGl0eS5XaGVyZSh0aGlzLl9wcm9wLmFsbE9yZ2FuTWluUHJvcCwgZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgIHJldHVybiBpdGVtLm9yZ2FuUGFyZW50SWQgPT0gbmV3U2VsZWN0ZWRDb21tdW5pdHlWYWx1ZTtcbiAgICB9KTtcbiAgICB0aGlzLkJpbmRTaW5nbGVEREwodGhpcy5fcHJvcC5kZGxHcmlkQ29udHJvbCwgZ3JpZERhdGFMaXN0KTtcbiAgfVxufTsiLCJcInVzZSBzdHJpY3RcIjtcblxuaWYgKCQoXCIjdmlld0hvdXNlQW5kUGVyc29uV3JhcFwiKS5sZW5ndGggPiAwKSB7XG4gIHZhciBWaWV3SG91c2VBbmRQZXJzb25XcmFwID0gbmV3IFZ1ZSh7XG4gICAgZWw6IFwiI3ZpZXdIb3VzZUFuZFBlcnNvbldyYXBcIixcbiAgICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkge1xuICAgICAgdmFyIHdpbmRvd0hlaWdodCA9IEJhc2VVdGlsaXR5LkdldFVybFBhcmFWYWx1ZShcIndpbmRvd0hlaWdodFwiKTtcbiAgICAgIHZhciBidWlsZElkID0gQmFzZVV0aWxpdHkuR2V0VXJsUGFyYVZhbHVlKFwicmVjb3JkSWRcIik7XG4gICAgICAkKFwiI3ZpZXdIb3VzZUFuZFBlcnNvbldyYXBcIikuaGVpZ2h0KHdpbmRvd0hlaWdodCAtIDIwMCk7XG4gICAgICB0aGlzLmxpc3RIZWlnaHQgPSB3aW5kb3dIZWlnaHQgLSAyNjA7XG4gICAgICB0aGlzLmxvYWRIb3VzZURhdGEoYnVpbGRJZCk7XG4gICAgfSxcbiAgICBkYXRhOiB7XG4gICAgICBhY0ludGVyZmFjZToge1xuICAgICAgICBnZXRIb3VzZUJ5QnVpbGRJZDogXCIvUmVzdC9HcmlkL0J1aWxkL0hvdXNlSW5mby9HZXRIb3VzZUJ5QnVpbGRJZFwiLFxuICAgICAgICBlZGl0SG91c2VWaWV3OiBcIi9IVE1ML0J1aWxkZXIvUnVudGltZS9XZWJGb3JtSW5kZXBlbmRlbmNlUnVudGltZS5odG1sXCIsXG4gICAgICAgIGVkaXRIb3VzZUZvcm1JZDogXCJjY2ZkYWM2My1kOWQ3LTRhNjctYWQ5Zi03NDdlODhhNDhmNWRcIixcbiAgICAgICAgZGVsZXRlSG91c2U6IFwiL1Jlc3QvR3JpZC9CdWlsZC9Ib3VzZUluZm8vRGVsZXRlXCIsXG4gICAgICAgIGVkaXRQZXJzb25WaWV3OiBcIi9IVE1ML0J1aWxkZXIvUnVudGltZS9XZWJGb3JtSW5kZXBlbmRlbmNlUnVudGltZS5odG1sXCIsXG4gICAgICAgIGVkaXRGYW1pbHlGb3JtSWQ6IFwiMTQ4OGVlNTAtZWZiNi00MDlhLWFmYzctZWIwZjk3MTA3MTNmXCIsXG4gICAgICAgIGVkaXRQZXJzb25Gb3JtSWQ6IFwiNWQ2ZGUzODgtY2UxZS00M2M3LWI1OTItYzllODBiNzE0MzVjXCIsXG4gICAgICAgIGdldFBlcnNvbkJ5SG91c2VJZDogXCIvUmVzdC9HcmlkL1BlcnNvbi9QZXJzb25NYWluL0dldFBlcnNvbkJ5SG91c2VJZFwiLFxuICAgICAgICBkZWxldGVQZXJzb246IFwiL1Jlc3QvR3JpZC9QZXJzb24vUGVyc29uTWFpbi9EZWxldGVQZXJzb25XaXRoRmFtaWx5XCIsXG4gICAgICAgIGVkaXRFbnRlcnByaXNlVmlldzogXCIvSFRNTC9CdWlsZGVyL1J1bnRpbWUvV2ViRm9ybUluZGVwZW5kZW5jZVJ1bnRpbWUuaHRtbFwiLFxuICAgICAgICBlZGl0RW50ZXJwcmlzZUZvcm1JZDogXCI5ZTBlMjU4YS02MzlhLTQyMDktODNiZi02MDcwMDBkZTBmNzdcIixcbiAgICAgICAgZ2V0RW50ZXJwcmlzZUJ5SG91c2VJZDogXCIvUmVzdC9HcmlkL0VudGVycHJpc2UvRW50ZXJwcmlzZU1haW4vR2V0RW50ZXJwcmlzZUJ5SG91c2VJZFwiLFxuICAgICAgICBkZWxldGVFbnRlcnByaXNlOiBcIi9SZXN0L0dyaWQvRW50ZXJwcmlzZS9FbnRlcnByaXNlTWFpbi9EZWxldGVcIlxuICAgICAgfSxcbiAgICAgIGxpc3RIZWlnaHQ6IDEwMCxcbiAgICAgIGhvdXNlOiB7XG4gICAgICAgIHNlbGVjdGVkSG91c2U6IG51bGwsXG4gICAgICAgIGNvbHVtbnNDb25maWc6IFt7XG4gICAgICAgICAgdGl0bGU6ICfmiL/lsYvnvJbnoIEnLFxuICAgICAgICAgIGtleTogJ2hvdXNlQ29kZUZ1bGwnLFxuICAgICAgICAgIGFsaWduOiBcImxlZnRcIlxuICAgICAgICB9LCB7XG4gICAgICAgICAgdGl0bGU6ICfmiL/lj7cnLFxuICAgICAgICAgIGtleTogJ2hvdXNlTnVtTmFtZScsXG4gICAgICAgICAgYWxpZ246IFwiY2VudGVyXCIsXG4gICAgICAgICAgd2lkdGg6IDEyMFxuICAgICAgICB9LCB7XG4gICAgICAgICAgdGl0bGU6ICfkvb/nlKjmg4XlhrUnLFxuICAgICAgICAgIGtleTogJ2hvdXNlVXNlZERlc2MnLFxuICAgICAgICAgIGFsaWduOiBcImNlbnRlclwiXG4gICAgICAgIH0sIHtcbiAgICAgICAgICB0aXRsZTogJ+aTjeS9nCcsXG4gICAgICAgICAga2V5OiAnaG91c2VJZCcsXG4gICAgICAgICAgd2lkdGg6IDgwLFxuICAgICAgICAgIGFsaWduOiBcImNlbnRlclwiLFxuICAgICAgICAgIHJlbmRlcjogZnVuY3Rpb24gcmVuZGVyKGgsIHBhcmFtcykge1xuICAgICAgICAgICAgdmFyIGJ1dHRvbnMgPSBbXTtcbiAgICAgICAgICAgIGJ1dHRvbnMucHVzaChoKCdUb29sdGlwJywge1xuICAgICAgICAgICAgICBwcm9wczoge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IFwi5p+l55yLXCJcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgW2goJ2RpdicsIHtcbiAgICAgICAgICAgICAgXCJjbGFzc1wiOiBcImxpc3Qtcm93LWJ1dHRvbiB2aWV3XCIsXG4gICAgICAgICAgICAgIG9uOiB7XG4gICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uIGNsaWNrKCkge1xuICAgICAgICAgICAgICAgICAgVmlld0hvdXNlQW5kUGVyc29uV3JhcC52aWV3SG91c2UocGFyYW1zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXSkpO1xuICAgICAgICAgICAgdmFyIGVoID0gaCgnZGl2Jywge1xuICAgICAgICAgICAgICBcImNsYXNzXCI6IFwibGlzdC1yb3ctYnV0dG9uLXdyYXBcIlxuICAgICAgICAgICAgfSwgYnV0dG9ucyk7XG4gICAgICAgICAgICByZXR1cm4gZWg7XG4gICAgICAgICAgfVxuICAgICAgICB9XSxcbiAgICAgICAgdGFibGVEYXRhOiBbXSxcbiAgICAgICAgc2VhcmNoSG91c2VUZXh0OiBcIlwiXG4gICAgICB9LFxuICAgICAgcGVyc29uOiB7XG4gICAgICAgIGNvbHVtbnNDb25maWc6IFt7XG4gICAgICAgICAgdGl0bGU6ICfkurrlkZgnLFxuICAgICAgICAgIGtleTogJ2Rpc3BsYXlUZXh0JyxcbiAgICAgICAgICBhbGlnbjogXCJsZWZ0XCIsXG4gICAgICAgICAgd2lkdGg6IDEyMFxuICAgICAgICB9LCB7XG4gICAgICAgICAgdGl0bGU6ICfouqvku73or4Hlj7cnLFxuICAgICAgICAgIGtleTogJ3BlcnNvbklkQ2FyZCcsXG4gICAgICAgICAgYWxpZ246IFwibGVmdFwiXG4gICAgICAgIH0sIHtcbiAgICAgICAgICB0aXRsZTogJ+iBlOezu+eUteivnScsXG4gICAgICAgICAga2V5OiAncGVyc29uUGhvbmUnLFxuICAgICAgICAgIGFsaWduOiBcImxlZnRcIixcbiAgICAgICAgICB3aWR0aDogMTQwXG4gICAgICAgIH0sIHtcbiAgICAgICAgICB0aXRsZTogJ+aTjeS9nCcsXG4gICAgICAgICAga2V5OiAncGVyc29uSWQnLFxuICAgICAgICAgIHdpZHRoOiAxNDAsXG4gICAgICAgICAgYWxpZ246IFwiY2VudGVyXCIsXG4gICAgICAgICAgcmVuZGVyOiBmdW5jdGlvbiByZW5kZXIoaCwgcGFyYW1zKSB7XG4gICAgICAgICAgICB2YXIgYnV0dG9ucyA9IFtdO1xuICAgICAgICAgICAgYnV0dG9ucy5wdXNoKGgoJ1Rvb2x0aXAnLCB7XG4gICAgICAgICAgICAgIHByb3BzOiB7XG4gICAgICAgICAgICAgICAgY29udGVudDogXCLmn6XnnItcIlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBbaCgnZGl2Jywge1xuICAgICAgICAgICAgICBcImNsYXNzXCI6IFwibGlzdC1yb3ctYnV0dG9uIHZpZXdcIixcbiAgICAgICAgICAgICAgb246IHtcbiAgICAgICAgICAgICAgICBjbGljazogZnVuY3Rpb24gY2xpY2soKSB7XG4gICAgICAgICAgICAgICAgICBWaWV3SG91c2VBbmRQZXJzb25XcmFwLnZpZXdQZXJzb24ocGFyYW1zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXSkpO1xuICAgICAgICAgICAgdmFyIGVoID0gaCgnZGl2Jywge1xuICAgICAgICAgICAgICBcImNsYXNzXCI6IFwibGlzdC1yb3ctYnV0dG9uLXdyYXBcIlxuICAgICAgICAgICAgfSwgYnV0dG9ucyk7XG4gICAgICAgICAgICByZXR1cm4gZWg7XG4gICAgICAgICAgfVxuICAgICAgICB9XSxcbiAgICAgICAgdGFibGVEYXRhOiBbXVxuICAgICAgfSxcbiAgICAgIGVudGVycHJpc2U6IHtcbiAgICAgICAgY29sdW1uc0NvbmZpZzogW3tcbiAgICAgICAgICB0aXRsZTogJ+S8geS4mijpl6jlupflkI3np7ApJyxcbiAgICAgICAgICBrZXk6ICdlbnROYW1lJyxcbiAgICAgICAgICBhbGlnbjogXCJsZWZ0XCJcbiAgICAgICAgfSwge1xuICAgICAgICAgIHRpdGxlOiAn5pON5L2cJyxcbiAgICAgICAgICBrZXk6ICdlbnRJZCcsXG4gICAgICAgICAgd2lkdGg6IDE0MCxcbiAgICAgICAgICBhbGlnbjogXCJjZW50ZXJcIixcbiAgICAgICAgICByZW5kZXI6IGZ1bmN0aW9uIHJlbmRlcihoLCBwYXJhbXMpIHtcbiAgICAgICAgICAgIHZhciBidXR0b25zID0gW107XG4gICAgICAgICAgICBidXR0b25zLnB1c2goaCgnVG9vbHRpcCcsIHtcbiAgICAgICAgICAgICAgcHJvcHM6IHtcbiAgICAgICAgICAgICAgICBjb250ZW50OiBcIuafpeeci1wiXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sIFtoKCdkaXYnLCB7XG4gICAgICAgICAgICAgIFwiY2xhc3NcIjogXCJsaXN0LXJvdy1idXR0b24gdmlld1wiLFxuICAgICAgICAgICAgICBvbjoge1xuICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiBjbGljaygpIHtcbiAgICAgICAgICAgICAgICAgIGdyaWRNYW5hZ2VyLnZpZXdFbnRlcnByaXNlKHBhcmFtcyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KV0pKTtcbiAgICAgICAgICAgIGJ1dHRvbnMucHVzaChoKCdUb29sdGlwJywge1xuICAgICAgICAgICAgICBwcm9wczoge1xuICAgICAgICAgICAgICAgIGNvbnRlbnQ6IFwi5L+u5pS5XCJcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgW2goJ2RpdicsIHtcbiAgICAgICAgICAgICAgXCJjbGFzc1wiOiBcImxpc3Qtcm93LWJ1dHRvbiBlZGl0XCIsXG4gICAgICAgICAgICAgIG9uOiB7XG4gICAgICAgICAgICAgICAgY2xpY2s6IGZ1bmN0aW9uIGNsaWNrKCkge1xuICAgICAgICAgICAgICAgICAgZ3JpZE1hbmFnZXIuZWRpdEVudGVycHJpc2UocGFyYW1zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXSkpO1xuICAgICAgICAgICAgYnV0dG9ucy5wdXNoKGgoJ1Rvb2x0aXAnLCB7XG4gICAgICAgICAgICAgIHByb3BzOiB7XG4gICAgICAgICAgICAgICAgY29udGVudDogXCLliKDpmaRcIlxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LCBbaCgnZGl2Jywge1xuICAgICAgICAgICAgICBcImNsYXNzXCI6IFwibGlzdC1yb3ctYnV0dG9uIGRlbFwiLFxuICAgICAgICAgICAgICBvbjoge1xuICAgICAgICAgICAgICAgIGNsaWNrOiBmdW5jdGlvbiBjbGljaygpIHtcbiAgICAgICAgICAgICAgICAgIGdyaWRNYW5hZ2VyLmRlbEVudGVycHJpc2UocGFyYW1zKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXSkpO1xuICAgICAgICAgICAgdmFyIGVoID0gaCgnZGl2Jywge1xuICAgICAgICAgICAgICBcImNsYXNzXCI6IFwibGlzdC1yb3ctYnV0dG9uLXdyYXBcIlxuICAgICAgICAgICAgfSwgYnV0dG9ucyk7XG4gICAgICAgICAgICByZXR1cm4gZWg7XG4gICAgICAgICAgfVxuICAgICAgICB9XSxcbiAgICAgICAgdGFibGVEYXRhOiBbXVxuICAgICAgfVxuICAgIH0sXG4gICAgbWV0aG9kczoge1xuICAgICAgZ2V0Rm9ybVBhcmE6IGZ1bmN0aW9uIGdldEZvcm1QYXJhKGZvcm1JZCwgb3BOYW1lLCByZWNvcmRJZCwgbWVudVJpZ2h0VXJsUGFyYSwgZW5kRnVuYykge1xuICAgICAgICB2YXIgcGFyYSA9IHtcbiAgICAgICAgICBcImZvcm1JZFwiOiBmb3JtSWQsXG4gICAgICAgICAgXCJidXR0b25JZFwiOiBcIlwiLFxuICAgICAgICAgIFwibGlzdEZvcm1CdXR0b25FbGVtSWRcIjogXCJcIixcbiAgICAgICAgICBcInJlY29yZElkXCI6IHJlY29yZElkLFxuICAgICAgICAgIFwib3BlcmF0aW9uVHlwZVwiOiBvcE5hbWUsXG4gICAgICAgICAgXCJ3aW5kb3dXaWR0aFwiOiAxMzAwLFxuICAgICAgICAgIFwid2luZG93SGVpZ2h0XCI6IDg4MCxcbiAgICAgICAgICBcIm1lbnVSaWdodFVybFBhcmFcIjogbWVudVJpZ2h0VXJsUGFyYSxcbiAgICAgICAgICBcImRldk9wZXJhdGlvbkVuZEZ1bmNcIjogZW5kRnVuYyxcbiAgICAgICAgICBcIm1lbnVSaWdodFVybFBhcmFKc29uXCI6IFwiXCJcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoUGFnZVN0eWxlVXRpbGl0eS5HZXRQYWdlSGVpZ2h0KCkgPCA1MDApIHtcbiAgICAgICAgICBwYXJhLndpbmRvd0hlaWdodCA9IDYwMDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBwYXJhO1xuICAgICAgfSxcbiAgICAgIGdldEZvcm1EaWFsb2dQYXJhOiBmdW5jdGlvbiBnZXRGb3JtRGlhbG9nUGFyYSh0aXRsZSkge1xuICAgICAgICB2YXIgcGFyYSA9IHtcbiAgICAgICAgICBcIndpZHRoXCI6IDEzMDAsXG4gICAgICAgICAgXCJoZWlnaHRcIjogODgwLFxuICAgICAgICAgIFwidGl0bGVcIjogdGl0bGVcbiAgICAgICAgfTtcblxuICAgICAgICBpZiAoUGFnZVN0eWxlVXRpbGl0eS5HZXRQYWdlSGVpZ2h0KCkgPCA1MDApIHtcbiAgICAgICAgICBwYXJhLmhlaWdodCA9IDYwMDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBwYXJhO1xuICAgICAgfSxcbiAgICAgIHNlbGVjdGlvbkhvdXNlQ2hhbmdlOiBmdW5jdGlvbiBzZWxlY3Rpb25Ib3VzZUNoYW5nZShyb3csIGluZGV4KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKHJvdyk7XG4gICAgICAgIHRoaXMuaG91c2Uuc2VsZWN0ZWRIb3VzZSA9IHJvdztcbiAgICAgICAgdGhpcy5sb2FkUGVyc29uRGF0YSgpO1xuICAgICAgICB0aGlzLmxvYWRFbnRlcnByaXNlRGF0YSgpO1xuICAgICAgfSxcbiAgICAgIGxvYWRIb3VzZURhdGE6IGZ1bmN0aW9uIGxvYWRIb3VzZURhdGEoYnVpbGRJZCkge1xuICAgICAgICBBamF4VXRpbGl0eS5HZXQodGhpcy5hY0ludGVyZmFjZS5nZXRIb3VzZUJ5QnVpbGRJZCwge1xuICAgICAgICAgIGJ1aWxkSWQ6IGJ1aWxkSWRcbiAgICAgICAgfSwgZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG5cbiAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIHRoaXMuaG91c2UudGFibGVEYXRhID0gcmVzdWx0LmRhdGE7XG4gICAgICAgICAgfVxuICAgICAgICB9LCB0aGlzKTtcbiAgICAgIH0sXG4gICAgICBzZWFyY2hIb3VzZTogZnVuY3Rpb24gc2VhcmNoSG91c2UoKSB7XG4gICAgICAgIHZhciB0ZXh0ID0gdGhpcy5ob3VzZS5zZWFyY2hIb3VzZVRleHQ7XG5cbiAgICAgICAgaWYgKHRoaXMuaG91c2Uuc291cmNlVGFibGVEYXRhKSB7XG4gICAgICAgICAgdGhpcy5ob3VzZS50YWJsZURhdGEgPSB0aGlzLmhvdXNlLnNvdXJjZVRhYmxlRGF0YTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmhvdXNlLnRhYmxlRGF0YS5sZW5ndGggPiAwICYmIFN0cmluZ1V0aWxpdHkuSXNOb3ROdWxsT3JFbXB0eSh0ZXh0KSkge1xuICAgICAgICAgIHRoaXMuaG91c2Uuc291cmNlVGFibGVEYXRhID0gdGhpcy5ob3VzZS50YWJsZURhdGE7XG4gICAgICAgICAgdGhpcy5ob3VzZS50YWJsZURhdGEgPSBBcnJheVV0aWxpdHkuV2hlcmUodGhpcy5ob3VzZS50YWJsZURhdGEsIGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS5ob3VzZUNvZGUuaW5kZXhPZih0ZXh0KSA+PSAwIHx8IGl0ZW0uaG91c2VOdW1OYW1lLmluZGV4T2YodGV4dCkgPj0gMCkge1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGFkZEhvdXNlOiBmdW5jdGlvbiBhZGRIb3VzZSgpIHtcbiAgICAgICAgdmFyIHNlbGVjdGVkQnVpbGQgPSB0aGlzLmJ1aWxkVHJlZS50cmVlU2VsZWN0ZWROb2RlO1xuXG4gICAgICAgIGlmIChzZWxlY3RlZEJ1aWxkID09IG51bGwpIHtcbiAgICAgICAgICBEaWFsb2dVdGlsaXR5LkFsZXJ0VGV4dChcIuivt+WFiOmAieaLqeW7uuetkeeJqSFcIik7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG1lbnVSaWdodFVybFBhcmEgPSBbe1xuICAgICAgICAgIFwiQWN0aW9uVHlwZVwiOiBcIkJpbmRUb0ZpZWxkXCIsXG4gICAgICAgICAgXCJGaWVsZE5hbWVcIjogXCJIT1VTRV9CVUlMRF9JRFwiLFxuICAgICAgICAgIFwiVmFsdWVcIjogc2VsZWN0ZWRCdWlsZC5idWlsZElkXG4gICAgICAgIH1dO1xuICAgICAgICB2YXIgZm9ybVBhcmEgPSB0aGlzLmdldEZvcm1QYXJhKHRoaXMuYWNJbnRlcmZhY2UuZWRpdEhvdXNlRm9ybUlkLCBCYXNlVXRpbGl0eS5HZXRBZGRPcGVyYXRpb25OYW1lKCksIFwiXCIsIEpzb25VdGlsaXR5Lkpzb25Ub1N0cmluZyhtZW51UmlnaHRVcmxQYXJhKSwgXCJyZUxvYWRIb3VzZVwiKTtcbiAgICAgICAgRGlhbG9nVXRpbGl0eS5GcmFtZV9PcGVuSWZyYW1lV2luZG93KHdpbmRvdywgRGlhbG9nVXRpbGl0eS5EaWFsb2dJZCwgQmFzZVV0aWxpdHkuQnVpbGRWaWV3KHRoaXMuYWNJbnRlcmZhY2UuZWRpdEJ1aWxkVmlldywgZm9ybVBhcmEpLCB0aGlzLmdldEZvcm1EaWFsb2dQYXJhKFwi5oi/5bGL55m76K6wXCIpLCAxLCB0cnVlKTtcbiAgICAgIH0sXG4gICAgICB2aWV3SG91c2U6IGZ1bmN0aW9uIHZpZXdIb3VzZShwYXJhKSB7XG4gICAgICAgIHZhciBob3VzZUlkID0gcGFyYS5yb3cuaG91c2VJZDtcbiAgICAgICAgdmFyIGZvcm1QYXJhID0gdGhpcy5nZXRGb3JtUGFyYSh0aGlzLmFjSW50ZXJmYWNlLmVkaXRIb3VzZUZvcm1JZCwgQmFzZVV0aWxpdHkuR2V0Vmlld09wZXJhdGlvbk5hbWUoKSwgaG91c2VJZCwgXCJcIiwgXCJyZUxvYWRIb3VzZVwiKTtcbiAgICAgICAgRGlhbG9nVXRpbGl0eS5GcmFtZV9PcGVuSWZyYW1lV2luZG93KHdpbmRvdywgRGlhbG9nVXRpbGl0eS5EaWFsb2dJZDAzLCBCYXNlVXRpbGl0eS5CdWlsZFZpZXcodGhpcy5hY0ludGVyZmFjZS5lZGl0SG91c2VWaWV3LCBmb3JtUGFyYSksIHRoaXMuZ2V0Rm9ybURpYWxvZ1BhcmEoXCLmiL/lsYvnmbvorrBcIiksIDEsIHRydWUpO1xuICAgICAgfSxcbiAgICAgIGVkaXRIb3VzZTogZnVuY3Rpb24gZWRpdEhvdXNlKHBhcmEpIHtcbiAgICAgICAgdmFyIGhvdXNlSWQgPSBwYXJhLnJvdy5ob3VzZUlkO1xuICAgICAgICB2YXIgZm9ybVBhcmEgPSB0aGlzLmdldEZvcm1QYXJhKHRoaXMuYWNJbnRlcmZhY2UuZWRpdEhvdXNlRm9ybUlkLCBCYXNlVXRpbGl0eS5HZXRVcGRhdGVPcGVyYXRpb25OYW1lKCksIGhvdXNlSWQsIFwiXCIsIFwicmVMb2FkSG91c2VcIik7XG4gICAgICAgIERpYWxvZ1V0aWxpdHkuRnJhbWVfT3BlbklmcmFtZVdpbmRvdyh3aW5kb3csIERpYWxvZ1V0aWxpdHkuRGlhbG9nSWQsIEJhc2VVdGlsaXR5LkJ1aWxkVmlldyh0aGlzLmFjSW50ZXJmYWNlLmVkaXRCdWlsZFZpZXcsIGZvcm1QYXJhKSwgdGhpcy5nZXRGb3JtRGlhbG9nUGFyYShcIuaIv+Wxi+eZu+iusFwiKSwgMSwgdHJ1ZSk7XG4gICAgICB9LFxuICAgICAgZGVsSG91c2U6IGZ1bmN0aW9uIGRlbEhvdXNlKHBhcmEpIHtcbiAgICAgICAgdmFyIGhvdXNlSWQgPSBwYXJhLnJvdy5ob3VzZUlkO1xuICAgICAgICBEaWFsb2dVdGlsaXR5LkNvbmZpcm0od2luZG93LCBcIuehruiupOimgeWIoOmZpOW9k+WJjeaIv+Wxi+WQl++8n1wiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgQWpheFV0aWxpdHkuRGVsZXRlKHRoaXMuYWNJbnRlcmZhY2UuZGVsZXRlSG91c2UsIHtcbiAgICAgICAgICAgIHJlY29yZElkOiBob3VzZUlkXG4gICAgICAgICAgfSwgZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgICAgICAgIERpYWxvZ1V0aWxpdHkuQWxlcnRUZXh0KHJlc3VsdC5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgdGhpcy5sb2FkSG91c2VEYXRhKHRoaXMuYnVpbGRUcmVlLnRyZWVTZWxlY3RlZE5vZGUuYnVpbGRJZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSwgdGhpcyk7XG4gICAgICAgIH0sIHRoaXMpO1xuICAgICAgfSxcbiAgICAgIHNlbGVjdGlvblBlcnNvbkNoYW5nZTogZnVuY3Rpb24gc2VsZWN0aW9uUGVyc29uQ2hhbmdlKCkge30sXG4gICAgICBsb2FkUGVyc29uRGF0YTogZnVuY3Rpb24gbG9hZFBlcnNvbkRhdGEoKSB7XG4gICAgICAgIHZhciBob3VzZUlkID0gdGhpcy5ob3VzZS5zZWxlY3RlZEhvdXNlLmhvdXNlSWQ7XG4gICAgICAgIEFqYXhVdGlsaXR5LkdldCh0aGlzLmFjSW50ZXJmYWNlLmdldFBlcnNvbkJ5SG91c2VJZCwge1xuICAgICAgICAgIGhvdXNlSWQ6IGhvdXNlSWRcbiAgICAgICAgfSwgZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG5cbiAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzdWx0LmRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgcmVzdWx0LmRhdGFbaV0uZGlzcGxheVRleHQgPSByZXN1bHQuZGF0YVtpXS5wZXJzb25OYW1lO1xuXG4gICAgICAgICAgICAgIGlmIChyZXN1bHQuZGF0YVtpXS5wZXJzb25SZWxhdGlvbnNoaXAgPT0gXCIwXCIpIHtcbiAgICAgICAgICAgICAgICByZXN1bHQuZGF0YVtpXS5kaXNwbGF5VGV4dCA9IFwiW+aIt+S4u11cIiArIHJlc3VsdC5kYXRhW2ldLmRpc3BsYXlUZXh0O1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlc3VsdC5kYXRhW2ldLmRpc3BsYXlUZXh0ID0gXCJb5oiQ5ZGYXVwiICsgcmVzdWx0LmRhdGFbaV0uZGlzcGxheVRleHQ7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdGhpcy5wZXJzb24udGFibGVEYXRhID0gcmVzdWx0LmRhdGE7XG4gICAgICAgICAgfVxuICAgICAgICB9LCB0aGlzKTtcbiAgICAgIH0sXG4gICAgICBhZGRGYW1pbHk6IGZ1bmN0aW9uIGFkZEZhbWlseSgpIHtcbiAgICAgICAgdmFyIHNlbGVjdGVkSG91c2UgPSB0aGlzLmhvdXNlLnNlbGVjdGVkSG91c2U7XG5cbiAgICAgICAgaWYgKHNlbGVjdGVkSG91c2UgPT0gbnVsbCkge1xuICAgICAgICAgIERpYWxvZ1V0aWxpdHkuQWxlcnRUZXh0KFwi6K+35YWI6YCJ5oup5oi/5bGLIVwiKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgbWVudVJpZ2h0VXJsUGFyYSA9IFt7XG4gICAgICAgICAgXCJBY3Rpb25UeXBlXCI6IFwiQmluZFRvRmllbGRcIixcbiAgICAgICAgICBcIkZpZWxkTmFtZVwiOiBcIkZBTUlMWV9IT1VTRV9JRFwiLFxuICAgICAgICAgIFwiVmFsdWVcIjogc2VsZWN0ZWRIb3VzZS5ob3VzZUlkXG4gICAgICAgIH0sIHtcbiAgICAgICAgICBcIkFjdGlvblR5cGVcIjogXCJCaW5kVG9GaWVsZFwiLFxuICAgICAgICAgIFwiRmllbGROYW1lXCI6IFwiRkFNSUxZX0hPVVNFX0NPREVfRlVMTFwiLFxuICAgICAgICAgIFwiVmFsdWVcIjogc2VsZWN0ZWRIb3VzZS5ob3VzZUNvZGVGdWxsXG4gICAgICAgIH1dO1xuICAgICAgICB2YXIgZm9ybVBhcmEgPSB0aGlzLmdldEZvcm1QYXJhKHRoaXMuYWNJbnRlcmZhY2UuZWRpdEZhbWlseUZvcm1JZCwgQmFzZVV0aWxpdHkuR2V0QWRkT3BlcmF0aW9uTmFtZSgpLCBcIlwiLCBKc29uVXRpbGl0eS5Kc29uVG9TdHJpbmcobWVudVJpZ2h0VXJsUGFyYSksIFwicmVMb2FkUGVyc29uXCIpO1xuICAgICAgICBEaWFsb2dVdGlsaXR5LkZyYW1lX09wZW5JZnJhbWVXaW5kb3cod2luZG93LCBEaWFsb2dVdGlsaXR5LkRpYWxvZ0lkLCBCYXNlVXRpbGl0eS5CdWlsZFZpZXcodGhpcy5hY0ludGVyZmFjZS5lZGl0QnVpbGRWaWV3LCBmb3JtUGFyYSksIHRoaXMuZ2V0Rm9ybURpYWxvZ1BhcmEoXCLmiLfnmbvorrBcIiksIDEsIHRydWUpO1xuICAgICAgfSxcbiAgICAgIGRlbFBlcnNvbjogZnVuY3Rpb24gZGVsUGVyc29uKHBhcmEpIHtcbiAgICAgICAgdmFyIHBlcnNvbklkID0gcGFyYS5yb3cucGVyc29uSWQ7XG4gICAgICAgIERpYWxvZ1V0aWxpdHkuQ29uZmlybSh3aW5kb3csIFwi56Gu6K6k6KaB5Yig6Zmk5b2T5YmN5Lq65ZGY5ZCX77yfPGJyIC8+MTrpnIDopoHlhYjliKDpmaTmiLfkuK3nmoTlhbbku5bmiJDlkZgs5omN5Y+v5Lul5Yig6Zmk5oi35Li7LjxiciAvPjLliKDpmaTmiLfkuLvml7Ys5bCG5ZCM5pe25Yig6Zmk6K+l5oi355qE5L+h5oGvLlwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgQWpheFV0aWxpdHkuRGVsZXRlKHRoaXMuYWNJbnRlcmZhY2UuZGVsZXRlUGVyc29uLCB7XG4gICAgICAgICAgICBwZXJzb25JZDogcGVyc29uSWRcbiAgICAgICAgICB9LCBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgRGlhbG9nVXRpbGl0eS5BbGVydFRleHQocmVzdWx0Lm1lc3NhZ2UpO1xuICAgICAgICAgICAgICB0aGlzLmxvYWRQZXJzb25EYXRhKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSwgdGhpcyk7XG4gICAgICAgIH0sIHRoaXMpO1xuICAgICAgfSxcbiAgICAgIGVkaXRQZXJzb246IGZ1bmN0aW9uIGVkaXRQZXJzb24ocGFyYSkge1xuICAgICAgICB2YXIgcGVyc29uSWQgPSBwYXJhLnJvdy5wZXJzb25JZDtcbiAgICAgICAgdmFyIGZvcm1QYXJhID0gdGhpcy5nZXRGb3JtUGFyYSh0aGlzLmFjSW50ZXJmYWNlLmVkaXRQZXJzb25Gb3JtSWQsIEJhc2VVdGlsaXR5LkdldFVwZGF0ZU9wZXJhdGlvbk5hbWUoKSwgcGVyc29uSWQsIFwiXCIsIFwicmVMb2FkUGVyc29uXCIpO1xuICAgICAgICBEaWFsb2dVdGlsaXR5LkZyYW1lX09wZW5JZnJhbWVXaW5kb3cod2luZG93LCBEaWFsb2dVdGlsaXR5LkRpYWxvZ0lkLCBCYXNlVXRpbGl0eS5CdWlsZFZpZXcodGhpcy5hY0ludGVyZmFjZS5lZGl0QnVpbGRWaWV3LCBmb3JtUGFyYSksIHRoaXMuZ2V0Rm9ybURpYWxvZ1BhcmEoXCLkurrlkZjkv6Hmga/nu7TmiqRcIiksIDEsIHRydWUpO1xuICAgICAgfSxcbiAgICAgIGVkaXRGYW1pbHk6IGZ1bmN0aW9uIGVkaXRGYW1pbHkocGFyYSkge1xuICAgICAgICB2YXIgcGVyc29uRmFtaWx5SWQgPSBwYXJhLnJvdy5wZXJzb25GYW1pbHlJZDtcbiAgICAgICAgdmFyIGZvcm1QYXJhID0gdGhpcy5nZXRGb3JtUGFyYSh0aGlzLmFjSW50ZXJmYWNlLmVkaXRGYW1pbHlGb3JtSWQsIEJhc2VVdGlsaXR5LkdldFVwZGF0ZU9wZXJhdGlvbk5hbWUoKSwgcGVyc29uRmFtaWx5SWQsIFwiXCIsIFwicmVMb2FkUGVyc29uXCIpO1xuICAgICAgICBEaWFsb2dVdGlsaXR5LkZyYW1lX09wZW5JZnJhbWVXaW5kb3cod2luZG93LCBEaWFsb2dVdGlsaXR5LkRpYWxvZ0lkLCBCYXNlVXRpbGl0eS5CdWlsZFZpZXcodGhpcy5hY0ludGVyZmFjZS5lZGl0QnVpbGRWaWV3LCBmb3JtUGFyYSksIHRoaXMuZ2V0Rm9ybURpYWxvZ1BhcmEoXCLmiLfnmbvorrBcIiksIDEsIHRydWUpO1xuICAgICAgfSxcbiAgICAgIHZpZXdQZXJzb246IGZ1bmN0aW9uIHZpZXdQZXJzb24ocGFyYSkge1xuICAgICAgICB2YXIgcGVyc29uSWQgPSBwYXJhLnJvdy5wZXJzb25JZDtcbiAgICAgICAgdmFyIGZvcm1QYXJhID0gdGhpcy5nZXRGb3JtUGFyYSh0aGlzLmFjSW50ZXJmYWNlLmVkaXRQZXJzb25Gb3JtSWQsIEJhc2VVdGlsaXR5LkdldFZpZXdPcGVyYXRpb25OYW1lKCksIHBlcnNvbklkLCBcIlwiLCBcInJlTG9hZFBlcnNvblwiKTtcbiAgICAgICAgRGlhbG9nVXRpbGl0eS5GcmFtZV9PcGVuSWZyYW1lV2luZG93KHdpbmRvdywgRGlhbG9nVXRpbGl0eS5EaWFsb2dJZDAzLCBCYXNlVXRpbGl0eS5CdWlsZFZpZXcodGhpcy5hY0ludGVyZmFjZS5lZGl0UGVyc29uVmlldywgZm9ybVBhcmEpLCB0aGlzLmdldEZvcm1EaWFsb2dQYXJhKFwi5Lq65ZGY5L+h5oGv5p+l55yLXCIpLCAxLCB0cnVlKTtcbiAgICAgIH0sXG4gICAgICBhZGRFbnRlcnByaXNlOiBmdW5jdGlvbiBhZGRFbnRlcnByaXNlKCkge1xuICAgICAgICB2YXIgc2VsZWN0ZWRIb3VzZSA9IHRoaXMuaG91c2Uuc2VsZWN0ZWRIb3VzZTtcblxuICAgICAgICBpZiAoc2VsZWN0ZWRIb3VzZSA9PSBudWxsKSB7XG4gICAgICAgICAgRGlhbG9nVXRpbGl0eS5BbGVydFRleHQoXCLor7flhYjpgInmi6nmiL/lsYshXCIpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBtZW51UmlnaHRVcmxQYXJhID0gW3tcbiAgICAgICAgICBcIkFjdGlvblR5cGVcIjogXCJCaW5kVG9GaWVsZFwiLFxuICAgICAgICAgIFwiRmllbGROYW1lXCI6IFwiRU5UX0hPVVNFX0lEXCIsXG4gICAgICAgICAgXCJWYWx1ZVwiOiBzZWxlY3RlZEhvdXNlLmhvdXNlSWRcbiAgICAgICAgfSwge1xuICAgICAgICAgIFwiQWN0aW9uVHlwZVwiOiBcIkJpbmRUb0ZpZWxkXCIsXG4gICAgICAgICAgXCJGaWVsZE5hbWVcIjogXCJFTlRfSE9VU0VfQ09ERVwiLFxuICAgICAgICAgIFwiVmFsdWVcIjogc2VsZWN0ZWRIb3VzZS5ob3VzZUNvZGVGdWxsXG4gICAgICAgIH1dO1xuICAgICAgICB2YXIgZm9ybVBhcmEgPSB0aGlzLmdldEZvcm1QYXJhKHRoaXMuYWNJbnRlcmZhY2UuZWRpdEVudGVycHJpc2VGb3JtSWQsIEJhc2VVdGlsaXR5LkdldEFkZE9wZXJhdGlvbk5hbWUoKSwgXCJcIiwgSnNvblV0aWxpdHkuSnNvblRvU3RyaW5nKG1lbnVSaWdodFVybFBhcmEpLCBcInJlTG9hZEVudGVycHJpc2VcIik7XG4gICAgICAgIERpYWxvZ1V0aWxpdHkuRnJhbWVfT3BlbklmcmFtZVdpbmRvdyh3aW5kb3csIERpYWxvZ1V0aWxpdHkuRGlhbG9nSWQsIEJhc2VVdGlsaXR5LkJ1aWxkVmlldyh0aGlzLmFjSW50ZXJmYWNlLmVkaXRCdWlsZFZpZXcsIGZvcm1QYXJhKSwgdGhpcy5nZXRGb3JtRGlhbG9nUGFyYShcIuS8geS4muazleS6uueZu+iusFwiKSwgMSwgdHJ1ZSk7XG4gICAgICB9LFxuICAgICAgbG9hZEVudGVycHJpc2VEYXRhOiBmdW5jdGlvbiBsb2FkRW50ZXJwcmlzZURhdGEoKSB7XG4gICAgICAgIHZhciBob3VzZUlkID0gdGhpcy5ob3VzZS5zZWxlY3RlZEhvdXNlLmhvdXNlSWQ7XG4gICAgICAgIEFqYXhVdGlsaXR5LkdldCh0aGlzLmFjSW50ZXJmYWNlLmdldEVudGVycHJpc2VCeUhvdXNlSWQsIHtcbiAgICAgICAgICBob3VzZUlkOiBob3VzZUlkXG4gICAgICAgIH0sIGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuXG4gICAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgICAgICB0aGlzLmVudGVycHJpc2UudGFibGVEYXRhID0gcmVzdWx0LmRhdGE7XG4gICAgICAgICAgfVxuICAgICAgICB9LCB0aGlzKTtcbiAgICAgIH0sXG4gICAgICB2aWV3RW50ZXJwcmlzZTogZnVuY3Rpb24gdmlld0VudGVycHJpc2UocGFyYSkge1xuICAgICAgICB2YXIgZW50SWQgPSBwYXJhLnJvdy5lbnRJZDtcbiAgICAgICAgdmFyIGZvcm1QYXJhID0gdGhpcy5nZXRGb3JtUGFyYSh0aGlzLmFjSW50ZXJmYWNlLmVkaXRFbnRlcnByaXNlRm9ybUlkLCBCYXNlVXRpbGl0eS5HZXRWaWV3T3BlcmF0aW9uTmFtZSgpLCBlbnRJZCwgXCJcIiwgXCJyZUxvYWRFbnRlcnByaXNlXCIpO1xuICAgICAgICBEaWFsb2dVdGlsaXR5LkZyYW1lX09wZW5JZnJhbWVXaW5kb3cod2luZG93LCBEaWFsb2dVdGlsaXR5LkRpYWxvZ0lkLCBCYXNlVXRpbGl0eS5CdWlsZFZpZXcodGhpcy5hY0ludGVyZmFjZS5lZGl0QnVpbGRWaWV3LCBmb3JtUGFyYSksIHRoaXMuZ2V0Rm9ybURpYWxvZ1BhcmEoXCLkvIHkuJrms5Xkurrmn6XnnItcIiksIDEsIHRydWUpO1xuICAgICAgfSxcbiAgICAgIGVkaXRFbnRlcnByaXNlOiBmdW5jdGlvbiBlZGl0RW50ZXJwcmlzZShwYXJhKSB7XG4gICAgICAgIHZhciBlbnRJZCA9IHBhcmEucm93LmVudElkO1xuICAgICAgICB2YXIgZm9ybVBhcmEgPSB0aGlzLmdldEZvcm1QYXJhKHRoaXMuYWNJbnRlcmZhY2UuZWRpdEVudGVycHJpc2VGb3JtSWQsIEJhc2VVdGlsaXR5LkdldFVwZGF0ZU9wZXJhdGlvbk5hbWUoKSwgZW50SWQsIFwiXCIsIFwicmVMb2FkRW50ZXJwcmlzZVwiKTtcbiAgICAgICAgRGlhbG9nVXRpbGl0eS5GcmFtZV9PcGVuSWZyYW1lV2luZG93KHdpbmRvdywgRGlhbG9nVXRpbGl0eS5EaWFsb2dJZCwgQmFzZVV0aWxpdHkuQnVpbGRWaWV3KHRoaXMuYWNJbnRlcmZhY2UuZWRpdEJ1aWxkVmlldywgZm9ybVBhcmEpLCB0aGlzLmdldEZvcm1EaWFsb2dQYXJhKFwi5LyB5Lia5rOV5Lq655m76K6wXCIpLCAxLCB0cnVlKTtcbiAgICAgIH0sXG4gICAgICBkZWxFbnRlcnByaXNlOiBmdW5jdGlvbiBkZWxFbnRlcnByaXNlKHBhcmEpIHtcbiAgICAgICAgdmFyIGVudElkID0gcGFyYS5yb3cuZW50SWQ7XG4gICAgICAgIERpYWxvZ1V0aWxpdHkuQ29uZmlybSh3aW5kb3csIFwi56Gu6K6k6KaB5Yig6Zmk5b2T5YmN5LyB5Lia5ZCX77yfXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBBamF4VXRpbGl0eS5EZWxldGUodGhpcy5hY0ludGVyZmFjZS5kZWxldGVFbnRlcnByaXNlLCB7XG4gICAgICAgICAgICByZWNvcmRJZDogZW50SWRcbiAgICAgICAgICB9LCBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgRGlhbG9nVXRpbGl0eS5BbGVydFRleHQocmVzdWx0Lm1lc3NhZ2UpO1xuICAgICAgICAgICAgICB0aGlzLmxvYWRFbnRlcnByaXNlRGF0YSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sIHRoaXMpO1xuICAgICAgICB9LCB0aGlzKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufSJdfQ==
