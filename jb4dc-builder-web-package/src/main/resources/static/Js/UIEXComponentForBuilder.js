"use strict";var EditTable_FieldName={Get_EditStatus_HtmlElem:function(e,t,l,a,n,i,u,r){var d="",f=t.BindName;if(null!=t.DefaultValue&&null!=t.DefaultValue)d=EditTableDefauleValue.GetValue(t);null!=r&&null!=r&&(d=r[f]),null!=i&&null!=i&&(d=i.html());var o=$("<input type='text' style='width: 98%' />");return o.val(d),o.attr("BindName",t.BindName),o.attr("Val",d),o.attr("IsSerialize","true"),o},Get_CompletedStatus_HtmlElem:function(e,t,l,a,n,i){var u=i.val().toUpperCase();return $("<label IsSerialize='true' BindName='"+t.BindName+"' Value='"+u+"'>"+u+"</label>")},ValidateToCompletedEnable:function(e,t,l,a,n,i){var u=i.val(),r=EditTableValidate.Validate(u,t);return r.Success&&n.find("[renderer=EditTable_FieldName]").each(function(){$(this).find("label").each(function(){var e=$(this);e.text()!=u&&e.text()!=u.toUpperCase()||(r={Success:!1,Msg:"[字段名称]不能重复!"})})}),r}},EditTable_SelectDefaultValue={Get_EditStatus_HtmlElem:function(e,t,l,a,n,i,u,r){var d="",f="",o="";null!=r&&null!=r&&(d=r.fieldDefaultType?r.fieldDefaultType:"",f=r.fieldDefaultValue?r.fieldDefaultValue:"",o=r.fieldDefaultText?r.fieldDefaultText:""),null!=i&&null!=i&&i.find("label").each(function(){"fieldDefaultType"==$(this).attr("BindName")?d=$(this).attr("Value"):"fieldDefaultText"==$(this).attr("BindName")?o=$(this).attr("Value"):"fieldDefaultValue"==$(this).attr("BindName")&&(f=$(this).attr("Value"))});var p=$("<div></div>"),T=$("<input type='text' style='width: 80%' readonly />");T.attr("fieldDefaultType",d),T.attr("fieldDefaultValue",f),T.attr("fieldDefaultText",o),T.val(DefaultValueUtility.formatText(d,o));var s=$("<input class='normalbutton-v1' style='margin-left: 4px;' type='button' value='...'/>");return p.append(T).append(s),window.$Temp$Inputtxt=T,s.click(function(){window.tableDesion?tableDesion.selectDefaultValueDialogBegin(EditTable_SelectDefaultValue,null):(window.parent.listDesign.selectDefaultValueDialogBegin(window,null),window._SelectBindObj={setSelectEnvVariableResultValue:function(e){EditTable_SelectDefaultValue.setSelectEnvVariableResultValue(e)}})}),p},Get_CompletedStatus_HtmlElem:function(e,t,l,a,n,i){var u=i.find("input[type='text']");if(0<u.length){var r=u.attr("fieldDefaultType"),d=u.attr("fieldDefaultValue"),f=u.attr("fieldDefaultText"),o=$("<div></div>");return o.append("<label>"+DefaultValueUtility.formatText(r,f)+"</label>"),o.append("<label IsSerialize='true' BindName='fieldDefaultType' Value='"+r+"' style='display:none'/>"),o.append("<label IsSerialize='true' BindName='fieldDefaultText' Value='"+f+"' style='display:none'/>"),o.append("<label IsSerialize='true' BindName='fieldDefaultValue' Value='"+d+"' style='display:none'/>"),o}return $("<label></label>")},ValidateToCompletedEnable:function(e,t,l,a,n,i){var u=i.val();return EditTableValidate.Validate(u,t)},setSelectEnvVariableResultValue:function(e){var t=window.$Temp$Inputtxt;null!=e?(t.attr("fieldDefaultType",e.Type),t.attr("fieldDefaultValue",e.Value),t.attr("fieldDefaultText",e.Text),t.val(DefaultValueUtility.formatText(e.Type,e.Text))):(t.attr("fieldDefaultType",""),t.attr("fieldDefaultValue",""),t.attr("fieldDefaultText",""),t.val(""))}},EditTable_SelectFieldTypeDataLoader={_fieldDataTypeArray:null,GetFieldDataTypeArray:function(){if(null==this._fieldDataTypeArray){var l=this;AjaxUtility.PostSync("/Rest/Builder/DataStorage/DataBase/Table/GetTableFieldType",{},function(e){if(1==e.success){var t=JsonUtility.StringToJson(e.data);null!=t&&null!=t&&(l._fieldDataTypeArray=t)}else DialogUtility.Alert(window,"AlertLoadingQueryError",{},"加载字段类型失败！",null)},this)}return this._fieldDataTypeArray},GetFieldDataTypeObjectByValue:function(e){for(var t=this.GetFieldDataTypeArray(),l=0;l<t.length;l++){var a=t[l];if(a.Value==e)return a}alert("找不到指定的数据类型，请确认是否支持该类型！")},GetFieldDataTypeObjectByText:function(e){for(var t=this.GetFieldDataTypeArray(),l=0;l<t.length;l++){var a=t[l];if(a.Text==e)return a}alert("找不到指定的数据类型，请确认是否支持该类型！")}},EditTable_SelectFieldType={Get_EditStatus_HtmlElem:function(e,t,l,a,n,i,u,r){var d="",f=$("<select />");null!=r&&null!=r&&(d=r.fieldDataType),null!=i&&null!=i&&(d=i.attr("Value"));for(var o=EditTable_SelectFieldTypeDataLoader.GetFieldDataTypeArray(),p=0;p<o.length;p++){var T=o[p].Value,s=o[p].Text;f.append("<option value='"+T+"'>"+s+"</option>")}return""!=d?f.val(d):f.val(EditTable_SelectFieldTypeDataLoader.GetFieldDataTypeObjectByText("字符串").Value),f.change(function(){var e=$(this).val();"整数"==e?($(l).next().find("input").attr("disabled",!0),$(l).next().find("input").val(0),$(l).next().next().find("input").attr("disabled",!0),$(l).next().next().find("input").val(0)):"小数"==e?($(l).next().find("input").attr("disabled",!1),$(l).next().find("input").val(10),$(l).next().next().find("input").attr("disabled",!1),$(l).next().next().find("input").val(2)):"日期时间"==e?($(l).next().find("input").attr("disabled",!0),$(l).next().find("input").val(20),$(l).next().next().find("input").attr("disabled",!0),$(l).next().next().find("input").val(0)):"字符串"==e?($(l).next().find("input").attr("disabled",!1),$(l).next().find("input").val(50),$(l).next().next().find("input").attr("disabled",!0),$(l).next().next().find("input").val(0)):"长字符串"==e&&($(l).next().find("input").attr("disabled",!0),$(l).next().find("input").val(0),$(l).next().next().find("input").attr("disabled",!0),$(l).next().next().find("input").val(0))}),f},Get_CompletedStatus_HtmlElem:function(e,t,l,a,n,i){var u=i.val(),r=EditTable_SelectFieldTypeDataLoader.GetFieldDataTypeObjectByValue(u).Text;return $("<label IsSerialize='true' BindName='"+t.BindName+"' Value='"+u+"'>"+r+"</label>")},ValidateToCompletedEnable:function(e,t,l,a,n,i){var u=i.val();return EditTableValidate.Validate(u,t)}},Column_RTTableIsMain={Get_EditStatus_HtmlElem:function(e,t,l,a,n,i,u,r){var d=[{Value:"是",Text:"是"},{Value:"否",Text:"否"}],f="",o=t.BindName;if(null!=t.DefaultValue&&null!=t.DefaultValue)f=EditTableDefauleValue.GetValue(t);null!=r&&null!=r&&(f=r[o]),null!=i&&null!=i&&(f=i.attr("Value"));for(var p=$("<select style='width: 100%' />"),T=0;T<d.length;T++){var s=d[T];p.append("<option value='"+s.Value+"' text='"+s.Text+"'>"+s.Text+"</option>")}return p.val(f),"function"==typeof t.ChangeEvent&&p.change(function(){t.ChangeEvent(this,e,t,l,a,n,i)}),p},Get_CompletedStatus_HtmlElem:function(e,t,l,a,n,i){var u=i.find("option:selected").attr("Value"),r=i.find("option:selected").attr("Text");return u||(u=""),r||(r=""),$("<label IsSerialize='true' BindName='"+t.BindName+"' Value='"+u+"' Text='"+r+"'>"+r+"</label>")},ValidateToCompletedEnable:function(e,t,l,a,n,i){var u=i.val();return EditTableValidate.Validate(u,t)}},Column_SelectDefaultValue={Get_EditStatus_HtmlElem:function(e,t,l,a,n,i,u,r){var d="",f="",o="";null!=r&&null!=r&&(d=r.columnDefaultType?r.columnDefaultType:"",f=r.columnDefaultValue?r.columnDefaultValue:"",o=r.columnDefaultText?r.columnDefaultText:""),null!=i&&null!=i&&i.find("label").each(function(){"columnDefaultType"==$(this).attr("BindName")?d=$(this).attr("Value"):"columnDefaultText"==$(this).attr("BindName")?o=$(this).attr("Value"):"columnDefaultValue"==$(this).attr("BindName")&&(f=$(this).attr("Value"))});var p=$("<div></div>"),T=$("<input type='text' style='width: 82%' readonly />");T.attr("columnDefaultType",d),T.attr("columnDefaultValue",f),T.attr("columnDefaultText",o),T.val(DefaultValueUtility.formatText(d,o));var s=$("<input class='normalbutton-v1' style='margin-left: 4px;' type='button' value='...'/>");return p.append(T).append(s),window.$Temp$Inputtxt=T,s.click(function(){JBuild4DSelectView.SelectEnvVariable.beginSelect("Column_SelectDefaultValue")}),p},Get_CompletedStatus_HtmlElem:function(e,t,l,a,n,i){var u=i.find("input[type='text']");if(0<u.length){var r=u.attr("columnDefaultType"),d=u.attr("columnDefaultValue"),f=u.attr("columnDefaultText"),o=$("<div></div>");return o.append("<label>"+DefaultValueUtility.formatText(r,f)+"</label>"),o.append("<label IsSerialize='true' BindName='columnDefaultType' Value='"+r+"' style='display:none'/>"),o.append("<label IsSerialize='true' BindName='columnDefaultText' Value='"+f+"' style='display:none'/>"),o.append("<label IsSerialize='true' BindName='columnDefaultValue' Value='"+d+"' style='display:none'/>"),o}return $("<label></label>")},ValidateToCompletedEnable:function(e,t,l,a,n,i){var u=i.val();return EditTableValidate.Validate(u,t)},setSelectEnvVariableResultValue:function(e){var t=window.$Temp$Inputtxt;null!=e?(t.attr("columnDefaultType",e.Type),t.attr("columnDefaultValue",e.Value),t.attr("columnDefaultText",e.Text),t.val(DefaultValueUtility.formatText(e.Type,e.Text))):(t.attr("columnDefaultType",""),t.attr("columnDefaultValue",""),t.attr("columnDefaultText",""),t.val(""))}},Column_SelectFieldTypeDataLoader={_fieldDataTypeArray:null,GetFieldDataTypeArray:function(){if(null==this._fieldDataTypeArray){var l=this;AjaxUtility.PostSync("/Rest/Builder/DataStorage/DataBase/Table/GetTableFieldType",{},function(e){if(1==e.success){var t=JsonUtility.StringToJson(e.data);null!=t&&null!=t&&(l._fieldDataTypeArray=t)}else DialogUtility.Alert(window,"AlertLoadingQueryError",{},"加载字段类型失败！",null)},this)}return this._fieldDataTypeArray},GetFieldDataTypeObjectByValue:function(e){for(var t=this.GetFieldDataTypeArray(),l=0;l<t.length;l++){var a=t[l];if(a.Value==e)return a}alert("找不到指定的数据类型，请确认是否支持该类型！")},GetFieldDataTypeObjectByText:function(e){for(var t=this.GetFieldDataTypeArray(),l=0;l<t.length;l++){var a=t[l];if(a.Text==e)return a}alert("找不到指定的数据类型，请确认是否支持该类型！")}},Column_SelectFieldType={Get_EditStatus_HtmlElem:function(e,t,l,a,n,i,u,r){var d="",f=$("<select />");null!=r&&null!=r&&(d=r.columnDataTypeName),null!=i&&null!=i&&(d=i.attr("Value"));for(var o=Column_SelectFieldTypeDataLoader.GetFieldDataTypeArray(),p=0;p<o.length;p++){var T=o[p].Value,s=o[p].Text;f.append("<option value='"+T+"'>"+s+"</option>")}return""!=d?f.val(d):f.val(Column_SelectFieldTypeDataLoader.GetFieldDataTypeObjectByText("字符串").Value),f},Get_CompletedStatus_HtmlElem:function(e,t,l,a,n,i){var u=i.val(),r=Column_SelectFieldTypeDataLoader.GetFieldDataTypeObjectByValue(u).Text;return $("<label IsSerialize='true' BindName='"+t.BindName+"' Value='"+u+"'>"+r+"</label>")},ValidateToCompletedEnable:function(e,t,l,a,n,i){var u=i.val();return EditTableValidate.Validate(u,t)}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlJlbmRlcmVycy9UYWJsZURlc2lnbi9FZGl0VGFibGVfRmllbGROYW1lLmpzIiwiUmVuZGVyZXJzL1RhYmxlRGVzaWduL0VkaXRUYWJsZV9TZWxlY3REZWZhdWx0VmFsdWUuanMiLCJSZW5kZXJlcnMvVGFibGVEZXNpZ24vRWRpdFRhYmxlX1NlbGVjdEZpZWxkVHlwZS5qcyIsIlJlbmRlcmVycy9EYXRhU2V0L0NvbHVtbl9SVFRhYmxlSXNNYWluLmpzIiwiUmVuZGVyZXJzL0RhdGFTZXQvQ29sdW1uX1NlbGVjdERlZmF1bHRWYWx1ZS5qcyIsIlJlbmRlcmVycy9EYXRhU2V0L0NvbHVtbl9TZWxlY3RGaWVsZFR5cGUuanMiXSwibmFtZXMiOlsiRWRpdFRhYmxlX0ZpZWxkTmFtZSIsIkdldF9FZGl0U3RhdHVzX0h0bWxFbGVtIiwiX2NvbmZpZyIsInRlbXBsYXRlIiwiaG9zdENlbGwiLCJob3N0Um93IiwiaG9zdFRhYmxlIiwidmlld1N0YXVzSHRtbEVsZW0iLCJqc29uRGF0YXMiLCJqc29uRGF0YVNpbmdsZSIsInZhbCIsImJpbmRuYW1lIiwiQmluZE5hbWUiLCJ1bmRlZmluZWQiLCJEZWZhdWx0VmFsdWUiLCJFZGl0VGFibGVEZWZhdWxlVmFsdWUiLCJHZXRWYWx1ZSIsImh0bWwiLCIkZWxlbSIsIiQiLCJhdHRyIiwiR2V0X0NvbXBsZXRlZFN0YXR1c19IdG1sRWxlbSIsImVkaXRTdGF1c0h0bWxFbGVtIiwidG9VcHBlckNhc2UiLCJWYWxpZGF0ZVRvQ29tcGxldGVkRW5hYmxlIiwicmVzdWx0IiwiRWRpdFRhYmxlVmFsaWRhdGUiLCJWYWxpZGF0ZSIsIlN1Y2Nlc3MiLCJmaW5kIiwiZWFjaCIsInRoaXMiLCJsYWJlbGl0ZW0iLCJ0ZXh0IiwiTXNnIiwiRWRpdFRhYmxlX1NlbGVjdERlZmF1bHRWYWx1ZSIsImZpZWxkRGVmYXVsdFR5cGUiLCJmaWVsZERlZmF1bHRWYWx1ZSIsImZpZWxkRGVmYXVsdFRleHQiLCIkaW5wdXRUeHQiLCJEZWZhdWx0VmFsdWVVdGlsaXR5IiwiZm9ybWF0VGV4dCIsIiRpbnB1dEJ0biIsImFwcGVuZCIsIndpbmRvdyIsIiRUZW1wJElucHV0dHh0IiwiY2xpY2siLCJ0YWJsZURlc2lvbiIsInNlbGVjdERlZmF1bHRWYWx1ZURpYWxvZ0JlZ2luIiwicGFyZW50IiwibGlzdERlc2lnbiIsIl9TZWxlY3RCaW5kT2JqIiwic2V0U2VsZWN0RW52VmFyaWFibGVSZXN1bHRWYWx1ZSIsImxlbmd0aCIsImRlZmF1bHRUeXBlIiwiZGVmYXVsdFZhbHVlIiwiZGVmYXVsdFRleHQiLCJkZWZhdWx0RGF0YSIsIlR5cGUiLCJWYWx1ZSIsIlRleHQiLCJFZGl0VGFibGVfU2VsZWN0RmllbGRUeXBlRGF0YUxvYWRlciIsIl9maWVsZERhdGFUeXBlQXJyYXkiLCJHZXRGaWVsZERhdGFUeXBlQXJyYXkiLCJfc2VsZiIsIkFqYXhVdGlsaXR5IiwiUG9zdFN5bmMiLCJkYXRhIiwic3VjY2VzcyIsImxpc3QiLCJKc29uVXRpbGl0eSIsIlN0cmluZ1RvSnNvbiIsIkRpYWxvZ1V0aWxpdHkiLCJBbGVydCIsIkdldEZpZWxkRGF0YVR5cGVPYmplY3RCeVZhbHVlIiwiYXJyYXlEYXRhIiwiaSIsIm9iaiIsImFsZXJ0IiwiR2V0RmllbGREYXRhVHlwZU9iamVjdEJ5VGV4dCIsIkVkaXRUYWJsZV9TZWxlY3RGaWVsZFR5cGUiLCJ2YWx1ZSIsImNoYW5nZSIsIm5leHQiLCJDb2x1bW5fUlRUYWJsZUlzTWFpbiIsImNvbmZpZ1NvdXJjZSIsIml0ZW0iLCJDaGFuZ2VFdmVudCIsIkNvbHVtbl9TZWxlY3REZWZhdWx0VmFsdWUiLCJKQnVpbGQ0RFNlbGVjdFZpZXciLCJTZWxlY3RFbnZWYXJpYWJsZSIsImJlZ2luU2VsZWN0IiwiQ29sdW1uX1NlbGVjdEZpZWxkVHlwZURhdGFMb2FkZXIiLCJDb2x1bW5fU2VsZWN0RmllbGRUeXBlIl0sIm1hcHBpbmdzIjoiQUFBQSxhQUVBLElBQUFBLG9CQUFBLENBQ0FDLHdCQUFBLFNBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFD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QUFmLEdBQUErRSxPQUFBdEQsS0FBQSxTQUFBbkIsSUFBQSxHQUNBUyxFQUFBZixHQUFBK0UsT0FBQUEsT0FBQXRELEtBQUEsU0FBQVQsS0FBQSxZQUFBLEdBQ0FELEVBQUFmLEdBQUErRSxPQUFBQSxPQUFBdEQsS0FBQSxTQUFBbkIsSUFBQSxJQUNBLE1BQUFBLEdBQ0FTLEVBQUFmLEdBQUErRSxPQUFBdEQsS0FBQSxTQUFBVCxLQUFBLFlBQUEsR0FDQUQsRUFBQWYsR0FBQStFLE9BQUF0RCxLQUFBLFNBQUFuQixJQUFBLElBQ0FTLEVBQUFmLEdBQUErRSxPQUFBQSxPQUFBdEQsS0FBQSxTQUFBVCxLQUFBLFlBQUEsR0FDQUQsRUFBQWYsR0FBQStFLE9BQUFBLE9BQUF0RCxLQUFBLFNBQUFuQixJQUFBLElBQ0EsUUFBQUEsR0FDQVMsRUFBQWYsR0FBQStFLE9BQUF0RCxLQUFBLFNBQUFULEtBQUEsWUFBQSxHQUNBRCxFQUFBZixHQUFBK0UsT0FBQXRELEtBQUEsU0FBQW5CLElBQUEsSUFDQVMsRUFBQWYsR0FBQStFLE9BQUFBLE9BQUF0RCxLQUFBLFNBQUFULEtBQUEsWUFBQSxHQUNBRCxFQUFBZixHQUFBK0UsT0FBQUEsT0FBQXRELEtBQUEsU0FBQW5CLElBQUEsSUFDQSxPQUFBQSxHQUNBUyxFQUFBZixHQUFBK0UsT0FBQXRELEtBQUEsU0FBQVQsS0FBQSxZQUFBLEdBQ0FELEVBQUFmLEdBQUErRSxPQUFBdEQsS0FBQSxTQUFBbkIsSUFBQSxJQUNBUyxFQUFBZixHQUFBK0UsT0FBQUEsT0FBQXRELEtBQUEsU0FBQVQsS0FBQSxZQUFBLEdBQ0FELEVBQUFmLEdBQUErRSxPQUFBQSxPQUFBdEQsS0FBQSxTQUFBbkIsSUFBQSxJQUNBLFFBQUFBLElBQ0FTLEVBQUFmLEdBQUErRSxPQUFBdEQsS0FBQSxTQUFBVCxLQUFBLFlBQUEsR0FDQUQsRUFBQWYsR0FBQStFLE9BQUF0RCxLQUFBLFNBQUFuQixJQUFBLEdBQ0FTLEVBQUFmLEdBQUErRSxPQUFBQSxPQUFBdEQsS0FBQSxTQUFBVCxLQUFBLFlBQUEs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QUNBQyxFQUFBRCxFQUFBLG9CQUdBLE1BQUFGLEdBQUFNLE1BQUFOLElBQ0FHLEVBQUFILEVBQUFhLEtBQUEsVUFLQSxJQUZBLElBQUEwQyxFQUFBOEIsaUNBQUE3Qix3QkFFQWEsRUFBQSxFQUFBQSxFQUFBZCxFQUFBVCxPQUFBdUIsSUFBQSxDQUNBLElBQUFLLEVBQUFuQixFQUFBYyxHQUFBakIsTUFDQTFCLEVBQUE2QixFQUFBYyxHQUFBaEIsS0FDQTFDLEVBQUF5QixPQUFBLGtCQUFBc0MsRUFBQSxLQUFBaEQsRUFBQSxhQVNBLE1BTkEsSUFBQXZCLEVBQ0FRLEVBQUFSLElBQUFBLEdBRUFRLEVBQUFSLElBQUFrRixpQ0FBQWIsNkJBQUEsT0FBQXBCLE9BR0F6QyxHQUVBRyw2QkFBQSxTQUFBbkIsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQWdCLEdBQ0EsSUFBQTJELEVBQUEzRCxFQUFBWixNQUNBdUIsRUFBQTJELGlDQUFBbEIsOEJBQUFPLEdBQUFyQixLQUVBLE9BREF6QyxFQUFBLHVDQUFBaEIsRUFBQVMsU0FBQSxZQUFBcUUsRUFBQSxLQUFBaEQsRUFBQSxhQUdBVCwwQkFBQSxTQUFBdEIsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQWdCLEdBQ0EsSUFBQVosRUFBQVksRUFBQVosTUFDQSxPQUFBZ0Isa0JBQUFDLFNBQUFqQixFQUFBUCIsImZpbGUiOiJVSUVYQ29tcG9uZW50Rm9yQnVpbGRlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG52YXIgRWRpdFRhYmxlX0ZpZWxkTmFtZSA9IHtcbiAgR2V0X0VkaXRTdGF0dXNfSHRtbEVsZW06IGZ1bmN0aW9uIEdldF9FZGl0U3RhdHVzX0h0bWxFbGVtKF9jb25maWcsIHRlbXBsYXRlLCBob3N0Q2VsbCwgaG9zdFJvdywgaG9zdFRhYmxlLCB2aWV3U3RhdXNIdG1sRWxlbSwganNvbkRhdGFzLCBqc29uRGF0YVNpbmdsZSkge1xuICAgIHZhciB2YWwgPSBcIlwiO1xuICAgIHZhciBiaW5kbmFtZSA9IHRlbXBsYXRlLkJpbmROYW1lO1xuXG4gICAgaWYgKHRlbXBsYXRlLkRlZmF1bHRWYWx1ZSAhPSB1bmRlZmluZWQgJiYgdGVtcGxhdGUuRGVmYXVsdFZhbHVlICE9IG51bGwpIHtcbiAgICAgIHZhciB2YWwgPSBFZGl0VGFibGVEZWZhdWxlVmFsdWUuR2V0VmFsdWUodGVtcGxhdGUpO1xuICAgIH1cblxuICAgIGlmIChqc29uRGF0YVNpbmdsZSAhPSBudWxsICYmIGpzb25EYXRhU2luZ2xlICE9IHVuZGVmaW5lZCkge1xuICAgICAgdmFsID0ganNvbkRhdGFTaW5nbGVbYmluZG5hbWVdO1xuICAgIH1cblxuICAgIGlmICh2aWV3U3RhdXNIdG1sRWxlbSAhPSBudWxsICYmIHZpZXdTdGF1c0h0bWxFbGVtICE9IHVuZGVmaW5lZCkge1xuICAgICAgdmFsID0gdmlld1N0YXVzSHRtbEVsZW0uaHRtbCgpO1xuICAgIH1cblxuICAgIHZhciAkZWxlbSA9ICQoXCI8aW5wdXQgdHlwZT0ndGV4dCcgc3R5bGU9J3dpZHRoOiA5OCUnIC8+XCIpO1xuICAgICRlbGVtLnZhbCh2YWwpO1xuICAgICRlbGVtLmF0dHIoXCJCaW5kTmFtZVwiLCB0ZW1wbGF0ZS5CaW5kTmFtZSk7XG4gICAgJGVsZW0uYXR0cihcIlZhbFwiLCB2YWwpO1xuICAgICRlbGVtLmF0dHIoXCJJc1NlcmlhbGl6ZVwiLCBcInRydWVcIik7XG4gICAgcmV0dXJuICRlbGVtO1xuICB9LFxuICBHZXRfQ29tcGxldGVkU3RhdHVzX0h0bWxFbGVtOiBmdW5jdGlvbiBHZXRfQ29tcGxldGVkU3RhdHVzX0h0bWxFbGVtKF9jb25maWcsIHRlbXBsYXRlLCBob3N0Q2VsbCwgaG9zdFJvdywgaG9zdFRhYmxlLCBlZGl0U3RhdXNIdG1sRWxlbSkge1xuICAgIHZhciB2YWwgPSBlZGl0U3RhdXNIdG1sRWxlbS52YWwoKS50b1VwcGVyQ2FzZSgpO1xuICAgIHZhciAkZWxlbSA9ICQoXCI8bGFiZWwgSXNTZXJpYWxpemU9J3RydWUnIEJpbmROYW1lPSdcIiArIHRlbXBsYXRlLkJpbmROYW1lICsgXCInIFZhbHVlPSdcIiArIHZhbCArIFwiJz5cIiArIHZhbCArIFwiPC9sYWJlbD5cIik7XG4gICAgcmV0dXJuICRlbGVtO1xuICB9LFxuICBWYWxpZGF0ZVRvQ29tcGxldGVkRW5hYmxlOiBmdW5jdGlvbiBWYWxpZGF0ZVRvQ29tcGxldGVkRW5hYmxlKF9jb25maWcsIHRlbXBsYXRlLCBob3N0Q2VsbCwgaG9zdFJvdywgaG9zdFRhYmxlLCBlZGl0U3RhdXNIdG1sRWxlbSkge1xuICAgIHZhciB2YWwgPSBlZGl0U3RhdXNIdG1sRWxlbS52YWwoKTtcbiAgICB2YXIgcmVzdWx0ID0gRWRpdFRhYmxlVmFsaWRhdGUuVmFsaWRhdGUodmFsLCB0ZW1wbGF0ZSk7XG5cbiAgICBpZiAocmVzdWx0LlN1Y2Nlc3MpIHtcbiAgICAgIGhvc3RUYWJsZS5maW5kKFwiW3JlbmRlcmVyPUVkaXRUYWJsZV9GaWVsZE5hbWVdXCIpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgc2VyaXRlbSA9ICQodGhpcyk7XG4gICAgICAgIHNlcml0ZW0uZmluZChcImxhYmVsXCIpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhciBsYWJlbGl0ZW0gPSAkKHRoaXMpO1xuXG4gICAgICAgICAgaWYgKGxhYmVsaXRlbS50ZXh0KCkgPT0gdmFsIHx8IGxhYmVsaXRlbS50ZXh0KCkgPT0gdmFsLnRvVXBwZXJDYXNlKCkpIHtcbiAgICAgICAgICAgIHJlc3VsdCA9IHtcbiAgICAgICAgICAgICAgU3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgIE1zZzogXCJb5a2X5q615ZCN56ewXeS4jeiDvemHjeWkjSFcIlxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxufTsiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIEVkaXRUYWJsZV9TZWxlY3REZWZhdWx0VmFsdWUgPSB7XG4gIEdldF9FZGl0U3RhdHVzX0h0bWxFbGVtOiBmdW5jdGlvbiBHZXRfRWRpdFN0YXR1c19IdG1sRWxlbShfY29uZmlnLCB0ZW1wbGF0ZSwgaG9zdENlbGwsIGhvc3RSb3csIGhvc3RUYWJsZSwgdmlld1N0YXVzSHRtbEVsZW0sIGpzb25EYXRhcywganNvbkRhdGFTaW5nbGUpIHtcbiAgICB2YXIgZmllbGREZWZhdWx0VHlwZSA9IFwiXCI7XG4gICAgdmFyIGZpZWxkRGVmYXVsdFZhbHVlID0gXCJcIjtcbiAgICB2YXIgZmllbGREZWZhdWx0VGV4dCA9IFwiXCI7XG5cbiAgICBpZiAoanNvbkRhdGFTaW5nbGUgIT0gbnVsbCAmJiBqc29uRGF0YVNpbmdsZSAhPSB1bmRlZmluZWQpIHtcbiAgICAgIGZpZWxkRGVmYXVsdFR5cGUgPSBqc29uRGF0YVNpbmdsZVtcImZpZWxkRGVmYXVsdFR5cGVcIl0gPyBqc29uRGF0YVNpbmdsZVtcImZpZWxkRGVmYXVsdFR5cGVcIl0gOiBcIlwiO1xuICAgICAgZmllbGREZWZhdWx0VmFsdWUgPSBqc29uRGF0YVNpbmdsZVtcImZpZWxkRGVmYXVsdFZhbHVlXCJdID8ganNvbkRhdGFTaW5nbGVbXCJmaWVsZERlZmF1bHRWYWx1ZVwiXSA6IFwiXCI7XG4gICAgICBmaWVsZERlZmF1bHRUZXh0ID0ganNvbkRhdGFTaW5nbGVbXCJmaWVsZERlZmF1bHRUZXh0XCJdID8ganNvbkRhdGFTaW5nbGVbXCJmaWVsZERlZmF1bHRUZXh0XCJdIDogXCJcIjtcbiAgICB9XG5cbiAgICBpZiAodmlld1N0YXVzSHRtbEVsZW0gIT0gbnVsbCAmJiB2aWV3U3RhdXNIdG1sRWxlbSAhPSB1bmRlZmluZWQpIHtcbiAgICAgIHZpZXdTdGF1c0h0bWxFbGVtLmZpbmQoXCJsYWJlbFwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKCQodGhpcykuYXR0cihcIkJpbmROYW1lXCIpID09IFwiZmllbGREZWZhdWx0VHlwZVwiKSB7XG4gICAgICAgICAgZmllbGREZWZhdWx0VHlwZSA9ICQodGhpcykuYXR0cihcIlZhbHVlXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKCQodGhpcykuYXR0cihcIkJpbmROYW1lXCIpID09IFwiZmllbGREZWZhdWx0VGV4dFwiKSB7XG4gICAgICAgICAgZmllbGREZWZhdWx0VGV4dCA9ICQodGhpcykuYXR0cihcIlZhbHVlXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKCQodGhpcykuYXR0cihcIkJpbmROYW1lXCIpID09IFwiZmllbGREZWZhdWx0VmFsdWVcIikge1xuICAgICAgICAgIGZpZWxkRGVmYXVsdFZhbHVlID0gJCh0aGlzKS5hdHRyKFwiVmFsdWVcIik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHZhciAkZWxlbSA9ICQoXCI8ZGl2PjwvZGl2PlwiKTtcbiAgICB2YXIgJGlucHV0VHh0ID0gJChcIjxpbnB1dCB0eXBlPSd0ZXh0JyBzdHlsZT0nd2lkdGg6IDgwJScgcmVhZG9ubHkgLz5cIik7XG4gICAgJGlucHV0VHh0LmF0dHIoXCJmaWVsZERlZmF1bHRUeXBlXCIsIGZpZWxkRGVmYXVsdFR5cGUpO1xuICAgICRpbnB1dFR4dC5hdHRyKFwiZmllbGREZWZhdWx0VmFsdWVcIiwgZmllbGREZWZhdWx0VmFsdWUpO1xuICAgICRpbnB1dFR4dC5hdHRyKFwiZmllbGREZWZhdWx0VGV4dFwiLCBmaWVsZERlZmF1bHRUZXh0KTtcbiAgICAkaW5wdXRUeHQudmFsKERlZmF1bHRWYWx1ZVV0aWxpdHkuZm9ybWF0VGV4dChmaWVsZERlZmF1bHRUeXBlLCBmaWVsZERlZmF1bHRUZXh0KSk7XG4gICAgdmFyICRpbnB1dEJ0biA9ICQoXCI8aW5wdXQgY2xhc3M9J25vcm1hbGJ1dHRvbi12MScgc3R5bGU9J21hcmdpbi1sZWZ0OiA0cHg7JyB0eXBlPSdidXR0b24nIHZhbHVlPScuLi4nLz5cIik7XG4gICAgJGVsZW0uYXBwZW5kKCRpbnB1dFR4dCkuYXBwZW5kKCRpbnB1dEJ0bik7XG4gICAgd2luZG93LiRUZW1wJElucHV0dHh0ID0gJGlucHV0VHh0O1xuICAgICRpbnB1dEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAod2luZG93LnRhYmxlRGVzaW9uKSB7XG4gICAgICAgIHRhYmxlRGVzaW9uLnNlbGVjdERlZmF1bHRWYWx1ZURpYWxvZ0JlZ2luKEVkaXRUYWJsZV9TZWxlY3REZWZhdWx0VmFsdWUsIG51bGwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2luZG93LnBhcmVudC5saXN0RGVzaWduLnNlbGVjdERlZmF1bHRWYWx1ZURpYWxvZ0JlZ2luKHdpbmRvdywgbnVsbCk7XG4gICAgICAgIHdpbmRvdy5fU2VsZWN0QmluZE9iaiA9IHtcbiAgICAgICAgICBzZXRTZWxlY3RFbnZWYXJpYWJsZVJlc3VsdFZhbHVlOiBmdW5jdGlvbiBzZXRTZWxlY3RFbnZWYXJpYWJsZVJlc3VsdFZhbHVlKHJlc3VsdCkge1xuICAgICAgICAgICAgRWRpdFRhYmxlX1NlbGVjdERlZmF1bHRWYWx1ZS5zZXRTZWxlY3RFbnZWYXJpYWJsZVJlc3VsdFZhbHVlKHJlc3VsdCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiAkZWxlbTtcbiAgfSxcbiAgR2V0X0NvbXBsZXRlZFN0YXR1c19IdG1sRWxlbTogZnVuY3Rpb24gR2V0X0NvbXBsZXRlZFN0YXR1c19IdG1sRWxlbShfY29uZmlnLCB0ZW1wbGF0ZSwgaG9zdENlbGwsIGhvc3RSb3csIGhvc3RUYWJsZSwgZWRpdFN0YXVzSHRtbEVsZW0pIHtcbiAgICB2YXIgJGlucHV0VHh0ID0gZWRpdFN0YXVzSHRtbEVsZW0uZmluZChcImlucHV0W3R5cGU9J3RleHQnXVwiKTtcblxuICAgIGlmICgkaW5wdXRUeHQubGVuZ3RoID4gMCkge1xuICAgICAgdmFyIGRlZmF1bHRUeXBlID0gJGlucHV0VHh0LmF0dHIoXCJmaWVsZERlZmF1bHRUeXBlXCIpO1xuICAgICAgdmFyIGRlZmF1bHRWYWx1ZSA9ICRpbnB1dFR4dC5hdHRyKFwiZmllbGREZWZhdWx0VmFsdWVcIik7XG4gICAgICB2YXIgZGVmYXVsdFRleHQgPSAkaW5wdXRUeHQuYXR0cihcImZpZWxkRGVmYXVsdFRleHRcIik7XG4gICAgICB2YXIgJGVsZW0gPSAkKFwiPGRpdj48L2Rpdj5cIik7XG4gICAgICAkZWxlbS5hcHBlbmQoXCI8bGFiZWw+XCIgKyBEZWZhdWx0VmFsdWVVdGlsaXR5LmZvcm1hdFRleHQoZGVmYXVsdFR5cGUsIGRlZmF1bHRUZXh0KSArIFwiPC9sYWJlbD5cIik7XG4gICAgICAkZWxlbS5hcHBlbmQoXCI8bGFiZWwgSXNTZXJpYWxpemU9J3RydWUnIEJpbmROYW1lPSdmaWVsZERlZmF1bHRUeXBlJyBWYWx1ZT0nXCIgKyBkZWZhdWx0VHlwZSArIFwiJyBzdHlsZT0nZGlzcGxheTpub25lJy8+XCIpO1xuICAgICAgJGVsZW0uYXBwZW5kKFwiPGxhYmVsIElzU2VyaWFsaXplPSd0cnVlJyBCaW5kTmFtZT0nZmllbGREZWZhdWx0VGV4dCcgVmFsdWU9J1wiICsgZGVmYXVsdFRleHQgKyBcIicgc3R5bGU9J2Rpc3BsYXk6bm9uZScvPlwiKTtcbiAgICAgICRlbGVtLmFwcGVuZChcIjxsYWJlbCBJc1NlcmlhbGl6ZT0ndHJ1ZScgQmluZE5hbWU9J2ZpZWxkRGVmYXVsdFZhbHVlJyBWYWx1ZT0nXCIgKyBkZWZhdWx0VmFsdWUgKyBcIicgc3R5bGU9J2Rpc3BsYXk6bm9uZScvPlwiKTtcbiAgICAgIHJldHVybiAkZWxlbTtcbiAgICB9XG5cbiAgICByZXR1cm4gJChcIjxsYWJlbD48L2xhYmVsPlwiKTtcbiAgfSxcbiAgVmFsaWRhdGVUb0NvbXBsZXRlZEVuYWJsZTogZnVuY3Rpb24gVmFsaWRhdGVUb0NvbXBsZXRlZEVuYWJsZShfY29uZmlnLCB0ZW1wbGF0ZSwgaG9zdENlbGwsIGhvc3RSb3csIGhvc3RUYWJsZSwgZWRpdFN0YXVzSHRtbEVsZW0pIHtcbiAgICB2YXIgdmFsID0gZWRpdFN0YXVzSHRtbEVsZW0udmFsKCk7XG4gICAgcmV0dXJuIEVkaXRUYWJsZVZhbGlkYXRlLlZhbGlkYXRlKHZhbCwgdGVtcGxhdGUpO1xuICB9LFxuICBzZXRTZWxlY3RFbnZWYXJpYWJsZVJlc3VsdFZhbHVlOiBmdW5jdGlvbiBzZXRTZWxlY3RFbnZWYXJpYWJsZVJlc3VsdFZhbHVlKGRlZmF1bHREYXRhKSB7XG4gICAgdmFyICRpbnB1dFR4dCA9IHdpbmRvdy4kVGVtcCRJbnB1dHR4dDtcblxuICAgIGlmIChudWxsICE9IGRlZmF1bHREYXRhKSB7XG4gICAgICAkaW5wdXRUeHQuYXR0cihcImZpZWxkRGVmYXVsdFR5cGVcIiwgZGVmYXVsdERhdGEuVHlwZSk7XG4gICAgICAkaW5wdXRUeHQuYXR0cihcImZpZWxkRGVmYXVsdFZhbHVlXCIsIGRlZmF1bHREYXRhLlZhbHVlKTtcbiAgICAgICRpbnB1dFR4dC5hdHRyKFwiZmllbGREZWZhdWx0VGV4dFwiLCBkZWZhdWx0RGF0YS5UZXh0KTtcbiAgICAgICRpbnB1dFR4dC52YWwoRGVmYXVsdFZhbHVlVXRpbGl0eS5mb3JtYXRUZXh0KGRlZmF1bHREYXRhLlR5cGUsIGRlZmF1bHREYXRhLlRleHQpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGlucHV0VHh0LmF0dHIoXCJmaWVsZERlZmF1bHRUeXBlXCIsIFwiXCIpO1xuICAgICAgJGlucHV0VHh0LmF0dHIoXCJmaWVsZERlZmF1bHRWYWx1ZVwiLCBcIlwiKTtcbiAgICAgICRpbnB1dFR4dC5hdHRyKFwiZmllbGREZWZhdWx0VGV4dFwiLCBcIlwiKTtcbiAgICAgICRpbnB1dFR4dC52YWwoXCJcIik7XG4gICAgfVxuICB9XG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgRWRpdFRhYmxlX1NlbGVjdEZpZWxkVHlwZURhdGFMb2FkZXIgPSB7XG4gIF9maWVsZERhdGFUeXBlQXJyYXk6IG51bGwsXG4gIEdldEZpZWxkRGF0YVR5cGVBcnJheTogZnVuY3Rpb24gR2V0RmllbGREYXRhVHlwZUFycmF5KCkge1xuICAgIGlmICh0aGlzLl9maWVsZERhdGFUeXBlQXJyYXkgPT0gbnVsbCkge1xuICAgICAgdmFyIF9zZWxmID0gdGhpcztcblxuICAgICAgQWpheFV0aWxpdHkuUG9zdFN5bmMoXCIvUmVzdC9CdWlsZGVyL0RhdGFTdG9yYWdlL0RhdGFCYXNlL1RhYmxlL0dldFRhYmxlRmllbGRUeXBlXCIsIHt9LCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICBpZiAoZGF0YS5zdWNjZXNzID09IHRydWUpIHtcbiAgICAgICAgICB2YXIgbGlzdCA9IEpzb25VdGlsaXR5LlN0cmluZ1RvSnNvbihkYXRhLmRhdGEpO1xuXG4gICAgICAgICAgaWYgKGxpc3QgIT0gbnVsbCAmJiBsaXN0ICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgX3NlbGYuX2ZpZWxkRGF0YVR5cGVBcnJheSA9IGxpc3Q7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIERpYWxvZ1V0aWxpdHkuQWxlcnQod2luZG93LCBcIkFsZXJ0TG9hZGluZ1F1ZXJ5RXJyb3JcIiwge30sIFwi5Yqg6L295a2X5q6157G75Z6L5aSx6LSl77yBXCIsIG51bGwpO1xuICAgICAgICB9XG4gICAgICB9LCB0aGlzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fZmllbGREYXRhVHlwZUFycmF5O1xuICB9LFxuICBHZXRGaWVsZERhdGFUeXBlT2JqZWN0QnlWYWx1ZTogZnVuY3Rpb24gR2V0RmllbGREYXRhVHlwZU9iamVjdEJ5VmFsdWUoVmFsdWUpIHtcbiAgICB2YXIgYXJyYXlEYXRhID0gdGhpcy5HZXRGaWVsZERhdGFUeXBlQXJyYXkoKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXlEYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgb2JqID0gYXJyYXlEYXRhW2ldO1xuXG4gICAgICBpZiAob2JqLlZhbHVlID09IFZhbHVlKSB7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgICB9XG4gICAgfVxuXG4gICAgYWxlcnQoXCLmib7kuI3liLDmjIflrprnmoTmlbDmja7nsbvlnovvvIzor7fnoa7orqTmmK/lkKbmlK/mjIHor6XnsbvlnovvvIFcIik7XG4gIH0sXG4gIEdldEZpZWxkRGF0YVR5cGVPYmplY3RCeVRleHQ6IGZ1bmN0aW9uIEdldEZpZWxkRGF0YVR5cGVPYmplY3RCeVRleHQodGV4dCkge1xuICAgIHZhciBhcnJheURhdGEgPSB0aGlzLkdldEZpZWxkRGF0YVR5cGVBcnJheSgpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheURhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBvYmogPSBhcnJheURhdGFbaV07XG5cbiAgICAgIGlmIChvYmouVGV4dCA9PSB0ZXh0KSB7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgICB9XG4gICAgfVxuXG4gICAgYWxlcnQoXCLmib7kuI3liLDmjIflrprnmoTmlbDmja7nsbvlnovvvIzor7fnoa7orqTmmK/lkKbmlK/mjIHor6XnsbvlnovvvIFcIik7XG4gIH1cbn07XG52YXIgRWRpdFRhYmxlX1NlbGVjdEZpZWxkVHlwZSA9IHtcbiAgR2V0X0VkaXRTdGF0dXNfSHRtbEVsZW06IGZ1bmN0aW9uIEdldF9FZGl0U3RhdHVzX0h0bWxFbGVtKF9jb25maWcsIHRlbXBsYXRlLCBob3N0Q2VsbCwgaG9zdFJvdywgaG9zdFRhYmxlLCB2aWV3U3RhdXNIdG1sRWxlbSwganNvbkRhdGFzLCBqc29uRGF0YVNpbmdsZSkge1xuICAgIHZhciB2YWwgPSBcIlwiO1xuICAgIHZhciAkZWxlbSA9ICQoXCI8c2VsZWN0IC8+XCIpO1xuXG4gICAgaWYgKGpzb25EYXRhU2luZ2xlICE9IG51bGwgJiYganNvbkRhdGFTaW5nbGUgIT0gdW5kZWZpbmVkKSB7XG4gICAgICB2YWwgPSBqc29uRGF0YVNpbmdsZVtcImZpZWxkRGF0YVR5cGVcIl07XG4gICAgfVxuXG4gICAgaWYgKHZpZXdTdGF1c0h0bWxFbGVtICE9IG51bGwgJiYgdmlld1N0YXVzSHRtbEVsZW0gIT0gdW5kZWZpbmVkKSB7XG4gICAgICB2YWwgPSB2aWV3U3RhdXNIdG1sRWxlbS5hdHRyKFwiVmFsdWVcIik7XG4gICAgfVxuXG4gICAgdmFyIF9maWVsZERhdGFUeXBlQXJyYXkgPSBFZGl0VGFibGVfU2VsZWN0RmllbGRUeXBlRGF0YUxvYWRlci5HZXRGaWVsZERhdGFUeXBlQXJyYXkoKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX2ZpZWxkRGF0YVR5cGVBcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHZhbHVlID0gX2ZpZWxkRGF0YVR5cGVBcnJheVtpXS5WYWx1ZTtcbiAgICAgIHZhciB0ZXh0ID0gX2ZpZWxkRGF0YVR5cGVBcnJheVtpXS5UZXh0O1xuICAgICAgJGVsZW0uYXBwZW5kKFwiPG9wdGlvbiB2YWx1ZT0nXCIgKyB2YWx1ZSArIFwiJz5cIiArIHRleHQgKyBcIjwvb3B0aW9uPlwiKTtcbiAgICB9XG5cbiAgICBpZiAodmFsICE9IFwiXCIpIHtcbiAgICAgICRlbGVtLnZhbCh2YWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkZWxlbS52YWwoRWRpdFRhYmxlX1NlbGVjdEZpZWxkVHlwZURhdGFMb2FkZXIuR2V0RmllbGREYXRhVHlwZU9iamVjdEJ5VGV4dChcIuWtl+espuS4slwiKS5WYWx1ZSk7XG4gICAgfVxuXG4gICAgJGVsZW0uY2hhbmdlKGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciB2YWwgPSAkKHRoaXMpLnZhbCgpO1xuXG4gICAgICBpZiAodmFsID09IFwi5pW05pWwXCIpIHtcbiAgICAgICAgJChob3N0Q2VsbCkubmV4dCgpLmZpbmQoXCJpbnB1dFwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XG4gICAgICAgICQoaG9zdENlbGwpLm5leHQoKS5maW5kKFwiaW5wdXRcIikudmFsKDApO1xuICAgICAgICAkKGhvc3RDZWxsKS5uZXh0KCkubmV4dCgpLmZpbmQoXCJpbnB1dFwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XG4gICAgICAgICQoaG9zdENlbGwpLm5leHQoKS5uZXh0KCkuZmluZChcImlucHV0XCIpLnZhbCgwKTtcbiAgICAgIH0gZWxzZSBpZiAodmFsID09IFwi5bCP5pWwXCIpIHtcbiAgICAgICAgJChob3N0Q2VsbCkubmV4dCgpLmZpbmQoXCJpbnB1dFwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgZmFsc2UpO1xuICAgICAgICAkKGhvc3RDZWxsKS5uZXh0KCkuZmluZChcImlucHV0XCIpLnZhbCgxMCk7XG4gICAgICAgICQoaG9zdENlbGwpLm5leHQoKS5uZXh0KCkuZmluZChcImlucHV0XCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBmYWxzZSk7XG4gICAgICAgICQoaG9zdENlbGwpLm5leHQoKS5uZXh0KCkuZmluZChcImlucHV0XCIpLnZhbCgyKTtcbiAgICAgIH0gZWxzZSBpZiAodmFsID09IFwi5pel5pyf5pe26Ze0XCIpIHtcbiAgICAgICAgJChob3N0Q2VsbCkubmV4dCgpLmZpbmQoXCJpbnB1dFwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XG4gICAgICAgICQoaG9zdENlbGwpLm5leHQoKS5maW5kKFwiaW5wdXRcIikudmFsKDIwKTtcbiAgICAgICAgJChob3N0Q2VsbCkubmV4dCgpLm5leHQoKS5maW5kKFwiaW5wdXRcIikuYXR0cihcImRpc2FibGVkXCIsIHRydWUpO1xuICAgICAgICAkKGhvc3RDZWxsKS5uZXh0KCkubmV4dCgpLmZpbmQoXCJpbnB1dFwiKS52YWwoMCk7XG4gICAgICB9IGVsc2UgaWYgKHZhbCA9PSBcIuWtl+espuS4slwiKSB7XG4gICAgICAgICQoaG9zdENlbGwpLm5leHQoKS5maW5kKFwiaW5wdXRcIikuYXR0cihcImRpc2FibGVkXCIsIGZhbHNlKTtcbiAgICAgICAgJChob3N0Q2VsbCkubmV4dCgpLmZpbmQoXCJpbnB1dFwiKS52YWwoNTApO1xuICAgICAgICAkKGhvc3RDZWxsKS5uZXh0KCkubmV4dCgpLmZpbmQoXCJpbnB1dFwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XG4gICAgICAgICQoaG9zdENlbGwpLm5leHQoKS5uZXh0KCkuZmluZChcImlucHV0XCIpLnZhbCgwKTtcbiAgICAgIH0gZWxzZSBpZiAodmFsID09IFwi6ZW/5a2X56ym5LiyXCIpIHtcbiAgICAgICAgJChob3N0Q2VsbCkubmV4dCgpLmZpbmQoXCJpbnB1dFwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XG4gICAgICAgICQoaG9zdENlbGwpLm5leHQoKS5maW5kKFwiaW5wdXRcIikudmFsKDApO1xuICAgICAgICAkKGhvc3RDZWxsKS5uZXh0KCkubmV4dCgpLmZpbmQoXCJpbnB1dFwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgdHJ1ZSk7XG4gICAgICAgICQoaG9zdENlbGwpLm5leHQoKS5uZXh0KCkuZmluZChcImlucHV0XCIpLnZhbCgwKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gJGVsZW07XG4gIH0sXG4gIEdldF9Db21wbGV0ZWRTdGF0dXNfSHRtbEVsZW06IGZ1bmN0aW9uIEdldF9Db21wbGV0ZWRTdGF0dXNfSHRtbEVsZW0oX2NvbmZpZywgdGVtcGxhdGUsIGhvc3RDZWxsLCBob3N0Um93LCBob3N0VGFibGUsIGVkaXRTdGF1c0h0bWxFbGVtKSB7XG4gICAgdmFyIHZhbHVlID0gZWRpdFN0YXVzSHRtbEVsZW0udmFsKCk7XG4gICAgdmFyIHRleHQgPSBFZGl0VGFibGVfU2VsZWN0RmllbGRUeXBlRGF0YUxvYWRlci5HZXRGaWVsZERhdGFUeXBlT2JqZWN0QnlWYWx1ZSh2YWx1ZSkuVGV4dDtcbiAgICB2YXIgJGVsZW0gPSAkKFwiPGxhYmVsIElzU2VyaWFsaXplPSd0cnVlJyBCaW5kTmFtZT0nXCIgKyB0ZW1wbGF0ZS5CaW5kTmFtZSArIFwiJyBWYWx1ZT0nXCIgKyB2YWx1ZSArIFwiJz5cIiArIHRleHQgKyBcIjwvbGFiZWw+XCIpO1xuICAgIHJldHVybiAkZWxlbTtcbiAgfSxcbiAgVmFsaWRhdGVUb0NvbXBsZXRlZEVuYWJsZTogZnVuY3Rpb24gVmFsaWRhdGVUb0NvbXBsZXRlZEVuYWJsZShfY29uZmlnLCB0ZW1wbGF0ZSwgaG9zdENlbGwsIGhvc3RSb3csIGhvc3RUYWJsZSwgZWRpdFN0YXVzSHRtbEVsZW0pIHtcbiAgICB2YXIgdmFsID0gZWRpdFN0YXVzSHRtbEVsZW0udmFsKCk7XG4gICAgcmV0dXJuIEVkaXRUYWJsZVZhbGlkYXRlLlZhbGlkYXRlKHZhbCwgdGVtcGxhdGUpO1xuICB9XG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgQ29sdW1uX1JUVGFibGVJc01haW4gPSB7XG4gIEdldF9FZGl0U3RhdHVzX0h0bWxFbGVtOiBmdW5jdGlvbiBHZXRfRWRpdFN0YXR1c19IdG1sRWxlbShfY29uZmlnLCB0ZW1wbGF0ZSwgaG9zdENlbGwsIGhvc3RSb3csIGhvc3RUYWJsZSwgdmlld1N0YXVzSHRtbEVsZW0sIGpzb25EYXRhcywganNvbkRhdGFTaW5nbGUpIHtcbiAgICB2YXIgY29uZmlnU291cmNlID0gW3tcbiAgICAgIFwiVmFsdWVcIjogXCLmmK9cIixcbiAgICAgIFwiVGV4dFwiOiBcIuaYr1wiXG4gICAgfSwge1xuICAgICAgXCJWYWx1ZVwiOiBcIuWQplwiLFxuICAgICAgXCJUZXh0XCI6IFwi5ZCmXCJcbiAgICB9XTtcbiAgICB2YXIgdmFsID0gXCJcIjtcbiAgICB2YXIgdHh0ID0gXCJcIjtcbiAgICB2YXIgYmluZG5hbWUgPSB0ZW1wbGF0ZS5CaW5kTmFtZTtcblxuICAgIGlmICh0ZW1wbGF0ZS5EZWZhdWx0VmFsdWUgIT0gdW5kZWZpbmVkICYmIHRlbXBsYXRlLkRlZmF1bHRWYWx1ZSAhPSBudWxsKSB7XG4gICAgICB2YXIgdmFsID0gRWRpdFRhYmxlRGVmYXVsZVZhbHVlLkdldFZhbHVlKHRlbXBsYXRlKTtcbiAgICB9XG5cbiAgICBpZiAoanNvbkRhdGFTaW5nbGUgIT0gbnVsbCAmJiBqc29uRGF0YVNpbmdsZSAhPSB1bmRlZmluZWQpIHtcbiAgICAgIHZhbCA9IGpzb25EYXRhU2luZ2xlW2JpbmRuYW1lXTtcbiAgICB9XG5cbiAgICBpZiAodmlld1N0YXVzSHRtbEVsZW0gIT0gbnVsbCAmJiB2aWV3U3RhdXNIdG1sRWxlbSAhPSB1bmRlZmluZWQpIHtcbiAgICAgIHZhbCA9IHZpZXdTdGF1c0h0bWxFbGVtLmF0dHIoXCJWYWx1ZVwiKTtcbiAgICB9XG5cbiAgICB2YXIgJGVsZW0gPSAkKFwiPHNlbGVjdCBzdHlsZT0nd2lkdGg6IDEwMCUnIC8+XCIpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb25maWdTb3VyY2UubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpdGVtID0gY29uZmlnU291cmNlW2ldO1xuICAgICAgJGVsZW0uYXBwZW5kKFwiPG9wdGlvbiB2YWx1ZT0nXCIgKyBpdGVtLlZhbHVlICsgXCInIHRleHQ9J1wiICsgaXRlbS5UZXh0ICsgXCInPlwiICsgaXRlbS5UZXh0ICsgXCI8L29wdGlvbj5cIik7XG4gICAgfVxuXG4gICAgJGVsZW0udmFsKHZhbCk7XG5cbiAgICBpZiAodHlwZW9mIHRlbXBsYXRlLkNoYW5nZUV2ZW50ID09IFwiZnVuY3Rpb25cIikge1xuICAgICAgJGVsZW0uY2hhbmdlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGVtcGxhdGUuQ2hhbmdlRXZlbnQodGhpcywgX2NvbmZpZywgdGVtcGxhdGUsIGhvc3RDZWxsLCBob3N0Um93LCBob3N0VGFibGUsIHZpZXdTdGF1c0h0bWxFbGVtKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiAkZWxlbTtcbiAgfSxcbiAgR2V0X0NvbXBsZXRlZFN0YXR1c19IdG1sRWxlbTogZnVuY3Rpb24gR2V0X0NvbXBsZXRlZFN0YXR1c19IdG1sRWxlbShfY29uZmlnLCB0ZW1wbGF0ZSwgaG9zdENlbGwsIGhvc3RSb3csIGhvc3RUYWJsZSwgZWRpdFN0YXVzSHRtbEVsZW0pIHtcbiAgICB2YXIgdmFsID0gZWRpdFN0YXVzSHRtbEVsZW0uZmluZChcIm9wdGlvbjpzZWxlY3RlZFwiKS5hdHRyKFwiVmFsdWVcIik7XG4gICAgdmFyIHRleHQgPSBlZGl0U3RhdXNIdG1sRWxlbS5maW5kKFwib3B0aW9uOnNlbGVjdGVkXCIpLmF0dHIoXCJUZXh0XCIpO1xuXG4gICAgaWYgKCF2YWwpIHtcbiAgICAgIHZhbCA9IFwiXCI7XG4gICAgfVxuXG4gICAgaWYgKCF0ZXh0KSB7XG4gICAgICB0ZXh0ID0gXCJcIjtcbiAgICB9XG5cbiAgICB2YXIgJGVsZW0gPSAkKFwiPGxhYmVsIElzU2VyaWFsaXplPSd0cnVlJyBCaW5kTmFtZT0nXCIgKyB0ZW1wbGF0ZS5CaW5kTmFtZSArIFwiJyBWYWx1ZT0nXCIgKyB2YWwgKyBcIicgVGV4dD0nXCIgKyB0ZXh0ICsgXCInPlwiICsgdGV4dCArIFwiPC9sYWJlbD5cIik7XG4gICAgcmV0dXJuICRlbGVtO1xuICB9LFxuICBWYWxpZGF0ZVRvQ29tcGxldGVkRW5hYmxlOiBmdW5jdGlvbiBWYWxpZGF0ZVRvQ29tcGxldGVkRW5hYmxlKF9jb25maWcsIHRlbXBsYXRlLCBob3N0Q2VsbCwgaG9zdFJvdywgaG9zdFRhYmxlLCBlZGl0U3RhdXNIdG1sRWxlbSkge1xuICAgIHZhciB2YWwgPSBlZGl0U3RhdXNIdG1sRWxlbS52YWwoKTtcbiAgICByZXR1cm4gRWRpdFRhYmxlVmFsaWRhdGUuVmFsaWRhdGUodmFsLCB0ZW1wbGF0ZSk7XG4gIH1cbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBDb2x1bW5fU2VsZWN0RGVmYXVsdFZhbHVlID0ge1xuICBHZXRfRWRpdFN0YXR1c19IdG1sRWxlbTogZnVuY3Rpb24gR2V0X0VkaXRTdGF0dXNfSHRtbEVsZW0oX2NvbmZpZywgdGVtcGxhdGUsIGhvc3RDZWxsLCBob3N0Um93LCBob3N0VGFibGUsIHZpZXdTdGF1c0h0bWxFbGVtLCBqc29uRGF0YXMsIGpzb25EYXRhU2luZ2xlKSB7XG4gICAgdmFyIGRlZmF1bHRUeXBlID0gXCJcIjtcbiAgICB2YXIgZGVmYXVsdFZhbHVlID0gXCJcIjtcbiAgICB2YXIgZGVmYXVsdFRleHQgPSBcIlwiO1xuXG4gICAgaWYgKGpzb25EYXRhU2luZ2xlICE9IG51bGwgJiYganNvbkRhdGFTaW5nbGUgIT0gdW5kZWZpbmVkKSB7XG4gICAgICBkZWZhdWx0VHlwZSA9IGpzb25EYXRhU2luZ2xlW1wiY29sdW1uRGVmYXVsdFR5cGVcIl0gPyBqc29uRGF0YVNpbmdsZVtcImNvbHVtbkRlZmF1bHRUeXBlXCJdIDogXCJcIjtcbiAgICAgIGRlZmF1bHRWYWx1ZSA9IGpzb25EYXRhU2luZ2xlW1wiY29sdW1uRGVmYXVsdFZhbHVlXCJdID8ganNvbkRhdGFTaW5nbGVbXCJjb2x1bW5EZWZhdWx0VmFsdWVcIl0gOiBcIlwiO1xuICAgICAgZGVmYXVsdFRleHQgPSBqc29uRGF0YVNpbmdsZVtcImNvbHVtbkRlZmF1bHRUZXh0XCJdID8ganNvbkRhdGFTaW5nbGVbXCJjb2x1bW5EZWZhdWx0VGV4dFwiXSA6IFwiXCI7XG4gICAgfVxuXG4gICAgaWYgKHZpZXdTdGF1c0h0bWxFbGVtICE9IG51bGwgJiYgdmlld1N0YXVzSHRtbEVsZW0gIT0gdW5kZWZpbmVkKSB7XG4gICAgICB2aWV3U3RhdXNIdG1sRWxlbS5maW5kKFwibGFiZWxcIikuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICgkKHRoaXMpLmF0dHIoXCJCaW5kTmFtZVwiKSA9PSBcImNvbHVtbkRlZmF1bHRUeXBlXCIpIHtcbiAgICAgICAgICBkZWZhdWx0VHlwZSA9ICQodGhpcykuYXR0cihcIlZhbHVlXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKCQodGhpcykuYXR0cihcIkJpbmROYW1lXCIpID09IFwiY29sdW1uRGVmYXVsdFRleHRcIikge1xuICAgICAgICAgIGRlZmF1bHRUZXh0ID0gJCh0aGlzKS5hdHRyKFwiVmFsdWVcIik7XG4gICAgICAgIH0gZWxzZSBpZiAoJCh0aGlzKS5hdHRyKFwiQmluZE5hbWVcIikgPT0gXCJjb2x1bW5EZWZhdWx0VmFsdWVcIikge1xuICAgICAgICAgIGRlZmF1bHRWYWx1ZSA9ICQodGhpcykuYXR0cihcIlZhbHVlXCIpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB2YXIgJGVsZW0gPSAkKFwiPGRpdj48L2Rpdj5cIik7XG4gICAgdmFyICRpbnB1dFR4dCA9ICQoXCI8aW5wdXQgdHlwZT0ndGV4dCcgc3R5bGU9J3dpZHRoOiA4MiUnIHJlYWRvbmx5IC8+XCIpO1xuICAgICRpbnB1dFR4dC5hdHRyKFwiY29sdW1uRGVmYXVsdFR5cGVcIiwgZGVmYXVsdFR5cGUpO1xuICAgICRpbnB1dFR4dC5hdHRyKFwiY29sdW1uRGVmYXVsdFZhbHVlXCIsIGRlZmF1bHRWYWx1ZSk7XG4gICAgJGlucHV0VHh0LmF0dHIoXCJjb2x1bW5EZWZhdWx0VGV4dFwiLCBkZWZhdWx0VGV4dCk7XG4gICAgJGlucHV0VHh0LnZhbChEZWZhdWx0VmFsdWVVdGlsaXR5LmZvcm1hdFRleHQoZGVmYXVsdFR5cGUsIGRlZmF1bHRUZXh0KSk7XG4gICAgdmFyICRpbnB1dEJ0biA9ICQoXCI8aW5wdXQgY2xhc3M9J25vcm1hbGJ1dHRvbi12MScgc3R5bGU9J21hcmdpbi1sZWZ0OiA0cHg7JyB0eXBlPSdidXR0b24nIHZhbHVlPScuLi4nLz5cIik7XG4gICAgJGVsZW0uYXBwZW5kKCRpbnB1dFR4dCkuYXBwZW5kKCRpbnB1dEJ0bik7XG4gICAgd2luZG93LiRUZW1wJElucHV0dHh0ID0gJGlucHV0VHh0O1xuICAgICRpbnB1dEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICBKQnVpbGQ0RFNlbGVjdFZpZXcuU2VsZWN0RW52VmFyaWFibGUuYmVnaW5TZWxlY3QoXCJDb2x1bW5fU2VsZWN0RGVmYXVsdFZhbHVlXCIpO1xuICAgIH0pO1xuICAgIHJldHVybiAkZWxlbTtcbiAgfSxcbiAgR2V0X0NvbXBsZXRlZFN0YXR1c19IdG1sRWxlbTogZnVuY3Rpb24gR2V0X0NvbXBsZXRlZFN0YXR1c19IdG1sRWxlbShfY29uZmlnLCB0ZW1wbGF0ZSwgaG9zdENlbGwsIGhvc3RSb3csIGhvc3RUYWJsZSwgZWRpdFN0YXVzSHRtbEVsZW0pIHtcbiAgICB2YXIgJGlucHV0VHh0ID0gZWRpdFN0YXVzSHRtbEVsZW0uZmluZChcImlucHV0W3R5cGU9J3RleHQnXVwiKTtcblxuICAgIGlmICgkaW5wdXRUeHQubGVuZ3RoID4gMCkge1xuICAgICAgdmFyIGRlZmF1bHRUeXBlID0gJGlucHV0VHh0LmF0dHIoXCJjb2x1bW5EZWZhdWx0VHlwZVwiKTtcbiAgICAgIHZhciBkZWZhdWx0VmFsdWUgPSAkaW5wdXRUeHQuYXR0cihcImNvbHVtbkRlZmF1bHRWYWx1ZVwiKTtcbiAgICAgIHZhciBkZWZhdWx0VGV4dCA9ICRpbnB1dFR4dC5hdHRyKFwiY29sdW1uRGVmYXVsdFRleHRcIik7XG4gICAgICB2YXIgJGVsZW0gPSAkKFwiPGRpdj48L2Rpdj5cIik7XG4gICAgICAkZWxlbS5hcHBlbmQoXCI8bGFiZWw+XCIgKyBEZWZhdWx0VmFsdWVVdGlsaXR5LmZvcm1hdFRleHQoZGVmYXVsdFR5cGUsIGRlZmF1bHRUZXh0KSArIFwiPC9sYWJlbD5cIik7XG4gICAgICAkZWxlbS5hcHBlbmQoXCI8bGFiZWwgSXNTZXJpYWxpemU9J3RydWUnIEJpbmROYW1lPSdjb2x1bW5EZWZhdWx0VHlwZScgVmFsdWU9J1wiICsgZGVmYXVsdFR5cGUgKyBcIicgc3R5bGU9J2Rpc3BsYXk6bm9uZScvPlwiKTtcbiAgICAgICRlbGVtLmFwcGVuZChcIjxsYWJlbCBJc1NlcmlhbGl6ZT0ndHJ1ZScgQmluZE5hbWU9J2NvbHVtbkRlZmF1bHRUZXh0JyBWYWx1ZT0nXCIgKyBkZWZhdWx0VGV4dCArIFwiJyBzdHlsZT0nZGlzcGxheTpub25lJy8+XCIpO1xuICAgICAgJGVsZW0uYXBwZW5kKFwiPGxhYmVsIElzU2VyaWFsaXplPSd0cnVlJyBCaW5kTmFtZT0nY29sdW1uRGVmYXVsdFZhbHVlJyBWYWx1ZT0nXCIgKyBkZWZhdWx0VmFsdWUgKyBcIicgc3R5bGU9J2Rpc3BsYXk6bm9uZScvPlwiKTtcbiAgICAgIHJldHVybiAkZWxlbTtcbiAgICB9XG5cbiAgICByZXR1cm4gJChcIjxsYWJlbD48L2xhYmVsPlwiKTtcbiAgfSxcbiAgVmFsaWRhdGVUb0NvbXBsZXRlZEVuYWJsZTogZnVuY3Rpb24gVmFsaWRhdGVUb0NvbXBsZXRlZEVuYWJsZShfY29uZmlnLCB0ZW1wbGF0ZSwgaG9zdENlbGwsIGhvc3RSb3csIGhvc3RUYWJsZSwgZWRpdFN0YXVzSHRtbEVsZW0pIHtcbiAgICB2YXIgdmFsID0gZWRpdFN0YXVzSHRtbEVsZW0udmFsKCk7XG4gICAgcmV0dXJuIEVkaXRUYWJsZVZhbGlkYXRlLlZhbGlkYXRlKHZhbCwgdGVtcGxhdGUpO1xuICB9LFxuICBzZXRTZWxlY3RFbnZWYXJpYWJsZVJlc3VsdFZhbHVlOiBmdW5jdGlvbiBzZXRTZWxlY3RFbnZWYXJpYWJsZVJlc3VsdFZhbHVlKGRlZmF1bHREYXRhKSB7XG4gICAgdmFyICRpbnB1dFR4dCA9IHdpbmRvdy4kVGVtcCRJbnB1dHR4dDtcblxuICAgIGlmIChudWxsICE9IGRlZmF1bHREYXRhKSB7XG4gICAgICAkaW5wdXRUeHQuYXR0cihcImNvbHVtbkRlZmF1bHRUeXBlXCIsIGRlZmF1bHREYXRhLlR5cGUpO1xuICAgICAgJGlucHV0VHh0LmF0dHIoXCJjb2x1bW5EZWZhdWx0VmFsdWVcIiwgZGVmYXVsdERhdGEuVmFsdWUpO1xuICAgICAgJGlucHV0VHh0LmF0dHIoXCJjb2x1bW5EZWZhdWx0VGV4dFwiLCBkZWZhdWx0RGF0YS5UZXh0KTtcbiAgICAgICRpbnB1dFR4dC52YWwoRGVmYXVsdFZhbHVlVXRpbGl0eS5mb3JtYXRUZXh0KGRlZmF1bHREYXRhLlR5cGUsIGRlZmF1bHREYXRhLlRleHQpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGlucHV0VHh0LmF0dHIoXCJjb2x1bW5EZWZhdWx0VHlwZVwiLCBcIlwiKTtcbiAgICAgICRpbnB1dFR4dC5hdHRyKFwiY29sdW1uRGVmYXVsdFZhbHVlXCIsIFwiXCIpO1xuICAgICAgJGlucHV0VHh0LmF0dHIoXCJjb2x1bW5EZWZhdWx0VGV4dFwiLCBcIlwiKTtcbiAgICAgICRpbnB1dFR4dC52YWwoXCJcIik7XG4gICAgfVxuICB9XG59OyIsIlwidXNlIHN0cmljdFwiO1xuXG52YXIgQ29sdW1uX1NlbGVjdEZpZWxkVHlwZURhdGFMb2FkZXIgPSB7XG4gIF9maWVsZERhdGFUeXBlQXJyYXk6IG51bGwsXG4gIEdldEZpZWxkRGF0YVR5cGVBcnJheTogZnVuY3Rpb24gR2V0RmllbGREYXRhVHlwZUFycmF5KCkge1xuICAgIGlmICh0aGlzLl9maWVsZERhdGFUeXBlQXJyYXkgPT0gbnVsbCkge1xuICAgICAgdmFyIF9zZWxmID0gdGhpcztcblxuICAgICAgQWpheFV0aWxpdHkuUG9zdFN5bmMoXCIvUmVzdC9CdWlsZGVyL0RhdGFTdG9yYWdlL0RhdGFCYXNlL1RhYmxlL0dldFRhYmxlRmllbGRUeXBlXCIsIHt9LCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICBpZiAoZGF0YS5zdWNjZXNzID09IHRydWUpIHtcbiAgICAgICAgICB2YXIgbGlzdCA9IEpzb25VdGlsaXR5LlN0cmluZ1RvSnNvbihkYXRhLmRhdGEpO1xuXG4gICAgICAgICAgaWYgKGxpc3QgIT0gbnVsbCAmJiBsaXN0ICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgX3NlbGYuX2ZpZWxkRGF0YVR5cGVBcnJheSA9IGxpc3Q7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIERpYWxvZ1V0aWxpdHkuQWxlcnQod2luZG93LCBcIkFsZXJ0TG9hZGluZ1F1ZXJ5RXJyb3JcIiwge30sIFwi5Yqg6L295a2X5q6157G75Z6L5aSx6LSl77yBXCIsIG51bGwpO1xuICAgICAgICB9XG4gICAgICB9LCB0aGlzKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fZmllbGREYXRhVHlwZUFycmF5O1xuICB9LFxuICBHZXRGaWVsZERhdGFUeXBlT2JqZWN0QnlWYWx1ZTogZnVuY3Rpb24gR2V0RmllbGREYXRhVHlwZU9iamVjdEJ5VmFsdWUoVmFsdWUpIHtcbiAgICB2YXIgYXJyYXlEYXRhID0gdGhpcy5HZXRGaWVsZERhdGFUeXBlQXJyYXkoKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXlEYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgb2JqID0gYXJyYXlEYXRhW2ldO1xuXG4gICAgICBpZiAob2JqLlZhbHVlID09IFZhbHVlKSB7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgICB9XG4gICAgfVxuXG4gICAgYWxlcnQoXCLmib7kuI3liLDmjIflrprnmoTmlbDmja7nsbvlnovvvIzor7fnoa7orqTmmK/lkKbmlK/mjIHor6XnsbvlnovvvIFcIik7XG4gIH0sXG4gIEdldEZpZWxkRGF0YVR5cGVPYmplY3RCeVRleHQ6IGZ1bmN0aW9uIEdldEZpZWxkRGF0YVR5cGVPYmplY3RCeVRleHQodGV4dCkge1xuICAgIHZhciBhcnJheURhdGEgPSB0aGlzLkdldEZpZWxkRGF0YVR5cGVBcnJheSgpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnJheURhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBvYmogPSBhcnJheURhdGFbaV07XG5cbiAgICAgIGlmIChvYmouVGV4dCA9PSB0ZXh0KSB7XG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgICB9XG4gICAgfVxuXG4gICAgYWxlcnQoXCLmib7kuI3liLDmjIflrprnmoTmlbDmja7nsbvlnovvvIzor7fnoa7orqTmmK/lkKbmlK/mjIHor6XnsbvlnovvvIFcIik7XG4gIH1cbn07XG52YXIgQ29sdW1uX1NlbGVjdEZpZWxkVHlwZSA9IHtcbiAgR2V0X0VkaXRTdGF0dXNfSHRtbEVsZW06IGZ1bmN0aW9uIEdldF9FZGl0U3RhdHVzX0h0bWxFbGVtKF9jb25maWcsIHRlbXBsYXRlLCBob3N0Q2VsbCwgaG9zdFJvdywgaG9zdFRhYmxlLCB2aWV3U3RhdXNIdG1sRWxlbSwganNvbkRhdGFzLCBqc29uRGF0YVNpbmdsZSkge1xuICAgIHZhciB2YWwgPSBcIlwiO1xuICAgIHZhciAkZWxlbSA9ICQoXCI8c2VsZWN0IC8+XCIpO1xuXG4gICAgaWYgKGpzb25EYXRhU2luZ2xlICE9IG51bGwgJiYganNvbkRhdGFTaW5nbGUgIT0gdW5kZWZpbmVkKSB7XG4gICAgICB2YWwgPSBqc29uRGF0YVNpbmdsZVtcImNvbHVtbkRhdGFUeXBlTmFtZVwiXTtcbiAgICB9XG5cbiAgICBpZiAodmlld1N0YXVzSHRtbEVsZW0gIT0gbnVsbCAmJiB2aWV3U3RhdXNIdG1sRWxlbSAhPSB1bmRlZmluZWQpIHtcbiAgICAgIHZhbCA9IHZpZXdTdGF1c0h0bWxFbGVtLmF0dHIoXCJWYWx1ZVwiKTtcbiAgICB9XG5cbiAgICB2YXIgX2ZpZWxkRGF0YVR5cGVBcnJheSA9IENvbHVtbl9TZWxlY3RGaWVsZFR5cGVEYXRhTG9hZGVyLkdldEZpZWxkRGF0YVR5cGVBcnJheSgpO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfZmllbGREYXRhVHlwZUFycmF5Lmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgdmFsdWUgPSBfZmllbGREYXRhVHlwZUFycmF5W2ldLlZhbHVlO1xuICAgICAgdmFyIHRleHQgPSBfZmllbGREYXRhVHlwZUFycmF5W2ldLlRleHQ7XG4gICAgICAkZWxlbS5hcHBlbmQoXCI8b3B0aW9uIHZhbHVlPSdcIiArIHZhbHVlICsgXCInPlwiICsgdGV4dCArIFwiPC9vcHRpb24+XCIpO1xuICAgIH1cblxuICAgIGlmICh2YWwgIT0gXCJcIikge1xuICAgICAgJGVsZW0udmFsKHZhbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRlbGVtLnZhbChDb2x1bW5fU2VsZWN0RmllbGRUeXBlRGF0YUxvYWRlci5HZXRGaWVsZERhdGFUeXBlT2JqZWN0QnlUZXh0KFwi5a2X56ym5LiyXCIpLlZhbHVlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gJGVsZW07XG4gIH0sXG4gIEdldF9Db21wbGV0ZWRTdGF0dXNfSHRtbEVsZW06IGZ1bmN0aW9uIEdldF9Db21wbGV0ZWRTdGF0dXNfSHRtbEVsZW0oX2NvbmZpZywgdGVtcGxhdGUsIGhvc3RDZWxsLCBob3N0Um93LCBob3N0VGFibGUsIGVkaXRTdGF1c0h0bWxFbGVtKSB7XG4gICAgdmFyIHZhbHVlID0gZWRpdFN0YXVzSHRtbEVsZW0udmFsKCk7XG4gICAgdmFyIHRleHQgPSBDb2x1bW5fU2VsZWN0RmllbGRUeXBlRGF0YUxvYWRlci5HZXRGaWVsZERhdGFUeXBlT2JqZWN0QnlWYWx1ZSh2YWx1ZSkuVGV4dDtcbiAgICB2YXIgJGVsZW0gPSAkKFwiPGxhYmVsIElzU2VyaWFsaXplPSd0cnVlJyBCaW5kTmFtZT0nXCIgKyB0ZW1wbGF0ZS5CaW5kTmFtZSArIFwiJyBWYWx1ZT0nXCIgKyB2YWx1ZSArIFwiJz5cIiArIHRleHQgKyBcIjwvbGFiZWw+XCIpO1xuICAgIHJldHVybiAkZWxlbTtcbiAgfSxcbiAgVmFsaWRhdGVUb0NvbXBsZXRlZEVuYWJsZTogZnVuY3Rpb24gVmFsaWRhdGVUb0NvbXBsZXRlZEVuYWJsZShfY29uZmlnLCB0ZW1wbGF0ZSwgaG9zdENlbGwsIGhvc3RSb3csIGhvc3RUYWJsZSwgZWRpdFN0YXVzSHRtbEVsZW0pIHtcbiAgICB2YXIgdmFsID0gZWRpdFN0YXVzSHRtbEVsZW0udmFsKCk7XG4gICAgcmV0dXJuIEVkaXRUYWJsZVZhbGlkYXRlLlZhbGlkYXRlKHZhbCwgdGVtcGxhdGUpO1xuICB9XG59OyJdfQ==
