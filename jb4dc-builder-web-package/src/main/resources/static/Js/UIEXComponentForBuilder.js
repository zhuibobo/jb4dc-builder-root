"use strict";var Column_SelectDefaultValue={Get_EditStatus_HtmlElem:function(e,t,l,a,i,n,u,r){var d="",f="",p="";null!=r&&null!=r&&(d=r.columnDefaultType?r.columnDefaultType:"",f=r.columnDefaultValue?r.columnDefaultValue:"",p=r.columnDefaultText?r.columnDefaultText:""),null!=n&&null!=n&&n.find("label").each(function(){"columnDefaultType"==$(this).attr("BindName")?d=$(this).attr("Value"):"columnDefaultText"==$(this).attr("BindName")?p=$(this).attr("Value"):"columnDefaultValue"==$(this).attr("BindName")&&(f=$(this).attr("Value"))});var o=$("<div></div>"),c=$("<input type='text' style='width: 90%' readonly />");c.attr("columnDefaultType",d),c.attr("columnDefaultValue",f),c.attr("columnDefaultText",p),c.val(JBuild4DSelectView.SelectEnvVariable.formatText(d,p));var T=$("<input class='normalbutton-v1' style='margin-left: 4px;' type='button' value='...'/>");return o.append(c).append(T),window.$Temp$Inputtxt=c,T.click(function(){JBuild4DSelectView.SelectEnvVariable.beginSelect("Column_SelectDefaultValue")}),o},Get_CompletedStatus_HtmlElem:function(e,t,l,a,i,n){var u=n.find("input[type='text']");if(0<u.length){var r=u.attr("columnDefaultType"),d=u.attr("columnDefaultValue"),f=u.attr("columnDefaultText"),p=$("<div></div>");return p.append("<label>"+JBuild4DSelectView.SelectEnvVariable.formatText(r,f)+"</label>"),p.append("<label IsSerialize='true' BindName='columnDefaultType' Value='"+r+"' style='display:none'/>"),p.append("<label IsSerialize='true' BindName='columnDefaultText' Value='"+f+"' style='display:none'/>"),p.append("<label IsSerialize='true' BindName='columnDefaultValue' Value='"+d+"' style='display:none'/>"),p}return $("<label></label>")},ValidateToCompletedEnable:function(e,t,l,a,i,n){var u=n.val();return EditTableValidate.Validate(u,t)},setSelectEnvVariableResultValue:function(e){var t=window.$Temp$Inputtxt;null!=e?(t.attr("columnDefaultType",e.Type),t.attr("columnDefaultValue",e.Value),t.attr("columnDefaultText",e.Text),t.val(JBuild4DSelectView.SelectEnvVariable.formatText(e.Type,e.Text))):(t.attr("columnDefaultType",""),t.attr("columnDefaultValue",""),t.attr("columnDefaultText",""),t.val(""))}},Column_SelectFieldTypeDataLoader={_fieldDataTypeArray:null,GetFieldDataTypeArray:function(){if(null==this._fieldDataTypeArray){var l=this;AjaxUtility.PostSync("/Rest/Builder/DataStorage/DataBase/Table/GetTableFieldType",{},function(e){if(1==e.success){var t=JsonUtility.StringToJson(e.data);null!=t&&null!=t&&(l._fieldDataTypeArray=t)}else DialogUtility.Alert(window,"AlertLoadingQueryError",{},"加载字段类型失败！",null)},this)}return this._fieldDataTypeArray},GetFieldDataTypeObjectByValue:function(e){for(var t=this.GetFieldDataTypeArray(),l=0;l<t.length;l++){var a=t[l];if(a.Value==e)return a}alert("找不到指定的数据类型，请确认是否支持该类型！")},GetFieldDataTypeObjectByText:function(e){for(var t=this.GetFieldDataTypeArray(),l=0;l<t.length;l++){var a=t[l];if(a.Text==e)return a}alert("找不到指定的数据类型，请确认是否支持该类型！")}},Column_SelectFieldType={Get_EditStatus_HtmlElem:function(e,t,l,a,i,n,u,r){var d="",f=$("<select />");null!=r&&null!=r&&(d=r.columnDataTypeName),null!=n&&null!=n&&(d=n.attr("Value"));for(var p=Column_SelectFieldTypeDataLoader.GetFieldDataTypeArray(),o=0;o<p.length;o++){var c=p[o].Value,T=p[o].Text;f.append("<option value='"+c+"'>"+T+"</option>")}return""!=d?f.val(d):f.val(Column_SelectFieldTypeDataLoader.GetFieldDataTypeObjectByText("字符串").Value),f},Get_CompletedStatus_HtmlElem:function(e,t,l,a,i,n){var u=n.val(),r=Column_SelectFieldTypeDataLoader.GetFieldDataTypeObjectByValue(u).Text;return $("<label IsSerialize='true' BindName='"+t.BindName+"' Value='"+u+"'>"+r+"</label>")},ValidateToCompletedEnable:function(e,t,l,a,i,n){var u=n.val();return EditTableValidate.Validate(u,t)}},EditTable_FieldName={Get_EditStatus_HtmlElem:function(e,t,l,a,i,n,u,r){var d="",f=t.BindName;if(null!=t.DefaultValue&&null!=t.DefaultValue)d=EditTableDefauleValue.GetValue(t);null!=r&&null!=r&&(d=r[f]),null!=n&&null!=n&&(d=n.html());var p=$("<input type='text' style='width: 98%' />");return p.val(d),p.attr("BindName",t.BindName),p.attr("Val",d),p.attr("IsSerialize","true"),p},Get_CompletedStatus_HtmlElem:function(e,t,l,a,i,n){var u=n.val().toUpperCase();return $("<label IsSerialize='true' BindName='"+t.BindName+"' Value='"+u+"'>"+u+"</label>")},ValidateToCompletedEnable:function(e,t,l,a,i,n){var u=n.val(),r=EditTableValidate.Validate(u,t);return r.Success&&i.find("[renderer=EditTable_FieldName]").each(function(){$(this).find("label").each(function(){var e=$(this);e.text()!=u&&e.text()!=u.toUpperCase()||(r={Success:!1,Msg:"[字段名称]不能重复!"})})}),r}},EditTable_SelectDefaultValue={Get_EditStatus_HtmlElem:function(e,t,l,a,i,n,u,r){var d="",f="",p="";null!=r&&null!=r&&(d=r.fieldDefaultType?r.fieldDefaultType:"",f=r.fieldDefaultValue?r.fieldDefaultValue:"",p=r.fieldDefaultText?r.fieldDefaultText:""),null!=n&&null!=n&&n.find("label").each(function(){"fieldDefaultType"==$(this).attr("BindName")?d=$(this).attr("Value"):"fieldDefaultText"==$(this).attr("BindName")?p=$(this).attr("Value"):"fieldDefaultValue"==$(this).attr("BindName")&&(f=$(this).attr("Value"))});var o=$("<div></div>"),c=$("<input type='text' style='width: 90%' readonly />");c.attr("fieldDefaultType",d),c.attr("fieldDefaultValue",f),c.attr("fieldDefaultText",p),c.val(JBuild4DSelectView.SelectEnvVariable.formatText(d,p));var T=$("<input class='normalbutton-v1' style='margin-left: 4px;' type='button' value='...'/>");return o.append(c).append(T),window.$Temp$Inputtxt=c,T.click(function(){window.tableDesion?tableDesion.selectDefaultValueDialogBegin(EditTable_SelectDefaultValue,null):(window.parent.listDesign.selectDefaultValueDialogBegin(window,null),window._SelectBindObj={setSelectEnvVariableResultValue:function(e){EditTable_SelectDefaultValue.setSelectEnvVariableResultValue(e)}})}),o},Get_CompletedStatus_HtmlElem:function(e,t,l,a,i,n){var u=n.find("input[type='text']");if(0<u.length){var r=u.attr("fieldDefaultType"),d=u.attr("fieldDefaultValue"),f=u.attr("fieldDefaultText"),p=$("<div></div>");return p.append("<label>"+JBuild4DSelectView.SelectEnvVariable.formatText(r,f)+"</label>"),p.append("<label IsSerialize='true' BindName='fieldDefaultType' Value='"+r+"' style='display:none'/>"),p.append("<label IsSerialize='true' BindName='fieldDefaultText' Value='"+f+"' style='display:none'/>"),p.append("<label IsSerialize='true' BindName='fieldDefaultValue' Value='"+d+"' style='display:none'/>"),p}return $("<label></label>")},ValidateToCompletedEnable:function(e,t,l,a,i,n){var u=n.val();return EditTableValidate.Validate(u,t)},setSelectEnvVariableResultValue:function(e){var t=window.$Temp$Inputtxt;null!=e?(t.attr("fieldDefaultType",e.Type),t.attr("fieldDefaultValue",e.Value),t.attr("fieldDefaultText",e.Text),t.val(JBuild4DSelectView.SelectEnvVariable.formatText(e.Type,e.Text))):(t.attr("fieldDefaultType",""),t.attr("fieldDefaultValue",""),t.attr("fieldDefaultText",""),t.val(""))}},EditTable_SelectFieldTypeDataLoader={_fieldDataTypeArray:null,GetFieldDataTypeArray:function(){if(null==this._fieldDataTypeArray){var l=this;AjaxUtility.PostSync("/Rest/Builder/DataStorage/DataBase/Table/GetTableFieldType",{},function(e){if(1==e.success){var t=JsonUtility.StringToJson(e.data);null!=t&&null!=t&&(l._fieldDataTypeArray=t)}else DialogUtility.Alert(window,"AlertLoadingQueryError",{},"加载字段类型失败！",null)},this)}return this._fieldDataTypeArray},GetFieldDataTypeObjectByValue:function(e){for(var t=this.GetFieldDataTypeArray(),l=0;l<t.length;l++){var a=t[l];if(a.Value==e)return a}alert("找不到指定的数据类型，请确认是否支持该类型！")},GetFieldDataTypeObjectByText:function(e){for(var t=this.GetFieldDataTypeArray(),l=0;l<t.length;l++){var a=t[l];if(a.Text==e)return a}alert("找不到指定的数据类型，请确认是否支持该类型！")}},EditTable_SelectFieldType={Get_EditStatus_HtmlElem:function(e,t,l,a,i,n,u,r){var d="",f=$("<select />");null!=r&&null!=r&&(d=r.fieldDataType),null!=n&&null!=n&&(d=n.attr("Value"));for(var p=EditTable_SelectFieldTypeDataLoader.GetFieldDataTypeArray(),o=0;o<p.length;o++){var c=p[o].Value,T=p[o].Text;f.append("<option value='"+c+"'>"+T+"</option>")}return""!=d?f.val(d):f.val(EditTable_SelectFieldTypeDataLoader.GetFieldDataTypeObjectByText("字符串").Value),f.change(function(){var e=$(this).val();"整数"==e?($(l).next().find("input").attr("disabled",!0),$(l).next().find("input").val(0),$(l).next().next().find("input").attr("disabled",!0),$(l).next().next().find("input").val(0)):"小数"==e?($(l).next().find("input").attr("disabled",!1),$(l).next().find("input").val(10),$(l).next().next().find("input").attr("disabled",!1),$(l).next().next().find("input").val(2)):"日期时间"==e?($(l).next().find("input").attr("disabled",!0),$(l).next().find("input").val(20),$(l).next().next().find("input").attr("disabled",!0),$(l).next().next().find("input").val(0)):"字符串"==e?($(l).next().find("input").attr("disabled",!1),$(l).next().find("input").val(50),$(l).next().next().find("input").attr("disabled",!0),$(l).next().next().find("input").val(0)):"长字符串"==e&&($(l).next().find("input").attr("disabled",!0),$(l).next().find("input").val(0),$(l).next().next().find("input").attr("disabled",!0),$(l).next().next().find("input").val(0))}),f},Get_CompletedStatus_HtmlElem:function(e,t,l,a,i,n){var u=n.val(),r=EditTable_SelectFieldTypeDataLoader.GetFieldDataTypeObjectByValue(u).Text;return $("<label IsSerialize='true' BindName='"+t.BindName+"' Value='"+u+"'>"+r+"</label>")},ValidateToCompletedEnable:function(e,t,l,a,i,n){var u=n.val();return EditTableValidate.Validate(u,t)}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlJlbmRlcmVycy9EYXRhU2V0L0NvbHVtbl9TZWxlY3REZWZhdWx0VmFsdWUuanMiLCJSZW5kZXJlcnMvRGF0YVNldC9Db2x1bW5fU2VsZWN0RmllbGRUeXBlLmpzIiwiUmVuZGVyZXJzL1RhYmxlRGVzaWduL0VkaXRUYWJsZV9GaWVsZE5hbWUuanMiLCJSZW5kZXJlcnMvVGFibGVEZXNpZ24vRWRpdFRhYmxlX1NlbGVjdERlZmF1bHRWYWx1ZS5qcyIsIlJlbmRlcmVycy9UYWJsZURlc2lnbi9FZGl0VGFibGVfU2VsZWN0RmllbGRUeXBlLmpzIl0sIm5hbWVzIjpbIkNvbHVtbl9TZWxlY3REZWZhdWx0VmFsdWUiLCJHZXRfRWRpdFN0YXR1c19IdG1sRWxlbSIsIl9jb25maWciLCJ0ZW1wbGF0ZSIsImhvc3RDZWxsIiwiaG9zdFJvdyIsImhvc3RUYWJsZSIsInZpZXdTdGF1c0h0bWxFbGVtIiwianNvbkRhdGFzIiwianNvbkRhdGFTaW5nbGUiLCJkZWZhdWx0VHlwZSIsImRlZmF1bHRWYWx1ZSIsImRlZmF1bHRUZXh0IiwidW5kZWZpbmVkIiwiZmluZCIsImVhY2giLCIkIiwidGhpcyIsImF0dHIiLCIkZWxlbSIsIiRpbnB1dFR4dCIsInZhbCIsIkpCdWlsZDREU2VsZWN0VmlldyIsIlNlbGVjdEVudlZhcmlhYmxlIiwiZm9ybWF0VGV4dCIsIiRpbnB1dEJ0biIsImFwcGVuZCIsIndpbmRvdyIsIiRUZW1wJElucHV0dHh0IiwiY2xpY2siLCJiZWdpblNlbGVjdCIsIkdldF9Db21wbGV0ZWRTdGF0dXNfSHRtbEVsZW0iLCJlZGl0U3RhdXNIdG1sRWxlbSIsImxlbmd0aCIsIlZhbGlkYXRlVG9Db21wbGV0ZWRFbmFibGUiLCJFZGl0VGFibGVWYWxpZGF0ZSIsIlZhbGlkYXRlIiwic2V0U2VsZWN0RW52VmFyaWFibGVSZXN1bHRWYWx1ZSIsImRlZmF1bHREYXRhIiwiVHlwZSIsIlZhbHVlIiwiVGV4dCIsIkNvbHVtbl9TZWxlY3RGaWVsZFR5cGVEYXRhTG9hZGVyIiwiX2ZpZWxkRGF0YVR5cGVBcnJheSIsIkdldEZpZWxkRGF0YVR5cGVBcnJheSIsIl9zZWxmIiwiQWpheFV0aWxpdHkiLCJQb3N0U3luYyIsImRhdGEiLCJzdWNjZXNzIiwibGlzdCIsIkpzb25VdGlsaXR5IiwiU3RyaW5nVG9Kc29uIiwiRGlhbG9nVXRpbGl0eSIsIkFsZXJ0IiwiR2V0RmllbGREYXRhVHlwZU9iamVjdEJ5VmFsdWUiLCJhcnJheURhdGEiLCJpIiwib2JqIiwiYWxlcnQiLCJHZXRGaWVsZERhdGFUeXBlT2JqZWN0QnlUZXh0IiwidGV4dCIsIkNvbHVtbl9TZWxlY3RGaWVsZFR5cGUiLCJ2YWx1ZSIsIkJpbmROYW1lIiwiRWRpdFRhYmxlX0ZpZWxkTmFtZSIsImJpbmRuYW1lIiwiRGVmYXVsdFZhbHVlIiwiRWRpdFRhYmxlRGVmYXVsZVZhbHVlIiwiR2V0VmFsdWUiLCJodG1sIiwidG9VcHBlckNhc2UiLCJyZXN1bHQiLCJTdWNjZXNzIiwibGFiZWxpdGVtIiwiTXNnIiwiRWRpdFRhYmxlX1NlbGVjdERlZmF1bHRWYWx1ZSIsImZpZWxkRGVmYXVsdFR5cGUiLCJmaWVsZERlZmF1bHRWYWx1ZSIsImZpZWxkRGVmYXVsdFRleHQiLCJ0YWJsZURlc2lvbiIsInNlbGVjdERlZmF1bHRWYWx1ZURpYWxvZ0JlZ2luIiwicGFyZW50IiwibGlzdERlc2lnbiIsIl9TZWxlY3RCaW5kT2JqIiwiRWRpdFRhYmxlX1NlbGVjdEZpZWxkVHlwZURhdGFMb2FkZXIiLCJFZGl0VGFibGVfU2VsZWN0RmllbGRUeXBlIiwiY2hhbmdlIiwibmV4dCJdLCJtYXBwaW5ncyI6IkFBQUEsYUFFQSxJQUFBQSwwQkFBQSxDQUNBQyx3QkFBQSxTQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxHQUNBLElBQUFDLEVBQUEsR0FDQUMsRUFBQSxHQUNBQyxFQUFBLEdBRUEsTUFBQUgsR0FBQUksTUFBQUosSUFDQUMsRUFBQUQsRUFBQSxrQkFBQUEsRUFBQSxrQkFBQSxHQUNBRSxFQUFB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RUFBQVosR0FBQW9GLE9BQUExRSxLQUFBLFNBQUFJLEtBQUEsWUFBQSxHQUNBRixFQUFBWixHQUFBb0YsT0FBQTFFLEtBQUEsU0FBQU8sSUFBQSxHQUNBTCxFQUFBWixHQUFBb0YsT0FBQUEsT0FBQTFFLEtBQUEsU0FBQUksS0FBQSxZQUFBLEdBQ0FGLEVBQUFaLEdBQUFvRixPQUFBQSxPQUFBMUUsS0FBQSxTQUFBTyxJQUFBLElBQ0EsTUFBQUEsR0FDQUwsRUFBQVosR0FBQW9GLE9BQUExRSxLQUFBLFNBQUFJLEtBQUEsWUFBQSxHQUNBRixFQUFBWixHQUFBb0YsT0FBQTFFLEtBQUEsU0FBQU8sSUFBQSxJQUNBTCxFQUFBWixHQUFBb0YsT0FBQUEsT0FBQTFFLEtBQUEsU0FBQUksS0FBQSxZQUFBLEdBQ0FGLEVBQUFaLEdBQUFvRixPQUFBQSxPQUFBMUUsS0FBQSxTQUFBTyxJQUFBLElBQ0EsUUFBQUEsR0FDQUwsRUFBQVosR0FBQW9GLE9BQUExRSxLQUFBLFNBQUFJLEtBQUEsWUFBQSxHQUNBRixFQUFBWixHQUFBb0YsT0FBQTFFLEtBQUEsU0FBQU8sSUFBQSxJQUNBTCxFQUFBWixHQUFBb0YsT0FBQUEsT0FBQTFFLEtBQUEsU0FBQUksS0FBQSxZQUFBLEdBQ0FGLEVBQUFaLEdBQUFvRixPQUFBQSxPQUFBMUUsS0FBQSxTQUFBTyxJQUFBLElBQ0EsT0FBQUEsR0FDQUwsRUFBQVosR0FBQW9GLE9BQUExRSxLQUFBLFNBQUFJLEtBQUEsWUFBQSxHQUNBRixFQUFBWixHQUFBb0YsT0FBQTFFLEtBQUEsU0FBQU8sSUFBQSxJQUNBTCxFQUFBWixHQUFBb0YsT0FBQUEsT0FBQTFFLEtBQUEsU0FBQUksS0FBQSxZQUFBLEdBQ0FGLEVBQUFaLEdBQUFvRixPQUFBQSxPQUFBMUUsS0FBQSxTQUFBTyxJQUFBLElBQ0EsUUFBQUEsSUFDQUwsRUFBQVosR0FBQW9GLE9BQUExRSxLQUFBLFNBQUFJLEtBQUEsWUFBQSxHQUNBRixFQUFBWixHQUFBb0YsT0FBQTFFLEtBQUEsU0FBQU8sSUFBQSxHQUNBTCxFQUFBWixHQUFBb0YsT0FBQUEsT0FBQTFFLEtBQUEsU0FBQUksS0FBQSxZQUFBLEdBQ0FGLEVBQUFaLEdBQUFvRixPQUFBQSxPQUFBMUUsS0FBQSxTQUFBTyxJQUFBLE1BR0FGLEdBRUFZLDZCQUFBLFNBQUE3QixFQUFBQyxFQUFBQyxFQUFBQyxFQUFBQyxFQUFBMEIsR0FDQSxJQUFBK0IsRUFBQS9CLEVBQUFYLE1BQ0F3QyxFQUFBd0Isb0NBQUE5Qiw4QkFBQVEsR0FBQXRCLEtBRUEsT0FEQXpCLEVBQUEsdUNBQUFiLEVBQUE2RCxTQUFBLFlBQUFELEVBQUEsS0FBQUYsRUFBQSxhQUdBM0IsMEJBQUEsU0FBQWhDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUEwQixHQUNBLElBQUFYLEVBQUFXLEVBQUFYLE1BQ0EsT0FBQWMsa0JBQUFDLFNBQUFmLEVBQUFsQiIsImZpbGUiOiJVSUVYQ29tcG9uZW50Rm9yQnVpbGRlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xuXG52YXIgQ29sdW1uX1NlbGVjdERlZmF1bHRWYWx1ZSA9IHtcbiAgR2V0X0VkaXRTdGF0dXNfSHRtbEVsZW06IGZ1bmN0aW9uIEdldF9FZGl0U3RhdHVzX0h0bWxFbGVtKF9jb25maWcsIHRlbXBsYXRlLCBob3N0Q2VsbCwgaG9zdFJvdywgaG9zdFRhYmxlLCB2aWV3U3RhdXNIdG1sRWxlbSwganNvbkRhdGFzLCBqc29uRGF0YVNpbmdsZSkge1xuICAgIHZhciBkZWZhdWx0VHlwZSA9IFwiXCI7XG4gICAgdmFyIGRlZmF1bHRWYWx1ZSA9IFwiXCI7XG4gICAgdmFyIGRlZmF1bHRUZXh0ID0gXCJcIjtcblxuICAgIGlmIChqc29uRGF0YVNpbmdsZSAhPSBudWxsICYmIGpzb25EYXRhU2luZ2xlICE9IHVuZGVmaW5lZCkge1xuICAgICAgZGVmYXVsdFR5cGUgPSBqc29uRGF0YVNpbmdsZVtcImNvbHVtbkRlZmF1bHRUeXBlXCJdID8ganNvbkRhdGFTaW5nbGVbXCJjb2x1bW5EZWZhdWx0VHlwZVwiXSA6IFwiXCI7XG4gICAgICBkZWZhdWx0VmFsdWUgPSBqc29uRGF0YVNpbmdsZVtcImNvbHVtbkRlZmF1bHRWYWx1ZVwiXSA/IGpzb25EYXRhU2luZ2xlW1wiY29sdW1uRGVmYXVsdFZhbHVlXCJdIDogXCJcIjtcbiAgICAgIGRlZmF1bHRUZXh0ID0ganNvbkRhdGFTaW5nbGVbXCJjb2x1bW5EZWZhdWx0VGV4dFwiXSA/IGpzb25EYXRhU2luZ2xlW1wiY29sdW1uRGVmYXVsdFRleHRcIl0gOiBcIlwiO1xuICAgIH1cblxuICAgIGlmICh2aWV3U3RhdXNIdG1sRWxlbSAhPSBudWxsICYmIHZpZXdTdGF1c0h0bWxFbGVtICE9IHVuZGVmaW5lZCkge1xuICAgICAgdmlld1N0YXVzSHRtbEVsZW0uZmluZChcImxhYmVsXCIpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoJCh0aGlzKS5hdHRyKFwiQmluZE5hbWVcIikgPT0gXCJjb2x1bW5EZWZhdWx0VHlwZVwiKSB7XG4gICAgICAgICAgZGVmYXVsdFR5cGUgPSAkKHRoaXMpLmF0dHIoXCJWYWx1ZVwiKTtcbiAgICAgICAgfSBlbHNlIGlmICgkKHRoaXMpLmF0dHIoXCJCaW5kTmFtZVwiKSA9PSBcImNvbHVtbkRlZmF1bHRUZXh0XCIpIHtcbiAgICAgICAgICBkZWZhdWx0VGV4dCA9ICQodGhpcykuYXR0cihcIlZhbHVlXCIpO1xuICAgICAgICB9IGVsc2UgaWYgKCQodGhpcykuYXR0cihcIkJpbmROYW1lXCIpID09IFwiY29sdW1uRGVmYXVsdFZhbHVlXCIpIHtcbiAgICAgICAgICBkZWZhdWx0VmFsdWUgPSAkKHRoaXMpLmF0dHIoXCJWYWx1ZVwiKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdmFyICRlbGVtID0gJChcIjxkaXY+PC9kaXY+XCIpO1xuICAgIHZhciAkaW5wdXRUeHQgPSAkKFwiPGlucHV0IHR5cGU9J3RleHQnIHN0eWxlPSd3aWR0aDogOTAlJyByZWFkb25seSAvPlwiKTtcbiAgICAkaW5wdXRUeHQuYXR0cihcImNvbHVtbkRlZmF1bHRUeXBlXCIsIGRlZmF1bHRUeXBlKTtcbiAgICAkaW5wdXRUeHQuYXR0cihcImNvbHVtbkRlZmF1bHRWYWx1ZVwiLCBkZWZhdWx0VmFsdWUpO1xuICAgICRpbnB1dFR4dC5hdHRyKFwiY29sdW1uRGVmYXVsdFRleHRcIiwgZGVmYXVsdFRleHQpO1xuICAgICRpbnB1dFR4dC52YWwoSkJ1aWxkNERTZWxlY3RWaWV3LlNlbGVjdEVudlZhcmlhYmxlLmZvcm1hdFRleHQoZGVmYXVsdFR5cGUsIGRlZmF1bHRUZXh0KSk7XG4gICAgdmFyICRpbnB1dEJ0biA9ICQoXCI8aW5wdXQgY2xhc3M9J25vcm1hbGJ1dHRvbi12MScgc3R5bGU9J21hcmdpbi1sZWZ0OiA0cHg7JyB0eXBlPSdidXR0b24nIHZhbHVlPScuLi4nLz5cIik7XG4gICAgJGVsZW0uYXBwZW5kKCRpbnB1dFR4dCkuYXBwZW5kKCRpbnB1dEJ0bik7XG4gICAgd2luZG93LiRUZW1wJElucHV0dHh0ID0gJGlucHV0VHh0O1xuICAgICRpbnB1dEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICBKQnVpbGQ0RFNlbGVjdFZpZXcuU2VsZWN0RW52VmFyaWFibGUuYmVnaW5TZWxlY3QoXCJDb2x1bW5fU2VsZWN0RGVmYXVsdFZhbHVlXCIpO1xuICAgIH0pO1xuICAgIHJldHVybiAkZWxlbTtcbiAgfSxcbiAgR2V0X0NvbXBsZXRlZFN0YXR1c19IdG1sRWxlbTogZnVuY3Rpb24gR2V0X0NvbXBsZXRlZFN0YXR1c19IdG1sRWxlbShfY29uZmlnLCB0ZW1wbGF0ZSwgaG9zdENlbGwsIGhvc3RSb3csIGhvc3RUYWJsZSwgZWRpdFN0YXVzSHRtbEVsZW0pIHtcbiAgICB2YXIgJGlucHV0VHh0ID0gZWRpdFN0YXVzSHRtbEVsZW0uZmluZChcImlucHV0W3R5cGU9J3RleHQnXVwiKTtcblxuICAgIGlmICgkaW5wdXRUeHQubGVuZ3RoID4gMCkge1xuICAgICAgdmFyIGRlZmF1bHRUeXBlID0gJGlucHV0VHh0LmF0dHIoXCJjb2x1bW5EZWZhdWx0VHlwZVwiKTtcbiAgICAgIHZhciBkZWZhdWx0VmFsdWUgPSAkaW5wdXRUeHQuYXR0cihcImNvbHVtbkRlZmF1bHRWYWx1ZVwiKTtcbiAgICAgIHZhciBkZWZhdWx0VGV4dCA9ICRpbnB1dFR4dC5hdHRyKFwiY29sdW1uRGVmYXVsdFRleHRcIik7XG4gICAgICB2YXIgJGVsZW0gPSAkKFwiPGRpdj48L2Rpdj5cIik7XG4gICAgICAkZWxlbS5hcHBlbmQoXCI8bGFiZWw+XCIgKyBKQnVpbGQ0RFNlbGVjdFZpZXcuU2VsZWN0RW52VmFyaWFibGUuZm9ybWF0VGV4dChkZWZhdWx0VHlwZSwgZGVmYXVsdFRleHQpICsgXCI8L2xhYmVsPlwiKTtcbiAgICAgICRlbGVtLmFwcGVuZChcIjxsYWJlbCBJc1NlcmlhbGl6ZT0ndHJ1ZScgQmluZE5hbWU9J2NvbHVtbkRlZmF1bHRUeXBlJyBWYWx1ZT0nXCIgKyBkZWZhdWx0VHlwZSArIFwiJyBzdHlsZT0nZGlzcGxheTpub25lJy8+XCIpO1xuICAgICAgJGVsZW0uYXBwZW5kKFwiPGxhYmVsIElzU2VyaWFsaXplPSd0cnVlJyBCaW5kTmFtZT0nY29sdW1uRGVmYXVsdFRleHQnIFZhbHVlPSdcIiArIGRlZmF1bHRUZXh0ICsgXCInIHN0eWxlPSdkaXNwbGF5Om5vbmUnLz5cIik7XG4gICAgICAkZWxlbS5hcHBlbmQoXCI8bGFiZWwgSXNTZXJpYWxpemU9J3RydWUnIEJpbmROYW1lPSdjb2x1bW5EZWZhdWx0VmFsdWUnIFZhbHVlPSdcIiArIGRlZmF1bHRWYWx1ZSArIFwiJyBzdHlsZT0nZGlzcGxheTpub25lJy8+XCIpO1xuICAgICAgcmV0dXJuICRlbGVtO1xuICAgIH1cblxuICAgIHJldHVybiAkKFwiPGxhYmVsPjwvbGFiZWw+XCIpO1xuICB9LFxuICBWYWxpZGF0ZVRvQ29tcGxldGVkRW5hYmxlOiBmdW5jdGlvbiBWYWxpZGF0ZVRvQ29tcGxldGVkRW5hYmxlKF9jb25maWcsIHRlbXBsYXRlLCBob3N0Q2VsbCwgaG9zdFJvdywgaG9zdFRhYmxlLCBlZGl0U3RhdXNIdG1sRWxlbSkge1xuICAgIHZhciB2YWwgPSBlZGl0U3RhdXNIdG1sRWxlbS52YWwoKTtcbiAgICByZXR1cm4gRWRpdFRhYmxlVmFsaWRhdGUuVmFsaWRhdGUodmFsLCB0ZW1wbGF0ZSk7XG4gIH0sXG4gIHNldFNlbGVjdEVudlZhcmlhYmxlUmVzdWx0VmFsdWU6IGZ1bmN0aW9uIHNldFNlbGVjdEVudlZhcmlhYmxlUmVzdWx0VmFsdWUoZGVmYXVsdERhdGEpIHtcbiAgICB2YXIgJGlucHV0VHh0ID0gd2luZG93LiRUZW1wJElucHV0dHh0O1xuXG4gICAgaWYgKG51bGwgIT0gZGVmYXVsdERhdGEpIHtcbiAgICAgICRpbnB1dFR4dC5hdHRyKFwiY29sdW1uRGVmYXVsdFR5cGVcIiwgZGVmYXVsdERhdGEuVHlwZSk7XG4gICAgICAkaW5wdXRUeHQuYXR0cihcImNvbHVtbkRlZmF1bHRWYWx1ZVwiLCBkZWZhdWx0RGF0YS5WYWx1ZSk7XG4gICAgICAkaW5wdXRUeHQuYXR0cihcImNvbHVtbkRlZmF1bHRUZXh0XCIsIGRlZmF1bHREYXRhLlRleHQpO1xuICAgICAgJGlucHV0VHh0LnZhbChKQnVpbGQ0RFNlbGVjdFZpZXcuU2VsZWN0RW52VmFyaWFibGUuZm9ybWF0VGV4dChkZWZhdWx0RGF0YS5UeXBlLCBkZWZhdWx0RGF0YS5UZXh0KSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRpbnB1dFR4dC5hdHRyKFwiY29sdW1uRGVmYXVsdFR5cGVcIiwgXCJcIik7XG4gICAgICAkaW5wdXRUeHQuYXR0cihcImNvbHVtbkRlZmF1bHRWYWx1ZVwiLCBcIlwiKTtcbiAgICAgICRpbnB1dFR4dC5hdHRyKFwiY29sdW1uRGVmYXVsdFRleHRcIiwgXCJcIik7XG4gICAgICAkaW5wdXRUeHQudmFsKFwiXCIpO1xuICAgIH1cbiAgfVxufTsiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIENvbHVtbl9TZWxlY3RGaWVsZFR5cGVEYXRhTG9hZGVyID0ge1xuICBfZmllbGREYXRhVHlwZUFycmF5OiBudWxsLFxuICBHZXRGaWVsZERhdGFUeXBlQXJyYXk6IGZ1bmN0aW9uIEdldEZpZWxkRGF0YVR5cGVBcnJheSgpIHtcbiAgICBpZiAodGhpcy5fZmllbGREYXRhVHlwZUFycmF5ID09IG51bGwpIHtcbiAgICAgIHZhciBfc2VsZiA9IHRoaXM7XG5cbiAgICAgIEFqYXhVdGlsaXR5LlBvc3RTeW5jKFwiL1Jlc3QvQnVpbGRlci9EYXRhU3RvcmFnZS9EYXRhQmFzZS9UYWJsZS9HZXRUYWJsZUZpZWxkVHlwZVwiLCB7fSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgaWYgKGRhdGEuc3VjY2VzcyA9PSB0cnVlKSB7XG4gICAgICAgICAgdmFyIGxpc3QgPSBKc29uVXRpbGl0eS5TdHJpbmdUb0pzb24oZGF0YS5kYXRhKTtcblxuICAgICAgICAgIGlmIChsaXN0ICE9IG51bGwgJiYgbGlzdCAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIF9zZWxmLl9maWVsZERhdGFUeXBlQXJyYXkgPSBsaXN0O1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBEaWFsb2dVdGlsaXR5LkFsZXJ0KHdpbmRvdywgXCJBbGVydExvYWRpbmdRdWVyeUVycm9yXCIsIHt9LCBcIuWKoOi9veWtl+auteexu+Wei+Wksei0pe+8gVwiLCBudWxsKTtcbiAgICAgICAgfVxuICAgICAgfSwgdGhpcyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2ZpZWxkRGF0YVR5cGVBcnJheTtcbiAgfSxcbiAgR2V0RmllbGREYXRhVHlwZU9iamVjdEJ5VmFsdWU6IGZ1bmN0aW9uIEdldEZpZWxkRGF0YVR5cGVPYmplY3RCeVZhbHVlKFZhbHVlKSB7XG4gICAgdmFyIGFycmF5RGF0YSA9IHRoaXMuR2V0RmllbGREYXRhVHlwZUFycmF5KCk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5RGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIG9iaiA9IGFycmF5RGF0YVtpXTtcblxuICAgICAgaWYgKG9iai5WYWx1ZSA9PSBWYWx1ZSkge1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgfVxuICAgIH1cblxuICAgIGFsZXJ0KFwi5om+5LiN5Yiw5oyH5a6a55qE5pWw5o2u57G75Z6L77yM6K+356Gu6K6k5piv5ZCm5pSv5oyB6K+l57G75Z6L77yBXCIpO1xuICB9LFxuICBHZXRGaWVsZERhdGFUeXBlT2JqZWN0QnlUZXh0OiBmdW5jdGlvbiBHZXRGaWVsZERhdGFUeXBlT2JqZWN0QnlUZXh0KHRleHQpIHtcbiAgICB2YXIgYXJyYXlEYXRhID0gdGhpcy5HZXRGaWVsZERhdGFUeXBlQXJyYXkoKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXlEYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgb2JqID0gYXJyYXlEYXRhW2ldO1xuXG4gICAgICBpZiAob2JqLlRleHQgPT0gdGV4dCkge1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgfVxuICAgIH1cblxuICAgIGFsZXJ0KFwi5om+5LiN5Yiw5oyH5a6a55qE5pWw5o2u57G75Z6L77yM6K+356Gu6K6k5piv5ZCm5pSv5oyB6K+l57G75Z6L77yBXCIpO1xuICB9XG59O1xudmFyIENvbHVtbl9TZWxlY3RGaWVsZFR5cGUgPSB7XG4gIEdldF9FZGl0U3RhdHVzX0h0bWxFbGVtOiBmdW5jdGlvbiBHZXRfRWRpdFN0YXR1c19IdG1sRWxlbShfY29uZmlnLCB0ZW1wbGF0ZSwgaG9zdENlbGwsIGhvc3RSb3csIGhvc3RUYWJsZSwgdmlld1N0YXVzSHRtbEVsZW0sIGpzb25EYXRhcywganNvbkRhdGFTaW5nbGUpIHtcbiAgICB2YXIgdmFsID0gXCJcIjtcbiAgICB2YXIgJGVsZW0gPSAkKFwiPHNlbGVjdCAvPlwiKTtcblxuICAgIGlmIChqc29uRGF0YVNpbmdsZSAhPSBudWxsICYmIGpzb25EYXRhU2luZ2xlICE9IHVuZGVmaW5lZCkge1xuICAgICAgdmFsID0ganNvbkRhdGFTaW5nbGVbXCJjb2x1bW5EYXRhVHlwZU5hbWVcIl07XG4gICAgfVxuXG4gICAgaWYgKHZpZXdTdGF1c0h0bWxFbGVtICE9IG51bGwgJiYgdmlld1N0YXVzSHRtbEVsZW0gIT0gdW5kZWZpbmVkKSB7XG4gICAgICB2YWwgPSB2aWV3U3RhdXNIdG1sRWxlbS5hdHRyKFwiVmFsdWVcIik7XG4gICAgfVxuXG4gICAgdmFyIF9maWVsZERhdGFUeXBlQXJyYXkgPSBDb2x1bW5fU2VsZWN0RmllbGRUeXBlRGF0YUxvYWRlci5HZXRGaWVsZERhdGFUeXBlQXJyYXkoKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgX2ZpZWxkRGF0YVR5cGVBcnJheS5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIHZhbHVlID0gX2ZpZWxkRGF0YVR5cGVBcnJheVtpXS5WYWx1ZTtcbiAgICAgIHZhciB0ZXh0ID0gX2ZpZWxkRGF0YVR5cGVBcnJheVtpXS5UZXh0O1xuICAgICAgJGVsZW0uYXBwZW5kKFwiPG9wdGlvbiB2YWx1ZT0nXCIgKyB2YWx1ZSArIFwiJz5cIiArIHRleHQgKyBcIjwvb3B0aW9uPlwiKTtcbiAgICB9XG5cbiAgICBpZiAodmFsICE9IFwiXCIpIHtcbiAgICAgICRlbGVtLnZhbCh2YWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkZWxlbS52YWwoQ29sdW1uX1NlbGVjdEZpZWxkVHlwZURhdGFMb2FkZXIuR2V0RmllbGREYXRhVHlwZU9iamVjdEJ5VGV4dChcIuWtl+espuS4slwiKS5WYWx1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuICRlbGVtO1xuICB9LFxuICBHZXRfQ29tcGxldGVkU3RhdHVzX0h0bWxFbGVtOiBmdW5jdGlvbiBHZXRfQ29tcGxldGVkU3RhdHVzX0h0bWxFbGVtKF9jb25maWcsIHRlbXBsYXRlLCBob3N0Q2VsbCwgaG9zdFJvdywgaG9zdFRhYmxlLCBlZGl0U3RhdXNIdG1sRWxlbSkge1xuICAgIHZhciB2YWx1ZSA9IGVkaXRTdGF1c0h0bWxFbGVtLnZhbCgpO1xuICAgIHZhciB0ZXh0ID0gQ29sdW1uX1NlbGVjdEZpZWxkVHlwZURhdGFMb2FkZXIuR2V0RmllbGREYXRhVHlwZU9iamVjdEJ5VmFsdWUodmFsdWUpLlRleHQ7XG4gICAgdmFyICRlbGVtID0gJChcIjxsYWJlbCBJc1NlcmlhbGl6ZT0ndHJ1ZScgQmluZE5hbWU9J1wiICsgdGVtcGxhdGUuQmluZE5hbWUgKyBcIicgVmFsdWU9J1wiICsgdmFsdWUgKyBcIic+XCIgKyB0ZXh0ICsgXCI8L2xhYmVsPlwiKTtcbiAgICByZXR1cm4gJGVsZW07XG4gIH0sXG4gIFZhbGlkYXRlVG9Db21wbGV0ZWRFbmFibGU6IGZ1bmN0aW9uIFZhbGlkYXRlVG9Db21wbGV0ZWRFbmFibGUoX2NvbmZpZywgdGVtcGxhdGUsIGhvc3RDZWxsLCBob3N0Um93LCBob3N0VGFibGUsIGVkaXRTdGF1c0h0bWxFbGVtKSB7XG4gICAgdmFyIHZhbCA9IGVkaXRTdGF1c0h0bWxFbGVtLnZhbCgpO1xuICAgIHJldHVybiBFZGl0VGFibGVWYWxpZGF0ZS5WYWxpZGF0ZSh2YWwsIHRlbXBsYXRlKTtcbiAgfVxufTsiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIEVkaXRUYWJsZV9GaWVsZE5hbWUgPSB7XG4gIEdldF9FZGl0U3RhdHVzX0h0bWxFbGVtOiBmdW5jdGlvbiBHZXRfRWRpdFN0YXR1c19IdG1sRWxlbShfY29uZmlnLCB0ZW1wbGF0ZSwgaG9zdENlbGwsIGhvc3RSb3csIGhvc3RUYWJsZSwgdmlld1N0YXVzSHRtbEVsZW0sIGpzb25EYXRhcywganNvbkRhdGFTaW5nbGUpIHtcbiAgICB2YXIgdmFsID0gXCJcIjtcbiAgICB2YXIgYmluZG5hbWUgPSB0ZW1wbGF0ZS5CaW5kTmFtZTtcblxuICAgIGlmICh0ZW1wbGF0ZS5EZWZhdWx0VmFsdWUgIT0gdW5kZWZpbmVkICYmIHRlbXBsYXRlLkRlZmF1bHRWYWx1ZSAhPSBudWxsKSB7XG4gICAgICB2YXIgdmFsID0gRWRpdFRhYmxlRGVmYXVsZVZhbHVlLkdldFZhbHVlKHRlbXBsYXRlKTtcbiAgICB9XG5cbiAgICBpZiAoanNvbkRhdGFTaW5nbGUgIT0gbnVsbCAmJiBqc29uRGF0YVNpbmdsZSAhPSB1bmRlZmluZWQpIHtcbiAgICAgIHZhbCA9IGpzb25EYXRhU2luZ2xlW2JpbmRuYW1lXTtcbiAgICB9XG5cbiAgICBpZiAodmlld1N0YXVzSHRtbEVsZW0gIT0gbnVsbCAmJiB2aWV3U3RhdXNIdG1sRWxlbSAhPSB1bmRlZmluZWQpIHtcbiAgICAgIHZhbCA9IHZpZXdTdGF1c0h0bWxFbGVtLmh0bWwoKTtcbiAgICB9XG5cbiAgICB2YXIgJGVsZW0gPSAkKFwiPGlucHV0IHR5cGU9J3RleHQnIHN0eWxlPSd3aWR0aDogOTglJyAvPlwiKTtcbiAgICAkZWxlbS52YWwodmFsKTtcbiAgICAkZWxlbS5hdHRyKFwiQmluZE5hbWVcIiwgdGVtcGxhdGUuQmluZE5hbWUpO1xuICAgICRlbGVtLmF0dHIoXCJWYWxcIiwgdmFsKTtcbiAgICAkZWxlbS5hdHRyKFwiSXNTZXJpYWxpemVcIiwgXCJ0cnVlXCIpO1xuICAgIHJldHVybiAkZWxlbTtcbiAgfSxcbiAgR2V0X0NvbXBsZXRlZFN0YXR1c19IdG1sRWxlbTogZnVuY3Rpb24gR2V0X0NvbXBsZXRlZFN0YXR1c19IdG1sRWxlbShfY29uZmlnLCB0ZW1wbGF0ZSwgaG9zdENlbGwsIGhvc3RSb3csIGhvc3RUYWJsZSwgZWRpdFN0YXVzSHRtbEVsZW0pIHtcbiAgICB2YXIgdmFsID0gZWRpdFN0YXVzSHRtbEVsZW0udmFsKCkudG9VcHBlckNhc2UoKTtcbiAgICB2YXIgJGVsZW0gPSAkKFwiPGxhYmVsIElzU2VyaWFsaXplPSd0cnVlJyBCaW5kTmFtZT0nXCIgKyB0ZW1wbGF0ZS5CaW5kTmFtZSArIFwiJyBWYWx1ZT0nXCIgKyB2YWwgKyBcIic+XCIgKyB2YWwgKyBcIjwvbGFiZWw+XCIpO1xuICAgIHJldHVybiAkZWxlbTtcbiAgfSxcbiAgVmFsaWRhdGVUb0NvbXBsZXRlZEVuYWJsZTogZnVuY3Rpb24gVmFsaWRhdGVUb0NvbXBsZXRlZEVuYWJsZShfY29uZmlnLCB0ZW1wbGF0ZSwgaG9zdENlbGwsIGhvc3RSb3csIGhvc3RUYWJsZSwgZWRpdFN0YXVzSHRtbEVsZW0pIHtcbiAgICB2YXIgdmFsID0gZWRpdFN0YXVzSHRtbEVsZW0udmFsKCk7XG4gICAgdmFyIHJlc3VsdCA9IEVkaXRUYWJsZVZhbGlkYXRlLlZhbGlkYXRlKHZhbCwgdGVtcGxhdGUpO1xuXG4gICAgaWYgKHJlc3VsdC5TdWNjZXNzKSB7XG4gICAgICBob3N0VGFibGUuZmluZChcIltyZW5kZXJlcj1FZGl0VGFibGVfRmllbGROYW1lXVwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlcml0ZW0gPSAkKHRoaXMpO1xuICAgICAgICBzZXJpdGVtLmZpbmQoXCJsYWJlbFwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgbGFiZWxpdGVtID0gJCh0aGlzKTtcblxuICAgICAgICAgIGlmIChsYWJlbGl0ZW0udGV4dCgpID09IHZhbCB8fCBsYWJlbGl0ZW0udGV4dCgpID09IHZhbC50b1VwcGVyQ2FzZSgpKSB7XG4gICAgICAgICAgICByZXN1bHQgPSB7XG4gICAgICAgICAgICAgIFN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICBNc2c6IFwiW+Wtl+auteWQjeensF3kuI3og73ph43lpI0hXCJcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbn07IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBFZGl0VGFibGVfU2VsZWN0RGVmYXVsdFZhbHVlID0ge1xuICBHZXRfRWRpdFN0YXR1c19IdG1sRWxlbTogZnVuY3Rpb24gR2V0X0VkaXRTdGF0dXNfSHRtbEVsZW0oX2NvbmZpZywgdGVtcGxhdGUsIGhvc3RDZWxsLCBob3N0Um93LCBob3N0VGFibGUsIHZpZXdTdGF1c0h0bWxFbGVtLCBqc29uRGF0YXMsIGpzb25EYXRhU2luZ2xlKSB7XG4gICAgdmFyIGZpZWxkRGVmYXVsdFR5cGUgPSBcIlwiO1xuICAgIHZhciBmaWVsZERlZmF1bHRWYWx1ZSA9IFwiXCI7XG4gICAgdmFyIGZpZWxkRGVmYXVsdFRleHQgPSBcIlwiO1xuXG4gICAgaWYgKGpzb25EYXRhU2luZ2xlICE9IG51bGwgJiYganNvbkRhdGFTaW5nbGUgIT0gdW5kZWZpbmVkKSB7XG4gICAgICBmaWVsZERlZmF1bHRUeXBlID0ganNvbkRhdGFTaW5nbGVbXCJmaWVsZERlZmF1bHRUeXBlXCJdID8ganNvbkRhdGFTaW5nbGVbXCJmaWVsZERlZmF1bHRUeXBlXCJdIDogXCJcIjtcbiAgICAgIGZpZWxkRGVmYXVsdFZhbHVlID0ganNvbkRhdGFTaW5nbGVbXCJmaWVsZERlZmF1bHRWYWx1ZVwiXSA/IGpzb25EYXRhU2luZ2xlW1wiZmllbGREZWZhdWx0VmFsdWVcIl0gOiBcIlwiO1xuICAgICAgZmllbGREZWZhdWx0VGV4dCA9IGpzb25EYXRhU2luZ2xlW1wiZmllbGREZWZhdWx0VGV4dFwiXSA/IGpzb25EYXRhU2luZ2xlW1wiZmllbGREZWZhdWx0VGV4dFwiXSA6IFwiXCI7XG4gICAgfVxuXG4gICAgaWYgKHZpZXdTdGF1c0h0bWxFbGVtICE9IG51bGwgJiYgdmlld1N0YXVzSHRtbEVsZW0gIT0gdW5kZWZpbmVkKSB7XG4gICAgICB2aWV3U3RhdXNIdG1sRWxlbS5maW5kKFwibGFiZWxcIikuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmICgkKHRoaXMpLmF0dHIoXCJCaW5kTmFtZVwiKSA9PSBcImZpZWxkRGVmYXVsdFR5cGVcIikge1xuICAgICAgICAgIGZpZWxkRGVmYXVsdFR5cGUgPSAkKHRoaXMpLmF0dHIoXCJWYWx1ZVwiKTtcbiAgICAgICAgfSBlbHNlIGlmICgkKHRoaXMpLmF0dHIoXCJCaW5kTmFtZVwiKSA9PSBcImZpZWxkRGVmYXVsdFRleHRcIikge1xuICAgICAgICAgIGZpZWxkRGVmYXVsdFRleHQgPSAkKHRoaXMpLmF0dHIoXCJWYWx1ZVwiKTtcbiAgICAgICAgfSBlbHNlIGlmICgkKHRoaXMpLmF0dHIoXCJCaW5kTmFtZVwiKSA9PSBcImZpZWxkRGVmYXVsdFZhbHVlXCIpIHtcbiAgICAgICAgICBmaWVsZERlZmF1bHRWYWx1ZSA9ICQodGhpcykuYXR0cihcIlZhbHVlXCIpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB2YXIgJGVsZW0gPSAkKFwiPGRpdj48L2Rpdj5cIik7XG4gICAgdmFyICRpbnB1dFR4dCA9ICQoXCI8aW5wdXQgdHlwZT0ndGV4dCcgc3R5bGU9J3dpZHRoOiA5MCUnIHJlYWRvbmx5IC8+XCIpO1xuICAgICRpbnB1dFR4dC5hdHRyKFwiZmllbGREZWZhdWx0VHlwZVwiLCBmaWVsZERlZmF1bHRUeXBlKTtcbiAgICAkaW5wdXRUeHQuYXR0cihcImZpZWxkRGVmYXVsdFZhbHVlXCIsIGZpZWxkRGVmYXVsdFZhbHVlKTtcbiAgICAkaW5wdXRUeHQuYXR0cihcImZpZWxkRGVmYXVsdFRleHRcIiwgZmllbGREZWZhdWx0VGV4dCk7XG4gICAgJGlucHV0VHh0LnZhbChKQnVpbGQ0RFNlbGVjdFZpZXcuU2VsZWN0RW52VmFyaWFibGUuZm9ybWF0VGV4dChmaWVsZERlZmF1bHRUeXBlLCBmaWVsZERlZmF1bHRUZXh0KSk7XG4gICAgdmFyICRpbnB1dEJ0biA9ICQoXCI8aW5wdXQgY2xhc3M9J25vcm1hbGJ1dHRvbi12MScgc3R5bGU9J21hcmdpbi1sZWZ0OiA0cHg7JyB0eXBlPSdidXR0b24nIHZhbHVlPScuLi4nLz5cIik7XG4gICAgJGVsZW0uYXBwZW5kKCRpbnB1dFR4dCkuYXBwZW5kKCRpbnB1dEJ0bik7XG4gICAgd2luZG93LiRUZW1wJElucHV0dHh0ID0gJGlucHV0VHh0O1xuICAgICRpbnB1dEJ0bi5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAod2luZG93LnRhYmxlRGVzaW9uKSB7XG4gICAgICAgIHRhYmxlRGVzaW9uLnNlbGVjdERlZmF1bHRWYWx1ZURpYWxvZ0JlZ2luKEVkaXRUYWJsZV9TZWxlY3REZWZhdWx0VmFsdWUsIG51bGwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd2luZG93LnBhcmVudC5saXN0RGVzaWduLnNlbGVjdERlZmF1bHRWYWx1ZURpYWxvZ0JlZ2luKHdpbmRvdywgbnVsbCk7XG4gICAgICAgIHdpbmRvdy5fU2VsZWN0QmluZE9iaiA9IHtcbiAgICAgICAgICBzZXRTZWxlY3RFbnZWYXJpYWJsZVJlc3VsdFZhbHVlOiBmdW5jdGlvbiBzZXRTZWxlY3RFbnZWYXJpYWJsZVJlc3VsdFZhbHVlKHJlc3VsdCkge1xuICAgICAgICAgICAgRWRpdFRhYmxlX1NlbGVjdERlZmF1bHRWYWx1ZS5zZXRTZWxlY3RFbnZWYXJpYWJsZVJlc3VsdFZhbHVlKHJlc3VsdCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiAkZWxlbTtcbiAgfSxcbiAgR2V0X0NvbXBsZXRlZFN0YXR1c19IdG1sRWxlbTogZnVuY3Rpb24gR2V0X0NvbXBsZXRlZFN0YXR1c19IdG1sRWxlbShfY29uZmlnLCB0ZW1wbGF0ZSwgaG9zdENlbGwsIGhvc3RSb3csIGhvc3RUYWJsZSwgZWRpdFN0YXVzSHRtbEVsZW0pIHtcbiAgICB2YXIgJGlucHV0VHh0ID0gZWRpdFN0YXVzSHRtbEVsZW0uZmluZChcImlucHV0W3R5cGU9J3RleHQnXVwiKTtcblxuICAgIGlmICgkaW5wdXRUeHQubGVuZ3RoID4gMCkge1xuICAgICAgdmFyIGRlZmF1bHRUeXBlID0gJGlucHV0VHh0LmF0dHIoXCJmaWVsZERlZmF1bHRUeXBlXCIpO1xuICAgICAgdmFyIGRlZmF1bHRWYWx1ZSA9ICRpbnB1dFR4dC5hdHRyKFwiZmllbGREZWZhdWx0VmFsdWVcIik7XG4gICAgICB2YXIgZGVmYXVsdFRleHQgPSAkaW5wdXRUeHQuYXR0cihcImZpZWxkRGVmYXVsdFRleHRcIik7XG4gICAgICB2YXIgJGVsZW0gPSAkKFwiPGRpdj48L2Rpdj5cIik7XG4gICAgICAkZWxlbS5hcHBlbmQoXCI8bGFiZWw+XCIgKyBKQnVpbGQ0RFNlbGVjdFZpZXcuU2VsZWN0RW52VmFyaWFibGUuZm9ybWF0VGV4dChkZWZhdWx0VHlwZSwgZGVmYXVsdFRleHQpICsgXCI8L2xhYmVsPlwiKTtcbiAgICAgICRlbGVtLmFwcGVuZChcIjxsYWJlbCBJc1NlcmlhbGl6ZT0ndHJ1ZScgQmluZE5hbWU9J2ZpZWxkRGVmYXVsdFR5cGUnIFZhbHVlPSdcIiArIGRlZmF1bHRUeXBlICsgXCInIHN0eWxlPSdkaXNwbGF5Om5vbmUnLz5cIik7XG4gICAgICAkZWxlbS5hcHBlbmQoXCI8bGFiZWwgSXNTZXJpYWxpemU9J3RydWUnIEJpbmROYW1lPSdmaWVsZERlZmF1bHRUZXh0JyBWYWx1ZT0nXCIgKyBkZWZhdWx0VGV4dCArIFwiJyBzdHlsZT0nZGlzcGxheTpub25lJy8+XCIpO1xuICAgICAgJGVsZW0uYXBwZW5kKFwiPGxhYmVsIElzU2VyaWFsaXplPSd0cnVlJyBCaW5kTmFtZT0nZmllbGREZWZhdWx0VmFsdWUnIFZhbHVlPSdcIiArIGRlZmF1bHRWYWx1ZSArIFwiJyBzdHlsZT0nZGlzcGxheTpub25lJy8+XCIpO1xuICAgICAgcmV0dXJuICRlbGVtO1xuICAgIH1cblxuICAgIHJldHVybiAkKFwiPGxhYmVsPjwvbGFiZWw+XCIpO1xuICB9LFxuICBWYWxpZGF0ZVRvQ29tcGxldGVkRW5hYmxlOiBmdW5jdGlvbiBWYWxpZGF0ZVRvQ29tcGxldGVkRW5hYmxlKF9jb25maWcsIHRlbXBsYXRlLCBob3N0Q2VsbCwgaG9zdFJvdywgaG9zdFRhYmxlLCBlZGl0U3RhdXNIdG1sRWxlbSkge1xuICAgIHZhciB2YWwgPSBlZGl0U3RhdXNIdG1sRWxlbS52YWwoKTtcbiAgICByZXR1cm4gRWRpdFRhYmxlVmFsaWRhdGUuVmFsaWRhdGUodmFsLCB0ZW1wbGF0ZSk7XG4gIH0sXG4gIHNldFNlbGVjdEVudlZhcmlhYmxlUmVzdWx0VmFsdWU6IGZ1bmN0aW9uIHNldFNlbGVjdEVudlZhcmlhYmxlUmVzdWx0VmFsdWUoZGVmYXVsdERhdGEpIHtcbiAgICB2YXIgJGlucHV0VHh0ID0gd2luZG93LiRUZW1wJElucHV0dHh0O1xuXG4gICAgaWYgKG51bGwgIT0gZGVmYXVsdERhdGEpIHtcbiAgICAgICRpbnB1dFR4dC5hdHRyKFwiZmllbGREZWZhdWx0VHlwZVwiLCBkZWZhdWx0RGF0YS5UeXBlKTtcbiAgICAgICRpbnB1dFR4dC5hdHRyKFwiZmllbGREZWZhdWx0VmFsdWVcIiwgZGVmYXVsdERhdGEuVmFsdWUpO1xuICAgICAgJGlucHV0VHh0LmF0dHIoXCJmaWVsZERlZmF1bHRUZXh0XCIsIGRlZmF1bHREYXRhLlRleHQpO1xuICAgICAgJGlucHV0VHh0LnZhbChKQnVpbGQ0RFNlbGVjdFZpZXcuU2VsZWN0RW52VmFyaWFibGUuZm9ybWF0VGV4dChkZWZhdWx0RGF0YS5UeXBlLCBkZWZhdWx0RGF0YS5UZXh0KSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICRpbnB1dFR4dC5hdHRyKFwiZmllbGREZWZhdWx0VHlwZVwiLCBcIlwiKTtcbiAgICAgICRpbnB1dFR4dC5hdHRyKFwiZmllbGREZWZhdWx0VmFsdWVcIiwgXCJcIik7XG4gICAgICAkaW5wdXRUeHQuYXR0cihcImZpZWxkRGVmYXVsdFRleHRcIiwgXCJcIik7XG4gICAgICAkaW5wdXRUeHQudmFsKFwiXCIpO1xuICAgIH1cbiAgfVxufTsiLCJcInVzZSBzdHJpY3RcIjtcblxudmFyIEVkaXRUYWJsZV9TZWxlY3RGaWVsZFR5cGVEYXRhTG9hZGVyID0ge1xuICBfZmllbGREYXRhVHlwZUFycmF5OiBudWxsLFxuICBHZXRGaWVsZERhdGFUeXBlQXJyYXk6IGZ1bmN0aW9uIEdldEZpZWxkRGF0YVR5cGVBcnJheSgpIHtcbiAgICBpZiAodGhpcy5fZmllbGREYXRhVHlwZUFycmF5ID09IG51bGwpIHtcbiAgICAgIHZhciBfc2VsZiA9IHRoaXM7XG5cbiAgICAgIEFqYXhVdGlsaXR5LlBvc3RTeW5jKFwiL1Jlc3QvQnVpbGRlci9EYXRhU3RvcmFnZS9EYXRhQmFzZS9UYWJsZS9HZXRUYWJsZUZpZWxkVHlwZVwiLCB7fSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgaWYgKGRhdGEuc3VjY2VzcyA9PSB0cnVlKSB7XG4gICAgICAgICAgdmFyIGxpc3QgPSBKc29uVXRpbGl0eS5TdHJpbmdUb0pzb24oZGF0YS5kYXRhKTtcblxuICAgICAgICAgIGlmIChsaXN0ICE9IG51bGwgJiYgbGlzdCAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIF9zZWxmLl9maWVsZERhdGFUeXBlQXJyYXkgPSBsaXN0O1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBEaWFsb2dVdGlsaXR5LkFsZXJ0KHdpbmRvdywgXCJBbGVydExvYWRpbmdRdWVyeUVycm9yXCIsIHt9LCBcIuWKoOi9veWtl+auteexu+Wei+Wksei0pe+8gVwiLCBudWxsKTtcbiAgICAgICAgfVxuICAgICAgfSwgdGhpcyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2ZpZWxkRGF0YVR5cGVBcnJheTtcbiAgfSxcbiAgR2V0RmllbGREYXRhVHlwZU9iamVjdEJ5VmFsdWU6IGZ1bmN0aW9uIEdldEZpZWxkRGF0YVR5cGVPYmplY3RCeVZhbHVlKFZhbHVlKSB7XG4gICAgdmFyIGFycmF5RGF0YSA9IHRoaXMuR2V0RmllbGREYXRhVHlwZUFycmF5KCk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFycmF5RGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIG9iaiA9IGFycmF5RGF0YVtpXTtcblxuICAgICAgaWYgKG9iai5WYWx1ZSA9PSBWYWx1ZSkge1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgfVxuICAgIH1cblxuICAgIGFsZXJ0KFwi5om+5LiN5Yiw5oyH5a6a55qE5pWw5o2u57G75Z6L77yM6K+356Gu6K6k5piv5ZCm5pSv5oyB6K+l57G75Z6L77yBXCIpO1xuICB9LFxuICBHZXRGaWVsZERhdGFUeXBlT2JqZWN0QnlUZXh0OiBmdW5jdGlvbiBHZXRGaWVsZERhdGFUeXBlT2JqZWN0QnlUZXh0KHRleHQpIHtcbiAgICB2YXIgYXJyYXlEYXRhID0gdGhpcy5HZXRGaWVsZERhdGFUeXBlQXJyYXkoKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJyYXlEYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgb2JqID0gYXJyYXlEYXRhW2ldO1xuXG4gICAgICBpZiAob2JqLlRleHQgPT0gdGV4dCkge1xuICAgICAgICByZXR1cm4gb2JqO1xuICAgICAgfVxuICAgIH1cblxuICAgIGFsZXJ0KFwi5om+5LiN5Yiw5oyH5a6a55qE5pWw5o2u57G75Z6L77yM6K+356Gu6K6k5piv5ZCm5pSv5oyB6K+l57G75Z6L77yBXCIpO1xuICB9XG59O1xudmFyIEVkaXRUYWJsZV9TZWxlY3RGaWVsZFR5cGUgPSB7XG4gIEdldF9FZGl0U3RhdHVzX0h0bWxFbGVtOiBmdW5jdGlvbiBHZXRfRWRpdFN0YXR1c19IdG1sRWxlbShfY29uZmlnLCB0ZW1wbGF0ZSwgaG9zdENlbGwsIGhvc3RSb3csIGhvc3RUYWJsZSwgdmlld1N0YXVzSHRtbEVsZW0sIGpzb25EYXRhcywganNvbkRhdGFTaW5nbGUpIHtcbiAgICB2YXIgdmFsID0gXCJcIjtcbiAgICB2YXIgJGVsZW0gPSAkKFwiPHNlbGVjdCAvPlwiKTtcblxuICAgIGlmIChqc29uRGF0YVNpbmdsZSAhPSBudWxsICYmIGpzb25EYXRhU2luZ2xlICE9IHVuZGVmaW5lZCkge1xuICAgICAgdmFsID0ganNvbkRhdGFTaW5nbGVbXCJmaWVsZERhdGFUeXBlXCJdO1xuICAgIH1cblxuICAgIGlmICh2aWV3U3RhdXNIdG1sRWxlbSAhPSBudWxsICYmIHZpZXdTdGF1c0h0bWxFbGVtICE9IHVuZGVmaW5lZCkge1xuICAgICAgdmFsID0gdmlld1N0YXVzSHRtbEVsZW0uYXR0cihcIlZhbHVlXCIpO1xuICAgIH1cblxuICAgIHZhciBfZmllbGREYXRhVHlwZUFycmF5ID0gRWRpdFRhYmxlX1NlbGVjdEZpZWxkVHlwZURhdGFMb2FkZXIuR2V0RmllbGREYXRhVHlwZUFycmF5KCk7XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IF9maWVsZERhdGFUeXBlQXJyYXkubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciB2YWx1ZSA9IF9maWVsZERhdGFUeXBlQXJyYXlbaV0uVmFsdWU7XG4gICAgICB2YXIgdGV4dCA9IF9maWVsZERhdGFUeXBlQXJyYXlbaV0uVGV4dDtcbiAgICAgICRlbGVtLmFwcGVuZChcIjxvcHRpb24gdmFsdWU9J1wiICsgdmFsdWUgKyBcIic+XCIgKyB0ZXh0ICsgXCI8L29wdGlvbj5cIik7XG4gICAgfVxuXG4gICAgaWYgKHZhbCAhPSBcIlwiKSB7XG4gICAgICAkZWxlbS52YWwodmFsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJGVsZW0udmFsKEVkaXRUYWJsZV9TZWxlY3RGaWVsZFR5cGVEYXRhTG9hZGVyLkdldEZpZWxkRGF0YVR5cGVPYmplY3RCeVRleHQoXCLlrZfnrKbkuLJcIikuVmFsdWUpO1xuICAgIH1cblxuICAgICRlbGVtLmNoYW5nZShmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgdmFsID0gJCh0aGlzKS52YWwoKTtcblxuICAgICAgaWYgKHZhbCA9PSBcIuaVtOaVsFwiKSB7XG4gICAgICAgICQoaG9zdENlbGwpLm5leHQoKS5maW5kKFwiaW5wdXRcIikuYXR0cihcImRpc2FibGVkXCIsIHRydWUpO1xuICAgICAgICAkKGhvc3RDZWxsKS5uZXh0KCkuZmluZChcImlucHV0XCIpLnZhbCgwKTtcbiAgICAgICAgJChob3N0Q2VsbCkubmV4dCgpLm5leHQoKS5maW5kKFwiaW5wdXRcIikuYXR0cihcImRpc2FibGVkXCIsIHRydWUpO1xuICAgICAgICAkKGhvc3RDZWxsKS5uZXh0KCkubmV4dCgpLmZpbmQoXCJpbnB1dFwiKS52YWwoMCk7XG4gICAgICB9IGVsc2UgaWYgKHZhbCA9PSBcIuWwj+aVsFwiKSB7XG4gICAgICAgICQoaG9zdENlbGwpLm5leHQoKS5maW5kKFwiaW5wdXRcIikuYXR0cihcImRpc2FibGVkXCIsIGZhbHNlKTtcbiAgICAgICAgJChob3N0Q2VsbCkubmV4dCgpLmZpbmQoXCJpbnB1dFwiKS52YWwoMTApO1xuICAgICAgICAkKGhvc3RDZWxsKS5uZXh0KCkubmV4dCgpLmZpbmQoXCJpbnB1dFwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgZmFsc2UpO1xuICAgICAgICAkKGhvc3RDZWxsKS5uZXh0KCkubmV4dCgpLmZpbmQoXCJpbnB1dFwiKS52YWwoMik7XG4gICAgICB9IGVsc2UgaWYgKHZhbCA9PSBcIuaXpeacn+aXtumXtFwiKSB7XG4gICAgICAgICQoaG9zdENlbGwpLm5leHQoKS5maW5kKFwiaW5wdXRcIikuYXR0cihcImRpc2FibGVkXCIsIHRydWUpO1xuICAgICAgICAkKGhvc3RDZWxsKS5uZXh0KCkuZmluZChcImlucHV0XCIpLnZhbCgyMCk7XG4gICAgICAgICQoaG9zdENlbGwpLm5leHQoKS5uZXh0KCkuZmluZChcImlucHV0XCIpLmF0dHIoXCJkaXNhYmxlZFwiLCB0cnVlKTtcbiAgICAgICAgJChob3N0Q2VsbCkubmV4dCgpLm5leHQoKS5maW5kKFwiaW5wdXRcIikudmFsKDApO1xuICAgICAgfSBlbHNlIGlmICh2YWwgPT0gXCLlrZfnrKbkuLJcIikge1xuICAgICAgICAkKGhvc3RDZWxsKS5uZXh0KCkuZmluZChcImlucHV0XCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBmYWxzZSk7XG4gICAgICAgICQoaG9zdENlbGwpLm5leHQoKS5maW5kKFwiaW5wdXRcIikudmFsKDUwKTtcbiAgICAgICAgJChob3N0Q2VsbCkubmV4dCgpLm5leHQoKS5maW5kKFwiaW5wdXRcIikuYXR0cihcImRpc2FibGVkXCIsIHRydWUpO1xuICAgICAgICAkKGhvc3RDZWxsKS5uZXh0KCkubmV4dCgpLmZpbmQoXCJpbnB1dFwiKS52YWwoMCk7XG4gICAgICB9IGVsc2UgaWYgKHZhbCA9PSBcIumVv+Wtl+espuS4slwiKSB7XG4gICAgICAgICQoaG9zdENlbGwpLm5leHQoKS5maW5kKFwiaW5wdXRcIikuYXR0cihcImRpc2FibGVkXCIsIHRydWUpO1xuICAgICAgICAkKGhvc3RDZWxsKS5uZXh0KCkuZmluZChcImlucHV0XCIpLnZhbCgwKTtcbiAgICAgICAgJChob3N0Q2VsbCkubmV4dCgpLm5leHQoKS5maW5kKFwiaW5wdXRcIikuYXR0cihcImRpc2FibGVkXCIsIHRydWUpO1xuICAgICAgICAkKGhvc3RDZWxsKS5uZXh0KCkubmV4dCgpLmZpbmQoXCJpbnB1dFwiKS52YWwoMCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuICRlbGVtO1xuICB9LFxuICBHZXRfQ29tcGxldGVkU3RhdHVzX0h0bWxFbGVtOiBmdW5jdGlvbiBHZXRfQ29tcGxldGVkU3RhdHVzX0h0bWxFbGVtKF9jb25maWcsIHRlbXBsYXRlLCBob3N0Q2VsbCwgaG9zdFJvdywgaG9zdFRhYmxlLCBlZGl0U3RhdXNIdG1sRWxlbSkge1xuICAgIHZhciB2YWx1ZSA9IGVkaXRTdGF1c0h0bWxFbGVtLnZhbCgpO1xuICAgIHZhciB0ZXh0ID0gRWRpdFRhYmxlX1NlbGVjdEZpZWxkVHlwZURhdGFMb2FkZXIuR2V0RmllbGREYXRhVHlwZU9iamVjdEJ5VmFsdWUodmFsdWUpLlRleHQ7XG4gICAgdmFyICRlbGVtID0gJChcIjxsYWJlbCBJc1NlcmlhbGl6ZT0ndHJ1ZScgQmluZE5hbWU9J1wiICsgdGVtcGxhdGUuQmluZE5hbWUgKyBcIicgVmFsdWU9J1wiICsgdmFsdWUgKyBcIic+XCIgKyB0ZXh0ICsgXCI8L2xhYmVsPlwiKTtcbiAgICByZXR1cm4gJGVsZW07XG4gIH0sXG4gIFZhbGlkYXRlVG9Db21wbGV0ZWRFbmFibGU6IGZ1bmN0aW9uIFZhbGlkYXRlVG9Db21wbGV0ZWRFbmFibGUoX2NvbmZpZywgdGVtcGxhdGUsIGhvc3RDZWxsLCBob3N0Um93LCBob3N0VGFibGUsIGVkaXRTdGF1c0h0bWxFbGVtKSB7XG4gICAgdmFyIHZhbCA9IGVkaXRTdGF1c0h0bWxFbGVtLnZhbCgpO1xuICAgIHJldHVybiBFZGl0VGFibGVWYWxpZGF0ZS5WYWxpZGF0ZSh2YWwsIHRlbXBsYXRlKTtcbiAgfVxufTsiXX0=
