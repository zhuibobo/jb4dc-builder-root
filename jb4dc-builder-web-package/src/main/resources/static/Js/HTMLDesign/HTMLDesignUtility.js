"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var CKEditorPluginUtility=function(){function s(){_classCallCheck(this,s)}return _createClass(s,null,[{key:"AddPluginsServerConfig",value:function(e,t,i,n,o,r,l,a,s,u,d,c,m,f){this.PluginsServerConfig[e]={SingleName:e,ToolbarLocation:t,ToolbarLabel:i,ClientResolve:n,ServerResolve:o,ClientResolveJs:r,DialogWidth:l,DialogHeight:a,IsJBuild4DCData:s,ControlCategory:u,ServerDynamicBind:d,ShowRemoveButton:c,ShowInEditorToolbar:m,EnableChildControls:f}}},{key:"_UseServerConfigCoverEmptyPluginProp",value:function(e){var t=this.PluginsServerConfig[e.SingleName];if(t){for(var i in e)"function"!=typeof e[i]&&(""!=e[i]&&null!=e[i]||t[i]&&(e[i]=t[i]));return e}return null}},{key:"GetGeneralPluginInstance",value:function(e,t){var i={SingleName:e,DialogName:"",DialogWidth:null,DialogHeight:null,DialogPageUrl:BaseUtility.AppendTimeStampUrl("Dialog.html"),DialogTitle:"DIV",ToolbarCommand:"",ToolbarIcon:"Icon.png",ToolbarLabel:"",ToolbarLocation:"",IFrameWindow:null,IFrameExecuteActionName:"Insert",DesignModalInputCss:"",ClientResolve:"",ServerResolve:"",IsJBuild4DCData:"",ControlCategory:"",ServerDynamicBind:"",ShowRemoveButton:"",ShowInEditorToolbar:"",EnableChildControls:""};return i=$.extend(!0,{},i,t),null!=(i=s._UseServerConfigCoverEmptyPluginProp(i))?(i.DialogName=i.SingleName,i.ToolbarCommand="JBuild4DC.FormDesign.Plugins."+i.SingleName,i.DialogSettingTitle=i.ToolbarLabel+"Web控件",{Setting:i}):{}}},{key:"GetEnableChildControls",value:function(e){return this.Plugins[e].Setting.EnableChildControls}},{key:"GetPlugins",value:function(){return this.Plugins}},{key:"RegGeneralPluginToEditor",value:function(t,e,i,n){CKEDITOR.dialog.addIframe(i.DialogName,i.DialogSettingTitle,e+i.DialogPageUrl,i.DialogWidth,i.DialogHeight,function(){var e=document.getElementById(this._.frameId);i.IFrameWindow=e,s.SetElemPropsInEditDialog(i.IFrameWindow,i.IFrameExecuteActionName)},{onOk:function(){var e=i.IFrameWindow.contentWindow.DialogApp.getControlProps();if(0==e.success)return!1;n(t,i,e,i.IFrameWindow.contentWindow),i.IFrameExecuteActionName=s.DialogExecuteInsertActionName},onCancel:function(){i.IFrameExecuteActionName=s.DialogExecuteInsertActionName}}),t.addCommand(i.ToolbarCommand,new CKEDITOR.dialogCommand(i.DialogName)),"true"==i.ShowInEditorToolbar&&t.ui.addButton(i.SingleName,{label:i.ToolbarLabel,icon:e+i.ToolbarIcon,command:i.ToolbarCommand,toolbar:i.ToolbarLocation}),t.on("doubleclick",function(e){i.IFrameExecuteActionName=s.DialogExecuteEditActionName,s.OnCKWysiwygElemDBClickEvent(e,i)})}},{key:"OnCKWysiwygElemDBClickEvent",value:function(e,t){var i=e.data.element;"true"==i.getAttribute("runtime_auto_remove")&&(i=e.data.element.getParent()),i.getAttribute("singleName")==t.SingleName&&(CKEditorUtility.SetSelectedElem(i.getOuterHtml()),e.data.dialog=t.DialogName)}},{key:"SerializePropsToElem",value:function(e,t,i){if(e.setAttribute("jbuild4dc_custom","true"),e.setAttribute("singlename",i.SingleName),e.setAttribute("is_jbuild4dc_data",i.IsJBuild4DCData),e.setAttribute("control_category",i.ControlCategory),e.setAttribute("show_remove_button",i.ShowRemoveButton),t.baseInfo)for(var n in t.baseInfo)"readonly"==n?"readonly"==t.baseInfo[n]?e.setAttribute(n.toLocaleLowerCase(),t.baseInfo[n]):e.removeAttribute("readonly"):"disabled"==n?"disabled"==t.baseInfo[n]?e.setAttribute(n.toLocaleLowerCase(),t.baseInfo[n]):e.removeAttribute("disabled"):e.setAttribute(n.toLocaleLowerCase(),t.baseInfo[n]);if(t.bindToField)for(var n in t.bindToField)e.setAttribute(n.toLocaleLowerCase(),t.bindToField[n]);if(t.defaultValue)for(var n in t.defaultValue)e.setAttribute(n.toLocaleLowerCase(),t.defaultValue[n]);if(t.validateRules&&t.validateRules.rules&&0<t.validateRules.rules.length&&e.setAttribute("validaterules",encodeURIComponent(JsonUtility.JsonToString(t.validateRules))),t.normalProps)for(var n in t.normalProps)e.setAttribute(n.toLocaleLowerCase(),t.normalProps[n]);if(t.bindToSearchField)for(var n in t.bindToSearchField)e.setAttribute(n.toLocaleLowerCase(),t.bindToSearchField[n]);return e}},{key:"DeserializePropsFromElem",value:function(e){var t={},o=$(e);function i(e,t){var i={};for(var n in this.DefaultProps[t])o.attr(n)?i[n]=o.attr(n):i[n]=this.DefaultProps[t][n];return e[t]=i,e}return t=i.call(this,t,"baseInfo"),t=i.call(this,t,"bindToField"),t=i.call(this,t,"defaultValue"),t=i.call(this,t,"bindToSearchField"),o.attr("validateRules")&&(t.validateRules=JsonUtility.StringToJson(decodeURIComponent(o.attr("validateRules")))),t}},{key:"BuildGeneralElemToCKWysiwyg",value:function(e,t,i,n){if(this.ValidateBuildEnable(e,t,i,n))if(t.IFrameExecuteActionName==s.DialogExecuteInsertActionName){var o=CKEDITOR.dom.element.createFromHtml(e);this.SerializePropsToElem(o,i,t),CKEditorUtility.GetCKEditorInst().insertElement(o),CKEditorUtility.SingleElemBindDefaultEvent(o)}else{var r=CKEditorUtility.GetSelectedCKEditorElem();if(r){var l=new CKEDITOR.dom.element.createFromHtml(r.getOuterHtml());if("InputControl"==l.getAttribute("control_category")){var a=$(e).text();l.setText(a)}r.copyAttributes(l,{temp:"temp"}),this.SerializePropsToElem(l,i,t),l.replace(r),CKEditorUtility.SingleElemBindDefaultEvent(l)}}}},{key:"ValidateBuildEnable",value:function(e,t,i,n){return!0}},{key:"ValidateSerializeControlDialogCompletedEnable",value:function(e){return"true"==e.baseInfo.serialize&&""==e.bindToField.fieldName?(DialogUtility.Alert(window,DialogUtility.DialogAlertId,{},"序列化的控件必须绑定字段!",null),{success:!1}):e}},{key:"SetElemPropsInEditDialog",value:function(e,t){var i=CKEditorUtility.GetCKEditorInst().getSelection().getStartElement(),n=null;if(i&&(n=i.getParents()),e.contentWindow.DialogApp.ready(t,i,n),t==this.DialogExecuteEditActionName){var o=CKEditorUtility.GetSelectedElem().outerHTML(),r=this.DeserializePropsFromElem(o);e.contentWindow.DialogApp.setControlProps($(o),r)}}},{key:"GetControlDescText",value:function(e,t){return"["+e.ToolbarLabel+"] 绑定:["+t.bindToField.tableCaption+"-"+t.bindToField.fieldCaption+"]"}},{key:"GetSearchControlDescText",value:function(e,t){return"["+e.ToolbarLabel+"] 绑定:["+t.bindToSearchField.columnCaption+"]("+t.bindToSearchField.columnOperator+")"}},{key:"GetAutoRemoveTipLabel",value:function(e){return e||(e="双击编辑该部件"),'<div runtime_auto_remove="true" class="wysiwyg-auto-remove-tip">'+e+"</div>"}},{key:"TryGetListButtonsInPluginPage",value:function(){var i=[],e=CKEditorUtility.GetCKEditorHTMLInPluginPage();return $(e).find("[buttoncaption]").each(function(){var e=$(this).attr("buttoncaption"),t=$(this).attr("id");i.push({buttonCaption:e,buttonId:t})}),i}},{key:"TryGetDataSetId",value:function(e,t){if(e)for(var i=t.length-1;i--;0<=i)if(null!=t[i].getAttribute("datasetid")&&""!=t[i].getAttribute("datasetid"))return t[i].getAttribute("datasetid");return this.dataSetId?null:window.parent.listDesign.listResourceEntity.listDatasetId}}]),s}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}_defineProperty(CKEditorPluginUtility,"PluginsServerConfig",{}),_defineProperty(CKEditorPluginUtility,"Plugins",{}),_defineProperty(CKEditorPluginUtility,"DefaultProps",{bindToField:{tableId:"",tableName:"",tableCaption:"",fieldName:"",fieldCaption:"",fieldDataType:"",fieldLength:""},defaultValue:{defaultType:"",defaultValue:"",defaultText:""},validateRules:{msg:"",rules:[]},baseInfo:{id:"",serialize:"true",name:"",className:"",placeholder:"",custReadonly:"noreadonly",custDisabled:"nodisabled",style:"",desc:"",status:"enable"},bindToSearchField:{columnTitle:"",columnTableName:"",columnName:"",columnCaption:"",columnDataTypeName:"",columnOperator:"匹配"}}),_defineProperty(CKEditorPluginUtility,"DialogExecuteEditActionName","Edit"),_defineProperty(CKEditorPluginUtility,"DialogExecuteInsertActionName","Insert");var CKEditorUtility=function(){function S(){_classCallCheck(this,S)}return _createClass(S,null,[{key:"SetSelectedElem",value:function(e){this._$CKEditorSelectElem=$(e)}},{key:"GetSelectedElem",value:function(){return this._$CKEditorSelectElem&&0<this._$CKEditorSelectElem.length?this._$CKEditorSelectElem:null}},{key:"GetSelectedCKEditorElem",value:function(){if(this.GetSelectedElem()){var e=this.GetSelectedElem().attr("id");return this.GetCKEditorInst().document.getById(e)}return null}},{key:"GetCKEditorInst",value:function(){return this._CKEditorInst}},{key:"SetCKEditorInst",value:function(e){this._CKEditorInst=e}},{key:"GetCKEditorHTML",value:function(){return this.ClearALLForDivElemButton(),this.GetCKEditorInst().getData()}},{key:"SetCKEditorHTML",value:function(e){this.GetCKEditorInst().setData(e),window.setTimeout(function(){S.ALLElemBindDefaultEvent()},500)}},{key:"GetCKEditorHTMLInPluginPage",value:function(){return window.parent.CKEditorUtility.GetCKEditorHTML()}},{key:"InitializeCKEditor",value:function(e,t,i,n,o,r){for(var l=new Array,a=0;a<t.length;a++){var s=t[a],u=s.singleName,d=s.toolbarLocation,c=s.text,m=s.serverResolve,f=s.clientResolve,g=s.clientResolveJs,E=s.dialogWidth,C=s.dialogHeight,v=s.isJBuild4DCData,y=s.controlCategory,h=s.serverDynamicBind,b=s.showRemoveButton,p=s.showInEditorToolbar,T=s.enableChildControls,I=u+"Plugin.js",D=o+u+"/";CKEDITOR.plugins.addExternal(u,D,I),l.push(u),CKEditorPluginUtility.AddPluginsServerConfig(u,d,c,f,m,g,E,C,v,y,h,b,p,T)}this.SetThemeVo(r);var P=BaseUtility.AppendTimeStampUrl(n);CKEDITOR.replace(e,{customConfig:P,extraPlugins:l.join(",")}),CKEDITOR.instances.html_design.on("beforePaste",function(e){}),CKEDITOR.instances.html_design.on("paste",function(t){var i=t.data.dataValue;try{var e=$(i);e.find(".del-button").remove(),1==e.find("div").length&&(t.data.dataValue=e.find("div").attr("id","ct_copy_"+StringUtility.Timestamp()).outerHTML())}catch(e){console.log("黏贴异常,还原HTML"),t.data.dataValue=i}}),CKEDITOR.instances.html_design.on("afterPaste",function(e){S.ALLElemBindDefaultEvent()}),CKEDITOR.instances.html_design.on("insertElement",function(e){}),CKEDITOR.instances.html_design.on("insertHtml",function(e){}),CKEDITOR.instances.html_design.on("selectionChange",function(e){e.data.selection.getSelectedElement();for(var t="",i=0;i<e.data.path.elements.length;i++){var n=e.data.path.elements[i].getAttribute("singlename");if(n){t=n;break}}t&&(console.log(CKEditorPluginUtility.Plugins),S.DisplayPluginControls(CKEditorPluginUtility.GetEnableChildControls(t)))}),this.SetCKEditorInst(CKEDITOR.instances.html_design),CKEDITOR.on("instanceReady",function(e){"function"==typeof i&&i()})}},{key:"DisplayPluginControls",value:function(e){if($(".cke_button").show(),"*"!=e){console.log(e);var t=CKEditorPluginUtility.GetPlugins();for(var i in t){var n=t[i].Setting.SingleName;$(".cke_button__"+StringUtility.ToLowerCase(n)).hide()}for(var o=e.split(";"),r=0;r<o.length;r++){n=o[r];$(".cke_button__"+StringUtility.ToLowerCase(n)).show()}}}},{key:"GetThemeVo",value:function(){return this._ThemeVo}},{key:"SetThemeVo",value:function(e){this._ThemeVo=e,this.ResetRootElemTheme(e)}},{key:"ResetRootElemTheme",value:function(e){if(this.GetCKEditorInst()){var t=this.GetCKEditorHTML();if(null!=t&&""!=t){var i=$(t);if(0<i.length){var n=i.attr("class").split(/\s+/);$.each(n,function(e,t){0<=t.indexOf("html-design-theme-")&&i.removeClass(t)}),i.addClass(e.rootElemClass),this.SetCKEditorHTML(i.outerHTML())}}}}},{key:"ClearALLForDivElemButton",value:function(){for(var e=S.GetCKEditorInst().document.find(".del-button"),t=0;t<e.count();t++)e.getItem(t).remove()}},{key:"SingleElemBindDefaultEvent",value:function(i){"true"==i.getAttribute("show_remove_button")&&i.on("click",function(){S.GetCKEditorInst().getSelection().selectElement(this),S.SetSelectedElem(this.getOuterHtml()),S.ClearALLForDivElemButton();var e=new CKEDITOR.dom.element("div");e.addClass("del-button"),i.append(e),e.on("click",function(e){i.remove();var t=e.data;t.preventDefault(),t.stopPropagation()})})}},{key:"ALLElemBindDefaultEvent",value:function(){for(var e=S.GetCKEditorInst().document.getBody().getElementsByTag("*"),t=0;t<e.count();++t){var i=e.getItem(t);this.SingleElemBindDefaultEvent(i)}}}]),S}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}_defineProperty(CKEditorUtility,"_$CKEditorSelectElem",null),_defineProperty(CKEditorUtility,"_CKEditorInst",null),_defineProperty(CKEditorUtility,"_ThemeVo",null);var HTMLEditorUtility=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"GetHTMLEditorInst",value:function(){return this._HTMLEditorInst}},{key:"SetHTMLEditorHTML",value:function(e){if(!StringUtility.IsNullOrEmpty(e)){this.GetHTMLEditorInst().setValue(e),CodeMirror.commands.selectAll(this.GetHTMLEditorInst());var t={from:this.GetHTMLEditorInst().getCursor(!0),to:this.GetHTMLEditorInst().getCursor(!1)};this.GetHTMLEditorInst().autoFormatRange(t.from,t.to);this.GetHTMLEditorInst().getDoc().eachLine(function(e){});var i=CKEditorUtility.GetSelectedElem(),n="";i&&(n=i.outerHTML().split(">")[0]);var o=this.GetHTMLEditorInst().getSearchCursor(n);o.findNext(),o.from()&&o.to()&&this.GetHTMLEditorInst().getDoc().setSelection(o.from(),o.to())}}},{key:"GetHtmlEditorHTML",value:function(){return this.GetHTMLEditorInst().getValue()}},{key:"InitializeHTMLCodeDesign",value:function(){this._HTMLEditorInst=CodeMirror.fromTextArea(document.getElementById("TextAreaHTMLEditor"),{mode:{name:"htmlmixed",scriptTypes:[{matches:/\/x-handlebars-template|\/x-mustache/i,mode:null},{matches:/(text|application)\/(x-)?vb(a|script)/i,mode:"vbscript"}]},selectionPointer:!0,theme:"monokai",foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],lineNumbers:!0,lineWrapping:!0}),this._HTMLEditorInst.setSize("100%",PageStyleUtility.GetWindowHeight()-85)}}]),e}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}_defineProperty(HTMLEditorUtility,"_HTMLEditorInst",null);var JsEditorUtility=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"_GetNewFormJsString",value:function(){return"<script>var FormPageObjectInstance={data:{userEntity:{},formEntity:[],config:[]},pageReady:function(){},bindRecordDataReady:function(){},validateEveryFromControl:function(controlObj){}}<\/script>"}},{key:"GetJsEditorInst",value:function(){return this._JsEditorInst}},{key:"SetJsEditorJs",value:function(e){this.GetJsEditorInst().setValue(e)}},{key:"GetJsEditorJs",value:function(){return this.GetJsEditorInst().getValue()}},{key:"InitializeJsCodeDesign",value:function(e){if(this._JsEditorInst=CodeMirror.fromTextArea($("#TextAreaJsEditor")[0],{mode:"application/ld+json",lineNumbers:!0,lineWrapping:!0,extraKeys:{"Ctrl-Q":function(e){e.foldCode(e.getCursor())}},foldGutter:!0,smartIndent:!0,matchBrackets:!0,theme:"monokai",gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]}),this._JsEditorInst.setSize("100%",PageStyleUtility.GetWindowHeight()-85),"add"==e){this.SetJsEditorJs(this._GetNewFormJsString()),CodeMirror.commands.selectAll(this.GetJsEditorInst());var t={from:this.GetJsEditorInst().getCursor(!0),to:this.GetJsEditorInst().getCursor(!1)};this.GetJsEditorInst().autoFormatRange(t.from,t.to)}}}]),e}();_defineProperty(JsEditorUtility,"_JsEditorInst",null);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNLRWRpdG9yUGx1Z2luVXRpbGl0eS5qcyIsIkNLRWRpdG9yVXRpbGl0eS5qcyIsIkhUTUxFZGl0b3JVdGlsaXR5LmpzIiwiSnNFZGl0b3JVdGlsaXR5LmpzIl0sIm5hbWVzIjpbIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiaSIsImxlbmd0aCIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImtleSIsIl9jcmVhdGVDbGFzcyIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsInByb3RvdHlwZSIsIl9kZWZpbmVQcm9wZXJ0eSIsIm9iaiIsInZhbHVlIiwiQ0tFZGl0b3JQbHVnaW5VdGlsaXR5IiwidGhpcyIsInNpbmdsZU5hbWUiLCJ0b29sYmFyTG9jYXRpb24iLCJ0ZXh0IiwiY2xpZW50UmVzb2x2ZSIsInNlcnZlclJlc29sdmUiLCJjbGllbnRSZXNvbHZlSnMiLCJkaWFsb2dXaWR0aCIsImRpYWxvZ0hlaWdodCIsImlzSkJ1aWxkNERDRGF0YSIsImNvbnRyb2xDYXRlZ29yeSIsInNlcnZlckR5bmFtaWNCaW5kIiwic2hvd1JlbW92ZUJ1dHRvbiIsInNob3dJbkVkaXRvclRvb2xiYXIiLCJlbmFibGVDaGlsZENvbnRyb2xzIiwiUGx1Z2luc1NlcnZlckNvbmZpZyIsIlNpbmdsZU5hbWUiLCJUb29sYmFyTG9jYXRpb24iLCJUb29sYmFyTGFiZWwiLCJDbGllbnRSZXNvbHZlIiwiU2VydmVyUmVzb2x2ZSIsIkNsaWVudFJlc29sdmVKcyIsIkRpYWxvZ1dpZHRoIiwiRGlhbG9nSGVpZ2h0IiwiSXNKQnVpbGQ0RENEYXRhIiwiQ29udHJvbENhdGVnb3J5IiwiU2VydmVyRHluYW1pY0JpbmQiLCJTaG93UmVtb3ZlQnV0dG9uIiwiU2hvd0luRWRpdG9yVG9vbGJhciIsIkVuYWJsZUNoaWxkQ29udHJvbHMiLCJjb3Zlck9iaiIsInByb3AiLCJwbHVnaW5TaW5nbGVOYW1lIiwiZXhDb25maWciLCJkZWZhdWx0U2V0dGluZyIsIkRpYWxvZ05hbWUiLCJEaWFsb2dQYWdlVXJsIiwiQmFzZVV0aWxpdHkiLCJBcHBlbmRUaW1lU3RhbXBVcmwiLCJEaWFsb2dUaXRsZSIsIlRvb2xiYXJDb21tYW5kIiwiVG9vbGJhckljb24iLCJJRnJhbWVXaW5kb3ciLCJJRnJhbWVFeGVjdXRlQWN0aW9uTmFtZSIsIkRlc2lnbk1vZGFsSW5wdXRDc3MiLCIkIiwiZXh0ZW5kIiwiX1VzZVNlcnZlckNvbmZpZ0NvdmVyRW1wdHlQbHVnaW5Qcm9wIiwiRGlhbG9nU2V0dGluZ1RpdGxlIiwiU2V0dGluZyIsIlBsdWdpbnMiLCJja0VkaXRvciIsInBhdGgiLCJwbHVnaW5TZXR0aW5nIiwib2tGdW5jIiwiQ0tFRElUT1IiLCJkaWFsb2ciLCJhZGRJZnJhbWUiLCJpZnJhbWUiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiXyIsImZyYW1lSWQiLCJTZXRFbGVtUHJvcHNJbkVkaXREaWFsb2ciLCJvbk9rIiwiY29udGVudFdpbmRvdyIsIkRpYWxvZ0FwcCIsImdldENvbnRyb2xQcm9wcyIsInN1Y2Nlc3MiLCJEaWFsb2dFeGVjdXRlSW5zZXJ0QWN0aW9uTmFtZSIsIm9uQ2FuY2VsIiwiYWRkQ29tbWFuZCIsImRpYWxvZ0NvbW1hbmQiLCJ1aSIsImFkZEJ1dHRvbiIsImxhYmVsIiwiaWNvbiIsImNvbW1hbmQiLCJ0b29sYmFyIiwib24iLCJldmVudCIsIkRpYWxvZ0V4ZWN1dGVFZGl0QWN0aW9uTmFtZSIsIk9uQ0tXeXNpd3lnRWxlbURCQ2xpY2tFdmVudCIsImNvbnRyb2xTZXR0aW5nIiwiZWxlbWVudCIsImRhdGEiLCJnZXRBdHRyaWJ1dGUiLCJnZXRQYXJlbnQiLCJDS0VkaXRvclV0aWxpdHkiLCJTZXRTZWxlY3RlZEVsZW0iLCJnZXRPdXRlckh0bWwiLCJlbGVtIiwic2V0QXR0cmlidXRlIiwidG9Mb2NhbGVMb3dlckNhc2UiLCJyZW1vdmVBdHRyaWJ1dGUiLCJydWxlcyIsImVuY29kZVVSSUNvbXBvbmVudCIsIkpzb25VdGlsaXR5IiwiSnNvblRvU3RyaW5nIiwiJGVsZW0iLCJhdHRyVG9Qcm9wIiwiZ3JvdXBOYW1lIiwiZ3JvdXBQcm9wIiwiRGVmYXVsdFByb3BzIiwiYXR0ciIsImNhbGwiLCJ2YWxpZGF0ZVJ1bGVzIiwiU3RyaW5nVG9Kc29uIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiaHRtbCIsImNvbnRyb2xQcm9wcyIsIl9pZnJhbWUiLCJWYWxpZGF0ZUJ1aWxkRW5hYmxlIiwiZG9tIiwiY3JlYXRlRnJvbUh0bWwiLCJTZXJpYWxpemVQcm9wc1RvRWxlbSIsIkdldENLRWRpdG9ySW5zdCIsImluc2VydEVsZW1lbnQiLCJTaW5nbGVFbGVtQmluZERlZmF1bHRFdmVudCIsInNlbGVjdGVkRWxlbSIsIkdldFNlbGVjdGVkQ0tFZGl0b3JFbGVtIiwicmVGcmVzaEVsZW0iLCJuZXdUZXh0Iiwic2V0VGV4dCIsImNvcHlBdHRyaWJ1dGVzIiwidGVtcCIsInJlcGxhY2UiLCJyZXR1cm5SZXN1bHQiLCJiYXNlSW5mbyIsInNlcmlhbGl6ZSIsImJpbmRUb0ZpZWxkIiwiZmllbGROYW1lIiwiRGlhbG9nVXRpbGl0eSIsIkFsZXJ0Iiwid2luZG93IiwiRGlhbG9nQWxlcnRJZCIsImlmcmFtZU9iaiIsImFjdGlvbk5hbWUiLCJzZWwiLCJnZXRTZWxlY3Rpb24iLCJnZXRTdGFydEVsZW1lbnQiLCJwYXJlbnRzIiwiZ2V0UGFyZW50cyIsInJlYWR5IiwiR2V0U2VsZWN0ZWRFbGVtIiwib3V0ZXJIVE1MIiwiRGVzZXJpYWxpemVQcm9wc0Zyb21FbGVtIiwic2V0Q29udHJvbFByb3BzIiwidGFibGVDYXB0aW9uIiwiZmllbGRDYXB0aW9uIiwiYmluZFRvU2VhcmNoRmllbGQiLCJjb2x1bW5DYXB0aW9uIiwiY29sdW1uT3BlcmF0b3IiLCJ0aXBNc2ciLCJidXR0b25zIiwiR2V0Q0tFZGl0b3JIVE1MSW5QbHVnaW5QYWdlIiwiZmluZCIsImVhY2giLCJidXR0b25DYXB0aW9uIiwiYnV0dG9uSWQiLCJwdXNoIiwiZGF0YVNldElkIiwicGFyZW50IiwibGlzdERlc2lnbiIsImxpc3RSZXNvdXJjZUVudGl0eSIsImxpc3REYXRhc2V0SWQiLCJ0YWJsZUlkIiwidGFibGVOYW1lIiwiZmllbGREYXRhVHlwZSIsImZpZWxkTGVuZ3RoIiwiZGVmYXVsdFZhbHVlIiwiZGVmYXVsdFR5cGUiLCJkZWZhdWx0VGV4dCIsIm1zZyIsImlkIiwibmFtZSIsImNsYXNzTmFtZSIsInBsYWNlaG9sZGVyIiwiY3VzdFJlYWRvbmx5IiwiY3VzdERpc2FibGVkIiwic3R5bGUiLCJkZXNjIiwic3RhdHVzIiwiY29sdW1uVGl0bGUiLCJjb2x1bW5UYWJsZU5hbWUiLCJjb2x1bW5OYW1lIiwiY29sdW1uRGF0YVR5cGVOYW1lIiwiZWxlbUh0bWwiLCJfJENLRWRpdG9yU2VsZWN0RWxlbSIsImdldEJ5SWQiLCJfQ0tFZGl0b3JJbnN0IiwiaW5zdCIsIkNsZWFyQUxMRm9yRGl2RWxlbUJ1dHRvbiIsImdldERhdGEiLCJzZXREYXRhIiwic2V0VGltZW91dCIsIkFMTEVsZW1CaW5kRGVmYXVsdEV2ZW50IiwiR2V0Q0tFZGl0b3JIVE1MIiwidGV4dEFyZWFFbGVtSWQiLCJwbHVnaW5zQ29uZmlnIiwibG9hZENvbXBsZXRlZEZ1bmMiLCJja2VkaXRvckNvbmZpZ0Z1bGxQYXRoIiwicGx1Z2luQmFzZVBhdGgiLCJ0aGVtZVZvIiwiZXh0cmFQbHVnaW5zIiwiQXJyYXkiLCJzaW5nbGVQbHVnaW5Db25maWciLCJwbHVnaW5GaWxlTmFtZSIsInBsdWdpbkZvbGRlck5hbWUiLCJwbHVnaW5zIiwiYWRkRXh0ZXJuYWwiLCJBZGRQbHVnaW5zU2VydmVyQ29uZmlnIiwiU2V0VGhlbWVWbyIsImVkaXRvckNvbmZpZ1VybCIsImN1c3RvbUNvbmZpZyIsImpvaW4iLCJpbnN0YW5jZXMiLCJodG1sX2Rlc2lnbiIsInNvdXJjZUhUTUwiLCJkYXRhVmFsdWUiLCIkc291cmNlSFRNTCIsInJlbW92ZSIsIlN0cmluZ1V0aWxpdHkiLCJUaW1lc3RhbXAiLCJlIiwiY29uc29sZSIsImxvZyIsInNlbGVjdGlvbiIsImdldFNlbGVjdGVkRWxlbWVudCIsImxhc3RDdXN0U2luZ2xlTmFtZSIsImVsZW1lbnRzIiwiRGlzcGxheVBsdWdpbkNvbnRyb2xzIiwiR2V0RW5hYmxlQ2hpbGRDb250cm9scyIsIlNldENLRWRpdG9ySW5zdCIsInNob3ciLCJHZXRQbHVnaW5zIiwiVG9Mb3dlckNhc2UiLCJoaWRlIiwiZW5hYmxlUGx1Z2lucyIsInNwbGl0IiwiX1RoZW1lVm8iLCJfdGhlbWVWbyIsIlJlc2V0Um9vdEVsZW1UaGVtZSIsInJvb3RFbGVtIiwiY2xhc3NMaXN0IiwiaW5kZXgiLCJpdGVtIiwiaW5kZXhPZiIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJyb290RWxlbUNsYXNzIiwiU2V0Q0tFZGl0b3JIVE1MIiwib2xkRGVsQnV0dG9ucyIsImNvdW50IiwiZ2V0SXRlbSIsInNlbGVjdEVsZW1lbnQiLCJuZXdEZWxCdXR0b24iLCJhcHBlbmQiLCJldiIsImRvbUV2ZW50IiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJnZXRCb2R5IiwiZ2V0RWxlbWVudHNCeVRhZyIsIkhUTUxFZGl0b3JVdGlsaXR5IiwiX0hUTUxFZGl0b3JJbnN0IiwiSXNOdWxsT3JFbXB0eSIsIkdldEhUTUxFZGl0b3JJbnN0Iiwic2V0VmFsdWUiLCJDb2RlTWlycm9yIiwiY29tbWFuZHMiLCJyYW5nZSIsImZyb20iLCJnZXRDdXJzb3IiLCJ0byIsImF1dG9Gb3JtYXRSYW5nZSIsImdldERvYyIsImVhY2hMaW5lIiwibGluZSIsInNlYXJjaEhUTUwiLCJjdXJzb3IiLCJnZXRTZWFyY2hDdXJzb3IiLCJmaW5kTmV4dCIsInNldFNlbGVjdGlvbiIsImdldFZhbHVlIiwiZnJvbVRleHRBcmVhIiwibW9kZSIsInNjcmlwdFR5cGVzIiwibWF0Y2hlcyIsInNlbGVjdGlvblBvaW50ZXIiLCJ0aGVtZSIsImZvbGRHdXR0ZXIiLCJndXR0ZXJzIiwibGluZU51bWJlcnMiLCJsaW5lV3JhcHBpbmciLCJzZXRTaXplIiwiUGFnZVN0eWxlVXRpbGl0eSIsIkdldFdpbmRvd0hlaWdodCIsIkpzRWRpdG9yVXRpbGl0eSIsIl9Kc0VkaXRvckluc3QiLCJqcyIsIkdldEpzRWRpdG9ySW5zdCIsImV4dHJhS2V5cyIsIkN0cmwtUSIsImNtIiwiZm9sZENvZGUiLCJzbWFydEluZGVudCIsIm1hdGNoQnJhY2tldHMiLCJTZXRKc0VkaXRvckpzIiwiX0dldE5ld0Zvcm1Kc1N0cmluZyJdLCJtYXBwaW5ncyI6IkFBQUEsYUFFQSxTQUFBQSxnQkFBQUMsRUFBQUMsR0FBQSxLQUFBRCxhQUFBQyxHQUFBLE1BQUEsSUFBQUMsVUFBQSxxQ0FFQSxTQUFBQyxrQkFBQUMsRUFBQUMsR0FBQSxJQUFBLElBQUFDLEVBQUEsRUFBQUEsRUFBQUQsRUFBQUUsT0FBQUQsSUFBQSxDQUFBLElBQUFFLEVBQUFILEVBQUFDLEdBQUFFLEVBQUFDLFdBQUFELEVBQUFDLGFBQUEsRUFBQUQsRUFBQUUsY0FBQSxFQUFBLFVBQUFGLElBQUFBLEVBQUFHLFVBQUEsR0FBQUMsT0FBQUMsZUFBQVQsRUFBQUksRUFBQU0sSUFBQU4sSUFFQSxTQUFBTyxhQUFBZCxFQUFBZSxFQUFBQyxHQUFBLE9BQUFELEdBQUFiLGtCQUFBRixFQUFBaUIsVUFBQUYsR0FBQUMsR0FBQWQsa0JBQUFGLEVBQUFnQixHQUFBaEIsRUFFQSxTQUFBa0IsZ0JBQUFDLEVBQUFOLEVBQUFPLEdBQUEsT0FBQVAsS0FBQU0sRUFBQVIsT0FBQUMsZUFBQU8sRUFBQU4sRUFBQSxDQUFBTyxNQUFBQSxFQUFBWixZQUFBLEVBQUFDLGNBQUEsRUFBQUMsVUFBQSxJQUFBUyxFQUFBTixHQUFBTyxFQUFBRCxFQUVBLElBQUFFLHNCQUFBLFdBQ0EsU0FBQUEsSUFDQXZCLGdCQUFBd0IsS0FBQUQsR0EwV0EsT0F2V0FQLGFBQUFPLEVBQUEsS0FBQSxDQUFBLENBQ0FSLElB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IlwidXNlIHN0cmljdFwiO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbnZhciBDS0VkaXRvclBsdWdpblV0aWxpdHkgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIENLRWRpdG9yUGx1Z2luVXRpbGl0eSgpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ0tFZGl0b3JQbHVnaW5VdGlsaXR5KTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhDS0VkaXRvclBsdWdpblV0aWxpdHksIG51bGwsIFt7XG4gICAga2V5OiBcIkFkZFBsdWdpbnNTZXJ2ZXJDb25maWdcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gQWRkUGx1Z2luc1NlcnZlckNvbmZpZyhzaW5nbGVOYW1lLCB0b29sYmFyTG9jYXRpb24sIHRleHQsIGNsaWVudFJlc29sdmUsIHNlcnZlclJlc29sdmUsIGNsaWVudFJlc29sdmVKcywgZGlhbG9nV2lkdGgsIGRpYWxvZ0hlaWdodCwgaXNKQnVpbGQ0RENEYXRhLCBjb250cm9sQ2F0ZWdvcnksIHNlcnZlckR5bmFtaWNCaW5kLCBzaG93UmVtb3ZlQnV0dG9uLCBzaG93SW5FZGl0b3JUb29sYmFyLCBlbmFibGVDaGlsZENvbnRyb2xzKSB7XG4gICAgICB0aGlzLlBsdWdpbnNTZXJ2ZXJDb25maWdbc2luZ2xlTmFtZV0gPSB7XG4gICAgICAgIFNpbmdsZU5hbWU6IHNpbmdsZU5hbWUsXG4gICAgICAgIFRvb2xiYXJMb2NhdGlvbjogdG9vbGJhckxvY2F0aW9uLFxuICAgICAgICBUb29sYmFyTGFiZWw6IHRleHQsXG4gICAgICAgIENsaWVudFJlc29sdmU6IGNsaWVudFJlc29sdmUsXG4gICAgICAgIFNlcnZlclJlc29sdmU6IHNlcnZlclJlc29sdmUsXG4gICAgICAgIENsaWVudFJlc29sdmVKczogY2xpZW50UmVzb2x2ZUpzLFxuICAgICAgICBEaWFsb2dXaWR0aDogZGlhbG9nV2lkdGgsXG4gICAgICAgIERpYWxvZ0hlaWdodDogZGlhbG9nSGVpZ2h0LFxuICAgICAgICBJc0pCdWlsZDREQ0RhdGE6IGlzSkJ1aWxkNERDRGF0YSxcbiAgICAgICAgQ29udHJvbENhdGVnb3J5OiBjb250cm9sQ2F0ZWdvcnksXG4gICAgICAgIFNlcnZlckR5bmFtaWNCaW5kOiBzZXJ2ZXJEeW5hbWljQmluZCxcbiAgICAgICAgU2hvd1JlbW92ZUJ1dHRvbjogc2hvd1JlbW92ZUJ1dHRvbixcbiAgICAgICAgU2hvd0luRWRpdG9yVG9vbGJhcjogc2hvd0luRWRpdG9yVG9vbGJhcixcbiAgICAgICAgRW5hYmxlQ2hpbGRDb250cm9sczogZW5hYmxlQ2hpbGRDb250cm9sc1xuICAgICAgfTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiX1VzZVNlcnZlckNvbmZpZ0NvdmVyRW1wdHlQbHVnaW5Qcm9wXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIF9Vc2VTZXJ2ZXJDb25maWdDb3ZlckVtcHR5UGx1Z2luUHJvcChvYmopIHtcbiAgICAgIHZhciBjb3Zlck9iaiA9IHRoaXMuUGx1Z2luc1NlcnZlckNvbmZpZ1tvYmouU2luZ2xlTmFtZV07XG5cbiAgICAgIGlmIChjb3Zlck9iaikge1xuICAgICAgICBmb3IgKHZhciBwcm9wIGluIG9iaikge1xuICAgICAgICAgIGlmICh0eXBlb2Ygb2JqW3Byb3BdICE9IFwiZnVuY3Rpb25cIikge1xuICAgICAgICAgICAgaWYgKG9ialtwcm9wXSA9PSBcIlwiIHx8IG9ialtwcm9wXSA9PSBudWxsKSB7XG4gICAgICAgICAgICAgIGlmIChjb3Zlck9ialtwcm9wXSkge1xuICAgICAgICAgICAgICAgIG9ialtwcm9wXSA9IGNvdmVyT2JqW3Byb3BdO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIG9iajtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIkdldEdlbmVyYWxQbHVnaW5JbnN0YW5jZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBHZXRHZW5lcmFsUGx1Z2luSW5zdGFuY2UocGx1Z2luU2luZ2xlTmFtZSwgZXhDb25maWcpIHtcbiAgICAgIHZhciBkZWZhdWx0U2V0dGluZyA9IHtcbiAgICAgICAgU2luZ2xlTmFtZTogcGx1Z2luU2luZ2xlTmFtZSxcbiAgICAgICAgRGlhbG9nTmFtZTogJycsXG4gICAgICAgIERpYWxvZ1dpZHRoOiBudWxsLFxuICAgICAgICBEaWFsb2dIZWlnaHQ6IG51bGwsXG4gICAgICAgIERpYWxvZ1BhZ2VVcmw6IEJhc2VVdGlsaXR5LkFwcGVuZFRpbWVTdGFtcFVybCgnRGlhbG9nLmh0bWwnKSxcbiAgICAgICAgRGlhbG9nVGl0bGU6IFwiRElWXCIsXG4gICAgICAgIFRvb2xiYXJDb21tYW5kOiAnJyxcbiAgICAgICAgVG9vbGJhckljb246ICdJY29uLnBuZycsXG4gICAgICAgIFRvb2xiYXJMYWJlbDogXCJcIixcbiAgICAgICAgVG9vbGJhckxvY2F0aW9uOiAnJyxcbiAgICAgICAgSUZyYW1lV2luZG93OiBudWxsLFxuICAgICAgICBJRnJhbWVFeGVjdXRlQWN0aW9uTmFtZTogXCJJbnNlcnRcIixcbiAgICAgICAgRGVzaWduTW9kYWxJbnB1dENzczogXCJcIixcbiAgICAgICAgQ2xpZW50UmVzb2x2ZTogXCJcIixcbiAgICAgICAgU2VydmVyUmVzb2x2ZTogXCJcIixcbiAgICAgICAgSXNKQnVpbGQ0RENEYXRhOiBcIlwiLFxuICAgICAgICBDb250cm9sQ2F0ZWdvcnk6IFwiXCIsXG4gICAgICAgIFNlcnZlckR5bmFtaWNCaW5kOiBcIlwiLFxuICAgICAgICBTaG93UmVtb3ZlQnV0dG9uOiBcIlwiLFxuICAgICAgICBTaG93SW5FZGl0b3JUb29sYmFyOiBcIlwiLFxuICAgICAgICBFbmFibGVDaGlsZENvbnRyb2xzOiBcIlwiXG4gICAgICB9O1xuICAgICAgZGVmYXVsdFNldHRpbmcgPSAkLmV4dGVuZCh0cnVlLCB7fSwgZGVmYXVsdFNldHRpbmcsIGV4Q29uZmlnKTtcbiAgICAgIGRlZmF1bHRTZXR0aW5nID0gQ0tFZGl0b3JQbHVnaW5VdGlsaXR5Ll9Vc2VTZXJ2ZXJDb25maWdDb3ZlckVtcHR5UGx1Z2luUHJvcChkZWZhdWx0U2V0dGluZyk7XG5cbiAgICAgIGlmIChkZWZhdWx0U2V0dGluZyAhPSBudWxsKSB7XG4gICAgICAgIGRlZmF1bHRTZXR0aW5nLkRpYWxvZ05hbWUgPSBkZWZhdWx0U2V0dGluZy5TaW5nbGVOYW1lO1xuICAgICAgICBkZWZhdWx0U2V0dGluZy5Ub29sYmFyQ29tbWFuZCA9IFwiSkJ1aWxkNERDLkZvcm1EZXNpZ24uUGx1Z2lucy5cIiArIGRlZmF1bHRTZXR0aW5nLlNpbmdsZU5hbWU7XG4gICAgICAgIGRlZmF1bHRTZXR0aW5nLkRpYWxvZ1NldHRpbmdUaXRsZSA9IGRlZmF1bHRTZXR0aW5nLlRvb2xiYXJMYWJlbCArIFwiV2Vi5o6n5Lu2XCI7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgU2V0dGluZzogZGVmYXVsdFNldHRpbmdcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJHZXRFbmFibGVDaGlsZENvbnRyb2xzXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIEdldEVuYWJsZUNoaWxkQ29udHJvbHMoc2luZ2xlTmFtZSkge1xuICAgICAgcmV0dXJuIHRoaXMuUGx1Z2luc1tzaW5nbGVOYW1lXS5TZXR0aW5nLkVuYWJsZUNoaWxkQ29udHJvbHM7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIkdldFBsdWdpbnNcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gR2V0UGx1Z2lucygpIHtcbiAgICAgIHJldHVybiB0aGlzLlBsdWdpbnM7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIlJlZ0dlbmVyYWxQbHVnaW5Ub0VkaXRvclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBSZWdHZW5lcmFsUGx1Z2luVG9FZGl0b3IoY2tFZGl0b3IsIHBhdGgsIHBsdWdpblNldHRpbmcsIG9rRnVuYykge1xuICAgICAgQ0tFRElUT1IuZGlhbG9nLmFkZElmcmFtZShwbHVnaW5TZXR0aW5nLkRpYWxvZ05hbWUsIHBsdWdpblNldHRpbmcuRGlhbG9nU2V0dGluZ1RpdGxlLCBwYXRoICsgcGx1Z2luU2V0dGluZy5EaWFsb2dQYWdlVXJsLCBwbHVnaW5TZXR0aW5nLkRpYWxvZ1dpZHRoLCBwbHVnaW5TZXR0aW5nLkRpYWxvZ0hlaWdodCwgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgaWZyYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5fLmZyYW1lSWQpO1xuICAgICAgICBwbHVnaW5TZXR0aW5nLklGcmFtZVdpbmRvdyA9IGlmcmFtZTtcbiAgICAgICAgQ0tFZGl0b3JQbHVnaW5VdGlsaXR5LlNldEVsZW1Qcm9wc0luRWRpdERpYWxvZyhwbHVnaW5TZXR0aW5nLklGcmFtZVdpbmRvdywgcGx1Z2luU2V0dGluZy5JRnJhbWVFeGVjdXRlQWN0aW9uTmFtZSk7XG4gICAgICB9LCB7XG4gICAgICAgIG9uT2s6IGZ1bmN0aW9uIG9uT2soKSB7XG4gICAgICAgICAgdmFyIHByb3BzID0gcGx1Z2luU2V0dGluZy5JRnJhbWVXaW5kb3cuY29udGVudFdpbmRvdy5EaWFsb2dBcHAuZ2V0Q29udHJvbFByb3BzKCk7XG5cbiAgICAgICAgICBpZiAocHJvcHMuc3VjY2VzcyA9PSBmYWxzZSkge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG9rRnVuYyhja0VkaXRvciwgcGx1Z2luU2V0dGluZywgcHJvcHMsIHBsdWdpblNldHRpbmcuSUZyYW1lV2luZG93LmNvbnRlbnRXaW5kb3cpO1xuICAgICAgICAgIHBsdWdpblNldHRpbmcuSUZyYW1lRXhlY3V0ZUFjdGlvbk5hbWUgPSBDS0VkaXRvclBsdWdpblV0aWxpdHkuRGlhbG9nRXhlY3V0ZUluc2VydEFjdGlvbk5hbWU7XG4gICAgICAgIH0sXG4gICAgICAgIG9uQ2FuY2VsOiBmdW5jdGlvbiBvbkNhbmNlbCgpIHtcbiAgICAgICAgICBwbHVnaW5TZXR0aW5nLklGcmFtZUV4ZWN1dGVBY3Rpb25OYW1lID0gQ0tFZGl0b3JQbHVnaW5VdGlsaXR5LkRpYWxvZ0V4ZWN1dGVJbnNlcnRBY3Rpb25OYW1lO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGNrRWRpdG9yLmFkZENvbW1hbmQocGx1Z2luU2V0dGluZy5Ub29sYmFyQ29tbWFuZCwgbmV3IENLRURJVE9SLmRpYWxvZ0NvbW1hbmQocGx1Z2luU2V0dGluZy5EaWFsb2dOYW1lKSk7XG5cbiAgICAgIGlmIChwbHVnaW5TZXR0aW5nLlNob3dJbkVkaXRvclRvb2xiYXIgPT0gXCJ0cnVlXCIpIHtcbiAgICAgICAgY2tFZGl0b3IudWkuYWRkQnV0dG9uKHBsdWdpblNldHRpbmcuU2luZ2xlTmFtZSwge1xuICAgICAgICAgIGxhYmVsOiBwbHVnaW5TZXR0aW5nLlRvb2xiYXJMYWJlbCxcbiAgICAgICAgICBpY29uOiBwYXRoICsgcGx1Z2luU2V0dGluZy5Ub29sYmFySWNvbixcbiAgICAgICAgICBjb21tYW5kOiBwbHVnaW5TZXR0aW5nLlRvb2xiYXJDb21tYW5kLFxuICAgICAgICAgIHRvb2xiYXI6IHBsdWdpblNldHRpbmcuVG9vbGJhckxvY2F0aW9uXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBja0VkaXRvci5vbignZG91YmxlY2xpY2snLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgcGx1Z2luU2V0dGluZy5JRnJhbWVFeGVjdXRlQWN0aW9uTmFtZSA9IENLRWRpdG9yUGx1Z2luVXRpbGl0eS5EaWFsb2dFeGVjdXRlRWRpdEFjdGlvbk5hbWU7XG4gICAgICAgIENLRWRpdG9yUGx1Z2luVXRpbGl0eS5PbkNLV3lzaXd5Z0VsZW1EQkNsaWNrRXZlbnQoZXZlbnQsIHBsdWdpblNldHRpbmcpO1xuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIk9uQ0tXeXNpd3lnRWxlbURCQ2xpY2tFdmVudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBPbkNLV3lzaXd5Z0VsZW1EQkNsaWNrRXZlbnQoZXZlbnQsIGNvbnRyb2xTZXR0aW5nKSB7XG4gICAgICB2YXIgZWxlbWVudCA9IGV2ZW50LmRhdGEuZWxlbWVudDtcblxuICAgICAgaWYgKGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwicnVudGltZV9hdXRvX3JlbW92ZVwiKSA9PSBcInRydWVcIikge1xuICAgICAgICBlbGVtZW50ID0gZXZlbnQuZGF0YS5lbGVtZW50LmdldFBhcmVudCgpO1xuICAgICAgfVxuXG4gICAgICB2YXIgc2luZ2xlTmFtZSA9IGVsZW1lbnQuZ2V0QXR0cmlidXRlKFwic2luZ2xlTmFtZVwiKTtcblxuICAgICAgaWYgKHNpbmdsZU5hbWUgPT0gY29udHJvbFNldHRpbmcuU2luZ2xlTmFtZSkge1xuICAgICAgICBDS0VkaXRvclV0aWxpdHkuU2V0U2VsZWN0ZWRFbGVtKGVsZW1lbnQuZ2V0T3V0ZXJIdG1sKCkpO1xuICAgICAgICBldmVudC5kYXRhLmRpYWxvZyA9IGNvbnRyb2xTZXR0aW5nLkRpYWxvZ05hbWU7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIlNlcmlhbGl6ZVByb3BzVG9FbGVtXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIFNlcmlhbGl6ZVByb3BzVG9FbGVtKGVsZW0sIHByb3BzLCBjb250cm9sU2V0dGluZykge1xuICAgICAgZWxlbS5zZXRBdHRyaWJ1dGUoXCJqYnVpbGQ0ZGNfY3VzdG9tXCIsIFwidHJ1ZVwiKTtcbiAgICAgIGVsZW0uc2V0QXR0cmlidXRlKFwic2luZ2xlbmFtZVwiLCBjb250cm9sU2V0dGluZy5TaW5nbGVOYW1lKTtcbiAgICAgIGVsZW0uc2V0QXR0cmlidXRlKFwiaXNfamJ1aWxkNGRjX2RhdGFcIiwgY29udHJvbFNldHRpbmcuSXNKQnVpbGQ0RENEYXRhKTtcbiAgICAgIGVsZW0uc2V0QXR0cmlidXRlKFwiY29udHJvbF9jYXRlZ29yeVwiLCBjb250cm9sU2V0dGluZy5Db250cm9sQ2F0ZWdvcnkpO1xuICAgICAgZWxlbS5zZXRBdHRyaWJ1dGUoXCJzaG93X3JlbW92ZV9idXR0b25cIiwgY29udHJvbFNldHRpbmcuU2hvd1JlbW92ZUJ1dHRvbik7XG5cbiAgICAgIGlmIChwcm9wc1tcImJhc2VJbmZvXCJdKSB7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBwcm9wc1tcImJhc2VJbmZvXCJdKSB7XG4gICAgICAgICAgaWYgKGtleSA9PSBcInJlYWRvbmx5XCIpIHtcbiAgICAgICAgICAgIGlmIChwcm9wc1tcImJhc2VJbmZvXCJdW2tleV0gPT0gXCJyZWFkb25seVwiKSB7XG4gICAgICAgICAgICAgIGVsZW0uc2V0QXR0cmlidXRlKGtleS50b0xvY2FsZUxvd2VyQ2FzZSgpLCBwcm9wc1tcImJhc2VJbmZvXCJdW2tleV0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZWxlbS5yZW1vdmVBdHRyaWJ1dGUoXCJyZWFkb25seVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKGtleSA9PSBcImRpc2FibGVkXCIpIHtcbiAgICAgICAgICAgIGlmIChwcm9wc1tcImJhc2VJbmZvXCJdW2tleV0gPT0gXCJkaXNhYmxlZFwiKSB7XG4gICAgICAgICAgICAgIGVsZW0uc2V0QXR0cmlidXRlKGtleS50b0xvY2FsZUxvd2VyQ2FzZSgpLCBwcm9wc1tcImJhc2VJbmZvXCJdW2tleV0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgZWxlbS5yZW1vdmVBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZWxlbS5zZXRBdHRyaWJ1dGUoa2V5LnRvTG9jYWxlTG93ZXJDYXNlKCksIHByb3BzW1wiYmFzZUluZm9cIl1ba2V5XSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9wc1tcImJpbmRUb0ZpZWxkXCJdKSB7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBwcm9wc1tcImJpbmRUb0ZpZWxkXCJdKSB7XG4gICAgICAgICAgZWxlbS5zZXRBdHRyaWJ1dGUoa2V5LnRvTG9jYWxlTG93ZXJDYXNlKCksIHByb3BzW1wiYmluZFRvRmllbGRcIl1ba2V5XSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHByb3BzW1wiZGVmYXVsdFZhbHVlXCJdKSB7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBwcm9wc1tcImRlZmF1bHRWYWx1ZVwiXSkge1xuICAgICAgICAgIGVsZW0uc2V0QXR0cmlidXRlKGtleS50b0xvY2FsZUxvd2VyQ2FzZSgpLCBwcm9wc1tcImRlZmF1bHRWYWx1ZVwiXVtrZXldKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAocHJvcHNbXCJ2YWxpZGF0ZVJ1bGVzXCJdKSB7XG4gICAgICAgIGlmIChwcm9wc1tcInZhbGlkYXRlUnVsZXNcIl0ucnVsZXMpIHtcbiAgICAgICAgICBpZiAocHJvcHNbXCJ2YWxpZGF0ZVJ1bGVzXCJdLnJ1bGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGVsZW0uc2V0QXR0cmlidXRlKFwidmFsaWRhdGVydWxlc1wiLCBlbmNvZGVVUklDb21wb25lbnQoSnNvblV0aWxpdHkuSnNvblRvU3RyaW5nKHByb3BzW1widmFsaWRhdGVSdWxlc1wiXSkpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHByb3BzW1wibm9ybWFsUHJvcHNcIl0pIHtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHByb3BzW1wibm9ybWFsUHJvcHNcIl0pIHtcbiAgICAgICAgICBlbGVtLnNldEF0dHJpYnV0ZShrZXkudG9Mb2NhbGVMb3dlckNhc2UoKSwgcHJvcHNbXCJub3JtYWxQcm9wc1wiXVtrZXldKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAocHJvcHNbXCJiaW5kVG9TZWFyY2hGaWVsZFwiXSkge1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gcHJvcHNbXCJiaW5kVG9TZWFyY2hGaWVsZFwiXSkge1xuICAgICAgICAgIGVsZW0uc2V0QXR0cmlidXRlKGtleS50b0xvY2FsZUxvd2VyQ2FzZSgpLCBwcm9wc1tcImJpbmRUb1NlYXJjaEZpZWxkXCJdW2tleV0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBlbGVtO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJEZXNlcmlhbGl6ZVByb3BzRnJvbUVsZW1cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gRGVzZXJpYWxpemVQcm9wc0Zyb21FbGVtKGVsZW0pIHtcbiAgICAgIHZhciBwcm9wcyA9IHt9O1xuICAgICAgdmFyICRlbGVtID0gJChlbGVtKTtcblxuICAgICAgZnVuY3Rpb24gYXR0clRvUHJvcChwcm9wcywgZ3JvdXBOYW1lKSB7XG4gICAgICAgIHZhciBncm91cFByb3AgPSB7fTtcblxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5EZWZhdWx0UHJvcHNbZ3JvdXBOYW1lXSkge1xuICAgICAgICAgIGlmICgkZWxlbS5hdHRyKGtleSkpIHtcbiAgICAgICAgICAgIGdyb3VwUHJvcFtrZXldID0gJGVsZW0uYXR0cihrZXkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBncm91cFByb3Bba2V5XSA9IHRoaXMuRGVmYXVsdFByb3BzW2dyb3VwTmFtZV1ba2V5XTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBwcm9wc1tncm91cE5hbWVdID0gZ3JvdXBQcm9wO1xuICAgICAgICByZXR1cm4gcHJvcHM7XG4gICAgICB9XG5cbiAgICAgIHByb3BzID0gYXR0clRvUHJvcC5jYWxsKHRoaXMsIHByb3BzLCBcImJhc2VJbmZvXCIpO1xuICAgICAgcHJvcHMgPSBhdHRyVG9Qcm9wLmNhbGwodGhpcywgcHJvcHMsIFwiYmluZFRvRmllbGRcIik7XG4gICAgICBwcm9wcyA9IGF0dHJUb1Byb3AuY2FsbCh0aGlzLCBwcm9wcywgXCJkZWZhdWx0VmFsdWVcIik7XG4gICAgICBwcm9wcyA9IGF0dHJUb1Byb3AuY2FsbCh0aGlzLCBwcm9wcywgXCJiaW5kVG9TZWFyY2hGaWVsZFwiKTtcblxuICAgICAgaWYgKCRlbGVtLmF0dHIoXCJ2YWxpZGF0ZVJ1bGVzXCIpKSB7XG4gICAgICAgIHByb3BzLnZhbGlkYXRlUnVsZXMgPSBKc29uVXRpbGl0eS5TdHJpbmdUb0pzb24oZGVjb2RlVVJJQ29tcG9uZW50KCRlbGVtLmF0dHIoXCJ2YWxpZGF0ZVJ1bGVzXCIpKSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBwcm9wcztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiQnVpbGRHZW5lcmFsRWxlbVRvQ0tXeXNpd3lnXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIEJ1aWxkR2VuZXJhbEVsZW1Ub0NLV3lzaXd5ZyhodG1sLCBjb250cm9sU2V0dGluZywgY29udHJvbFByb3BzLCBfaWZyYW1lKSB7XG4gICAgICBpZiAodGhpcy5WYWxpZGF0ZUJ1aWxkRW5hYmxlKGh0bWwsIGNvbnRyb2xTZXR0aW5nLCBjb250cm9sUHJvcHMsIF9pZnJhbWUpKSB7XG4gICAgICAgIGlmIChjb250cm9sU2V0dGluZy5JRnJhbWVFeGVjdXRlQWN0aW9uTmFtZSA9PSBDS0VkaXRvclBsdWdpblV0aWxpdHkuRGlhbG9nRXhlY3V0ZUluc2VydEFjdGlvbk5hbWUpIHtcbiAgICAgICAgICB2YXIgZWxlbSA9IENLRURJVE9SLmRvbS5lbGVtZW50LmNyZWF0ZUZyb21IdG1sKGh0bWwpO1xuICAgICAgICAgIHRoaXMuU2VyaWFsaXplUHJvcHNUb0VsZW0oZWxlbSwgY29udHJvbFByb3BzLCBjb250cm9sU2V0dGluZyk7XG4gICAgICAgICAgQ0tFZGl0b3JVdGlsaXR5LkdldENLRWRpdG9ySW5zdCgpLmluc2VydEVsZW1lbnQoZWxlbSk7XG4gICAgICAgICAgQ0tFZGl0b3JVdGlsaXR5LlNpbmdsZUVsZW1CaW5kRGVmYXVsdEV2ZW50KGVsZW0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBzZWxlY3RlZEVsZW0gPSBDS0VkaXRvclV0aWxpdHkuR2V0U2VsZWN0ZWRDS0VkaXRvckVsZW0oKTtcblxuICAgICAgICAgIGlmIChzZWxlY3RlZEVsZW0pIHtcbiAgICAgICAgICAgIHZhciByZUZyZXNoRWxlbSA9IG5ldyBDS0VESVRPUi5kb20uZWxlbWVudC5jcmVhdGVGcm9tSHRtbChzZWxlY3RlZEVsZW0uZ2V0T3V0ZXJIdG1sKCkpO1xuXG4gICAgICAgICAgICBpZiAocmVGcmVzaEVsZW0uZ2V0QXR0cmlidXRlKFwiY29udHJvbF9jYXRlZ29yeVwiKSA9PSBcIklucHV0Q29udHJvbFwiKSB7XG4gICAgICAgICAgICAgIHZhciBuZXdUZXh0ID0gJChodG1sKS50ZXh0KCk7XG4gICAgICAgICAgICAgIHJlRnJlc2hFbGVtLnNldFRleHQobmV3VGV4dCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHNlbGVjdGVkRWxlbS5jb3B5QXR0cmlidXRlcyhyZUZyZXNoRWxlbSwge1xuICAgICAgICAgICAgICB0ZW1wOiBcInRlbXBcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aGlzLlNlcmlhbGl6ZVByb3BzVG9FbGVtKHJlRnJlc2hFbGVtLCBjb250cm9sUHJvcHMsIGNvbnRyb2xTZXR0aW5nKTtcbiAgICAgICAgICAgIHJlRnJlc2hFbGVtLnJlcGxhY2Uoc2VsZWN0ZWRFbGVtKTtcbiAgICAgICAgICAgIENLRWRpdG9yVXRpbGl0eS5TaW5nbGVFbGVtQmluZERlZmF1bHRFdmVudChyZUZyZXNoRWxlbSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIlZhbGlkYXRlQnVpbGRFbmFibGVcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gVmFsaWRhdGVCdWlsZEVuYWJsZShodG1sLCBjb250cm9sU2V0dGluZywgY29udHJvbFByb3BzLCBfaWZyYW1lKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiVmFsaWRhdGVTZXJpYWxpemVDb250cm9sRGlhbG9nQ29tcGxldGVkRW5hYmxlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIFZhbGlkYXRlU2VyaWFsaXplQ29udHJvbERpYWxvZ0NvbXBsZXRlZEVuYWJsZShyZXR1cm5SZXN1bHQpIHtcbiAgICAgIGlmIChyZXR1cm5SZXN1bHQuYmFzZUluZm8uc2VyaWFsaXplID09IFwidHJ1ZVwiICYmIHJldHVyblJlc3VsdC5iaW5kVG9GaWVsZC5maWVsZE5hbWUgPT0gXCJcIikge1xuICAgICAgICBEaWFsb2dVdGlsaXR5LkFsZXJ0KHdpbmRvdywgRGlhbG9nVXRpbGl0eS5EaWFsb2dBbGVydElkLCB7fSwgXCLluo/liJfljJbnmoTmjqfku7blv4Xpobvnu5HlrprlrZfmrrUhXCIsIG51bGwpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXR1cm5SZXN1bHQ7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIlNldEVsZW1Qcm9wc0luRWRpdERpYWxvZ1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBTZXRFbGVtUHJvcHNJbkVkaXREaWFsb2coaWZyYW1lT2JqLCBhY3Rpb25OYW1lKSB7XG4gICAgICB2YXIgc2VsID0gQ0tFZGl0b3JVdGlsaXR5LkdldENLRWRpdG9ySW5zdCgpLmdldFNlbGVjdGlvbigpLmdldFN0YXJ0RWxlbWVudCgpO1xuICAgICAgdmFyIHBhcmVudHMgPSBudWxsO1xuXG4gICAgICBpZiAoc2VsKSB7XG4gICAgICAgIHBhcmVudHMgPSBzZWwuZ2V0UGFyZW50cygpO1xuICAgICAgfVxuXG4gICAgICBpZnJhbWVPYmouY29udGVudFdpbmRvdy5EaWFsb2dBcHAucmVhZHkoYWN0aW9uTmFtZSwgc2VsLCBwYXJlbnRzKTtcblxuICAgICAgaWYgKGFjdGlvbk5hbWUgPT0gdGhpcy5EaWFsb2dFeGVjdXRlRWRpdEFjdGlvbk5hbWUpIHtcbiAgICAgICAgdmFyIGVsZW0gPSBDS0VkaXRvclV0aWxpdHkuR2V0U2VsZWN0ZWRFbGVtKCkub3V0ZXJIVE1MKCk7XG4gICAgICAgIHZhciBwcm9wcyA9IHRoaXMuRGVzZXJpYWxpemVQcm9wc0Zyb21FbGVtKGVsZW0pO1xuICAgICAgICBpZnJhbWVPYmouY29udGVudFdpbmRvdy5EaWFsb2dBcHAuc2V0Q29udHJvbFByb3BzKCQoZWxlbSksIHByb3BzKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiR2V0Q29udHJvbERlc2NUZXh0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIEdldENvbnRyb2xEZXNjVGV4dChwbHVnaW5TZXR0aW5nLCBwcm9wcykge1xuICAgICAgcmV0dXJuIFwiW1wiICsgcGx1Z2luU2V0dGluZy5Ub29sYmFyTGFiZWwgKyBcIl0g57uR5a6aOltcIiArIHByb3BzLmJpbmRUb0ZpZWxkLnRhYmxlQ2FwdGlvbiArIFwiLVwiICsgcHJvcHMuYmluZFRvRmllbGQuZmllbGRDYXB0aW9uICsgXCJdXCI7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIkdldFNlYXJjaENvbnRyb2xEZXNjVGV4dFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBHZXRTZWFyY2hDb250cm9sRGVzY1RleHQocGx1Z2luU2V0dGluZywgcHJvcHMpIHtcbiAgICAgIHJldHVybiBcIltcIiArIHBsdWdpblNldHRpbmcuVG9vbGJhckxhYmVsICsgXCJdIOe7keWumjpbXCIgKyBwcm9wcy5iaW5kVG9TZWFyY2hGaWVsZC5jb2x1bW5DYXB0aW9uICsgXCJdKFwiICsgcHJvcHMuYmluZFRvU2VhcmNoRmllbGQuY29sdW1uT3BlcmF0b3IgKyBcIilcIjtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiR2V0QXV0b1JlbW92ZVRpcExhYmVsXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIEdldEF1dG9SZW1vdmVUaXBMYWJlbCh0aXBNc2cpIHtcbiAgICAgIGlmICghdGlwTXNnKSB7XG4gICAgICAgIHRpcE1zZyA9IFwi5Y+M5Ye757yW6L6R6K+l6YOo5Lu2XCI7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiAnPGRpdiBydW50aW1lX2F1dG9fcmVtb3ZlPVwidHJ1ZVwiIGNsYXNzPVwid3lzaXd5Zy1hdXRvLXJlbW92ZS10aXBcIj4nICsgdGlwTXNnICsgJzwvZGl2Pic7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIlRyeUdldExpc3RCdXR0b25zSW5QbHVnaW5QYWdlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIFRyeUdldExpc3RCdXR0b25zSW5QbHVnaW5QYWdlKCkge1xuICAgICAgdmFyIGJ1dHRvbnMgPSBbXTtcbiAgICAgIHZhciBodG1sID0gQ0tFZGl0b3JVdGlsaXR5LkdldENLRWRpdG9ySFRNTEluUGx1Z2luUGFnZSgpO1xuICAgICAgdmFyICRidXR0b25zID0gJChodG1sKS5maW5kKFwiW2J1dHRvbmNhcHRpb25dXCIpO1xuICAgICAgJGJ1dHRvbnMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBidXR0b25DYXB0aW9uID0gJCh0aGlzKS5hdHRyKFwiYnV0dG9uY2FwdGlvblwiKTtcbiAgICAgICAgdmFyIGJ1dHRvbklkID0gJCh0aGlzKS5hdHRyKFwiaWRcIik7XG4gICAgICAgIGJ1dHRvbnMucHVzaCh7XG4gICAgICAgICAgYnV0dG9uQ2FwdGlvbjogYnV0dG9uQ2FwdGlvbixcbiAgICAgICAgICBidXR0b25JZDogYnV0dG9uSWRcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiBidXR0b25zO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJUcnlHZXREYXRhU2V0SWRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gVHJ5R2V0RGF0YVNldElkKHNlbCwgcGFyZW50cykge1xuICAgICAgaWYgKHNlbCkge1xuICAgICAgICBmb3IgKHZhciBpID0gcGFyZW50cy5sZW5ndGggLSAxOyBpLS07IGkgPj0gMCkge1xuICAgICAgICAgIGlmIChwYXJlbnRzW2ldLmdldEF0dHJpYnV0ZShcImRhdGFzZXRpZFwiKSAhPSBudWxsICYmIHBhcmVudHNbaV0uZ2V0QXR0cmlidXRlKFwiZGF0YXNldGlkXCIpICE9IFwiXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJlbnRzW2ldLmdldEF0dHJpYnV0ZShcImRhdGFzZXRpZFwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLmRhdGFTZXRJZCkge1xuICAgICAgICByZXR1cm4gd2luZG93LnBhcmVudC5saXN0RGVzaWduLmxpc3RSZXNvdXJjZUVudGl0eS5saXN0RGF0YXNldElkO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gQ0tFZGl0b3JQbHVnaW5VdGlsaXR5O1xufSgpO1xuXG5fZGVmaW5lUHJvcGVydHkoQ0tFZGl0b3JQbHVnaW5VdGlsaXR5LCBcIlBsdWdpbnNTZXJ2ZXJDb25maWdcIiwge30pO1xuXG5fZGVmaW5lUHJvcGVydHkoQ0tFZGl0b3JQbHVnaW5VdGlsaXR5LCBcIlBsdWdpbnNcIiwge30pO1xuXG5fZGVmaW5lUHJvcGVydHkoQ0tFZGl0b3JQbHVnaW5VdGlsaXR5LCBcIkRlZmF1bHRQcm9wc1wiLCB7XG4gIGJpbmRUb0ZpZWxkOiB7XG4gICAgdGFibGVJZDogXCJcIixcbiAgICB0YWJsZU5hbWU6IFwiXCIsXG4gICAgdGFibGVDYXB0aW9uOiBcIlwiLFxuICAgIGZpZWxkTmFtZTogXCJcIixcbiAgICBmaWVsZENhcHRpb246IFwiXCIsXG4gICAgZmllbGREYXRhVHlwZTogXCJcIixcbiAgICBmaWVsZExlbmd0aDogXCJcIlxuICB9LFxuICBkZWZhdWx0VmFsdWU6IHtcbiAgICBkZWZhdWx0VHlwZTogXCJcIixcbiAgICBkZWZhdWx0VmFsdWU6IFwiXCIsXG4gICAgZGVmYXVsdFRleHQ6IFwiXCJcbiAgfSxcbiAgdmFsaWRhdGVSdWxlczoge1xuICAgIG1zZzogXCJcIixcbiAgICBydWxlczogW11cbiAgfSxcbiAgYmFzZUluZm86IHtcbiAgICBpZDogXCJcIixcbiAgICBzZXJpYWxpemU6IFwidHJ1ZVwiLFxuICAgIG5hbWU6IFwiXCIsXG4gICAgY2xhc3NOYW1lOiBcIlwiLFxuICAgIHBsYWNlaG9sZGVyOiBcIlwiLFxuICAgIGN1c3RSZWFkb25seTogXCJub3JlYWRvbmx5XCIsXG4gICAgY3VzdERpc2FibGVkOiBcIm5vZGlzYWJsZWRcIixcbiAgICBzdHlsZTogXCJcIixcbiAgICBkZXNjOiBcIlwiLFxuICAgIHN0YXR1czogXCJlbmFibGVcIlxuICB9LFxuICBiaW5kVG9TZWFyY2hGaWVsZDoge1xuICAgIGNvbHVtblRpdGxlOiBcIlwiLFxuICAgIGNvbHVtblRhYmxlTmFtZTogXCJcIixcbiAgICBjb2x1bW5OYW1lOiBcIlwiLFxuICAgIGNvbHVtbkNhcHRpb246IFwiXCIsXG4gICAgY29sdW1uRGF0YVR5cGVOYW1lOiBcIlwiLFxuICAgIGNvbHVtbk9wZXJhdG9yOiBcIuWMuemFjVwiXG4gIH1cbn0pO1xuXG5fZGVmaW5lUHJvcGVydHkoQ0tFZGl0b3JQbHVnaW5VdGlsaXR5LCBcIkRpYWxvZ0V4ZWN1dGVFZGl0QWN0aW9uTmFtZVwiLCBcIkVkaXRcIik7XG5cbl9kZWZpbmVQcm9wZXJ0eShDS0VkaXRvclBsdWdpblV0aWxpdHksIFwiRGlhbG9nRXhlY3V0ZUluc2VydEFjdGlvbk5hbWVcIiwgXCJJbnNlcnRcIik7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxudmFyIENLRWRpdG9yVXRpbGl0eSA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gQ0tFZGl0b3JVdGlsaXR5KCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDS0VkaXRvclV0aWxpdHkpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKENLRWRpdG9yVXRpbGl0eSwgbnVsbCwgW3tcbiAgICBrZXk6IFwiU2V0U2VsZWN0ZWRFbGVtXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIFNldFNlbGVjdGVkRWxlbShlbGVtSHRtbCkge1xuICAgICAgdGhpcy5fJENLRWRpdG9yU2VsZWN0RWxlbSA9ICQoZWxlbUh0bWwpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJHZXRTZWxlY3RlZEVsZW1cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gR2V0U2VsZWN0ZWRFbGVtKCkge1xuICAgICAgaWYgKHRoaXMuXyRDS0VkaXRvclNlbGVjdEVsZW0pIHtcbiAgICAgICAgaWYgKHRoaXMuXyRDS0VkaXRvclNlbGVjdEVsZW0ubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHJldHVybiB0aGlzLl8kQ0tFZGl0b3JTZWxlY3RFbGVtO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJHZXRTZWxlY3RlZENLRWRpdG9yRWxlbVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBHZXRTZWxlY3RlZENLRWRpdG9yRWxlbSgpIHtcbiAgICAgIGlmICh0aGlzLkdldFNlbGVjdGVkRWxlbSgpKSB7XG4gICAgICAgIHZhciBpZCA9IHRoaXMuR2V0U2VsZWN0ZWRFbGVtKCkuYXR0cihcImlkXCIpO1xuICAgICAgICB2YXIgZWxlbWVudCA9IHRoaXMuR2V0Q0tFZGl0b3JJbnN0KCkuZG9jdW1lbnQuZ2V0QnlJZChpZCk7XG4gICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiR2V0Q0tFZGl0b3JJbnN0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIEdldENLRWRpdG9ySW5zdCgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9DS0VkaXRvckluc3Q7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIlNldENLRWRpdG9ySW5zdFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBTZXRDS0VkaXRvckluc3QoaW5zdCkge1xuICAgICAgdGhpcy5fQ0tFZGl0b3JJbnN0ID0gaW5zdDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiR2V0Q0tFZGl0b3JIVE1MXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIEdldENLRWRpdG9ySFRNTCgpIHtcbiAgICAgIHRoaXMuQ2xlYXJBTExGb3JEaXZFbGVtQnV0dG9uKCk7XG4gICAgICByZXR1cm4gdGhpcy5HZXRDS0VkaXRvckluc3QoKS5nZXREYXRhKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIlNldENLRWRpdG9ySFRNTFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBTZXRDS0VkaXRvckhUTUwoaHRtbCkge1xuICAgICAgdGhpcy5HZXRDS0VkaXRvckluc3QoKS5zZXREYXRhKGh0bWwpO1xuICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBDS0VkaXRvclV0aWxpdHkuQUxMRWxlbUJpbmREZWZhdWx0RXZlbnQoKTtcbiAgICAgIH0sIDUwMCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIkdldENLRWRpdG9ySFRNTEluUGx1Z2luUGFnZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBHZXRDS0VkaXRvckhUTUxJblBsdWdpblBhZ2UoKSB7XG4gICAgICByZXR1cm4gd2luZG93LnBhcmVudC5DS0VkaXRvclV0aWxpdHkuR2V0Q0tFZGl0b3JIVE1MKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIkluaXRpYWxpemVDS0VkaXRvclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBJbml0aWFsaXplQ0tFZGl0b3IodGV4dEFyZWFFbGVtSWQsIHBsdWdpbnNDb25maWcsIGxvYWRDb21wbGV0ZWRGdW5jLCBja2VkaXRvckNvbmZpZ0Z1bGxQYXRoLCBwbHVnaW5CYXNlUGF0aCwgdGhlbWVWbykge1xuICAgICAgdmFyIGV4dHJhUGx1Z2lucyA9IG5ldyBBcnJheSgpO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBsdWdpbnNDb25maWcubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHNpbmdsZVBsdWdpbkNvbmZpZyA9IHBsdWdpbnNDb25maWdbaV07XG4gICAgICAgIHZhciBzaW5nbGVOYW1lID0gc2luZ2xlUGx1Z2luQ29uZmlnLnNpbmdsZU5hbWU7XG4gICAgICAgIHZhciB0b29sYmFyTG9jYXRpb24gPSBzaW5nbGVQbHVnaW5Db25maWcudG9vbGJhckxvY2F0aW9uO1xuICAgICAgICB2YXIgdGV4dCA9IHNpbmdsZVBsdWdpbkNvbmZpZy50ZXh0O1xuICAgICAgICB2YXIgc2VydmVyUmVzb2x2ZSA9IHNpbmdsZVBsdWdpbkNvbmZpZy5zZXJ2ZXJSZXNvbHZlO1xuICAgICAgICB2YXIgY2xpZW50UmVzb2x2ZSA9IHNpbmdsZVBsdWdpbkNvbmZpZy5jbGllbnRSZXNvbHZlO1xuICAgICAgICB2YXIgY2xpZW50UmVzb2x2ZUpzID0gc2luZ2xlUGx1Z2luQ29uZmlnLmNsaWVudFJlc29sdmVKcztcbiAgICAgICAgdmFyIGRpYWxvZ1dpZHRoID0gc2luZ2xlUGx1Z2luQ29uZmlnLmRpYWxvZ1dpZHRoO1xuICAgICAgICB2YXIgZGlhbG9nSGVpZ2h0ID0gc2luZ2xlUGx1Z2luQ29uZmlnLmRpYWxvZ0hlaWdodDtcbiAgICAgICAgdmFyIGlzSkJ1aWxkNERDRGF0YSA9IHNpbmdsZVBsdWdpbkNvbmZpZy5pc0pCdWlsZDREQ0RhdGE7XG4gICAgICAgIHZhciBjb250cm9sQ2F0ZWdvcnkgPSBzaW5nbGVQbHVnaW5Db25maWcuY29udHJvbENhdGVnb3J5O1xuICAgICAgICB2YXIgc2VydmVyRHluYW1pY0JpbmQgPSBzaW5nbGVQbHVnaW5Db25maWcuc2VydmVyRHluYW1pY0JpbmQ7XG4gICAgICAgIHZhciBzaG93UmVtb3ZlQnV0dG9uID0gc2luZ2xlUGx1Z2luQ29uZmlnLnNob3dSZW1vdmVCdXR0b247XG4gICAgICAgIHZhciBzaG93SW5FZGl0b3JUb29sYmFyID0gc2luZ2xlUGx1Z2luQ29uZmlnLnNob3dJbkVkaXRvclRvb2xiYXI7XG4gICAgICAgIHZhciBlbmFibGVDaGlsZENvbnRyb2xzID0gc2luZ2xlUGx1Z2luQ29uZmlnLmVuYWJsZUNoaWxkQ29udHJvbHM7XG4gICAgICAgIHZhciBwbHVnaW5GaWxlTmFtZSA9IHNpbmdsZU5hbWUgKyBcIlBsdWdpbi5qc1wiO1xuICAgICAgICB2YXIgcGx1Z2luRm9sZGVyTmFtZSA9IHBsdWdpbkJhc2VQYXRoICsgc2luZ2xlTmFtZSArIFwiL1wiO1xuICAgICAgICBDS0VESVRPUi5wbHVnaW5zLmFkZEV4dGVybmFsKHNpbmdsZU5hbWUsIHBsdWdpbkZvbGRlck5hbWUsIHBsdWdpbkZpbGVOYW1lKTtcbiAgICAgICAgZXh0cmFQbHVnaW5zLnB1c2goc2luZ2xlTmFtZSk7XG4gICAgICAgIENLRWRpdG9yUGx1Z2luVXRpbGl0eS5BZGRQbHVnaW5zU2VydmVyQ29uZmlnKHNpbmdsZU5hbWUsIHRvb2xiYXJMb2NhdGlvbiwgdGV4dCwgY2xpZW50UmVzb2x2ZSwgc2VydmVyUmVzb2x2ZSwgY2xpZW50UmVzb2x2ZUpzLCBkaWFsb2dXaWR0aCwgZGlhbG9nSGVpZ2h0LCBpc0pCdWlsZDREQ0RhdGEsIGNvbnRyb2xDYXRlZ29yeSwgc2VydmVyRHluYW1pY0JpbmQsIHNob3dSZW1vdmVCdXR0b24sIHNob3dJbkVkaXRvclRvb2xiYXIsIGVuYWJsZUNoaWxkQ29udHJvbHMpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLlNldFRoZW1lVm8odGhlbWVWbyk7XG4gICAgICB2YXIgZWRpdG9yQ29uZmlnVXJsID0gQmFzZVV0aWxpdHkuQXBwZW5kVGltZVN0YW1wVXJsKGNrZWRpdG9yQ29uZmlnRnVsbFBhdGgpO1xuICAgICAgQ0tFRElUT1IucmVwbGFjZSh0ZXh0QXJlYUVsZW1JZCwge1xuICAgICAgICBjdXN0b21Db25maWc6IGVkaXRvckNvbmZpZ1VybCxcbiAgICAgICAgZXh0cmFQbHVnaW5zOiBleHRyYVBsdWdpbnMuam9pbihcIixcIilcbiAgICAgIH0pO1xuICAgICAgQ0tFRElUT1IuaW5zdGFuY2VzLmh0bWxfZGVzaWduLm9uKFwiYmVmb3JlUGFzdGVcIiwgZnVuY3Rpb24gKGV2ZW50KSB7fSk7XG4gICAgICBDS0VESVRPUi5pbnN0YW5jZXMuaHRtbF9kZXNpZ24ub24oXCJwYXN0ZVwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIHNvdXJjZUhUTUwgPSBldmVudC5kYXRhLmRhdGFWYWx1ZTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIHZhciAkc291cmNlSFRNTCA9ICQoc291cmNlSFRNTCk7XG4gICAgICAgICAgJHNvdXJjZUhUTUwuZmluZChcIi5kZWwtYnV0dG9uXCIpLnJlbW92ZSgpO1xuXG4gICAgICAgICAgaWYgKCRzb3VyY2VIVE1MLmZpbmQoXCJkaXZcIikubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgIGV2ZW50LmRhdGEuZGF0YVZhbHVlID0gJHNvdXJjZUhUTUwuZmluZChcImRpdlwiKS5hdHRyKFwiaWRcIiwgXCJjdF9jb3B5X1wiICsgU3RyaW5nVXRpbGl0eS5UaW1lc3RhbXAoKSkub3V0ZXJIVE1MKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCLpu4/otLTlvILluLgs6L+Y5Y6fSFRNTFwiKTtcbiAgICAgICAgICBldmVudC5kYXRhLmRhdGFWYWx1ZSA9IHNvdXJjZUhUTUw7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgQ0tFRElUT1IuaW5zdGFuY2VzLmh0bWxfZGVzaWduLm9uKFwiYWZ0ZXJQYXN0ZVwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgQ0tFZGl0b3JVdGlsaXR5LkFMTEVsZW1CaW5kRGVmYXVsdEV2ZW50KCk7XG4gICAgICB9KTtcbiAgICAgIENLRURJVE9SLmluc3RhbmNlcy5odG1sX2Rlc2lnbi5vbignaW5zZXJ0RWxlbWVudCcsIGZ1bmN0aW9uIChldmVudCkge30pO1xuICAgICAgQ0tFRElUT1IuaW5zdGFuY2VzLmh0bWxfZGVzaWduLm9uKCdpbnNlcnRIdG1sJywgZnVuY3Rpb24gKGV2ZW50KSB7fSk7XG4gICAgICBDS0VESVRPUi5pbnN0YW5jZXMuaHRtbF9kZXNpZ24ub24oJ3NlbGVjdGlvbkNoYW5nZScsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgZWxlbSA9IGV2ZW50LmRhdGEuc2VsZWN0aW9uLmdldFNlbGVjdGVkRWxlbWVudCgpO1xuICAgICAgICB2YXIgbGFzdEN1c3RTaW5nbGVOYW1lID0gXCJcIjtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV2ZW50LmRhdGEucGF0aC5lbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBlbGVtID0gZXZlbnQuZGF0YS5wYXRoLmVsZW1lbnRzW2ldO1xuICAgICAgICAgIHZhciBzaW5nbGVOYW1lID0gZWxlbS5nZXRBdHRyaWJ1dGUoXCJzaW5nbGVuYW1lXCIpO1xuXG4gICAgICAgICAgaWYgKHNpbmdsZU5hbWUpIHtcbiAgICAgICAgICAgIGxhc3RDdXN0U2luZ2xlTmFtZSA9IHNpbmdsZU5hbWU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobGFzdEN1c3RTaW5nbGVOYW1lKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coQ0tFZGl0b3JQbHVnaW5VdGlsaXR5LlBsdWdpbnMpO1xuICAgICAgICAgIENLRWRpdG9yVXRpbGl0eS5EaXNwbGF5UGx1Z2luQ29udHJvbHMoQ0tFZGl0b3JQbHVnaW5VdGlsaXR5LkdldEVuYWJsZUNoaWxkQ29udHJvbHMobGFzdEN1c3RTaW5nbGVOYW1lKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgdGhpcy5TZXRDS0VkaXRvckluc3QoQ0tFRElUT1IuaW5zdGFuY2VzLmh0bWxfZGVzaWduKTtcbiAgICAgIENLRURJVE9SLm9uKCdpbnN0YW5jZVJlYWR5JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBsb2FkQ29tcGxldGVkRnVuYyA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICBsb2FkQ29tcGxldGVkRnVuYygpO1xuICAgICAgICAgIDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIkRpc3BsYXlQbHVnaW5Db250cm9sc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBEaXNwbGF5UGx1Z2luQ29udHJvbHMoZW5hYmxlQ2hpbGRDb250cm9scykge1xuICAgICAgJChcIi5ja2VfYnV0dG9uXCIpLnNob3coKTtcblxuICAgICAgaWYgKGVuYWJsZUNoaWxkQ29udHJvbHMgPT0gXCIqXCIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZyhlbmFibGVDaGlsZENvbnRyb2xzKTtcbiAgICAgIHZhciBwbHVnaW5zID0gQ0tFZGl0b3JQbHVnaW5VdGlsaXR5LkdldFBsdWdpbnMoKTtcblxuICAgICAgZm9yICh2YXIga2V5IGluIHBsdWdpbnMpIHtcbiAgICAgICAgdmFyIHBsdWdpbiA9IHBsdWdpbnNba2V5XTtcbiAgICAgICAgdmFyIHNpbmdsZU5hbWUgPSBwbHVnaW4uU2V0dGluZy5TaW5nbGVOYW1lO1xuICAgICAgICAkKFwiLmNrZV9idXR0b25fX1wiICsgU3RyaW5nVXRpbGl0eS5Ub0xvd2VyQ2FzZShzaW5nbGVOYW1lKSkuaGlkZSgpO1xuICAgICAgfVxuXG4gICAgICB2YXIgZW5hYmxlUGx1Z2lucyA9IGVuYWJsZUNoaWxkQ29udHJvbHMuc3BsaXQoXCI7XCIpO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVuYWJsZVBsdWdpbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHNpbmdsZU5hbWUgPSBlbmFibGVQbHVnaW5zW2ldO1xuICAgICAgICAkKFwiLmNrZV9idXR0b25fX1wiICsgU3RyaW5nVXRpbGl0eS5Ub0xvd2VyQ2FzZShzaW5nbGVOYW1lKSkuc2hvdygpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJHZXRUaGVtZVZvXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIEdldFRoZW1lVm8oKSB7XG4gICAgICByZXR1cm4gdGhpcy5fVGhlbWVWbztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiU2V0VGhlbWVWb1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBTZXRUaGVtZVZvKF90aGVtZVZvKSB7XG4gICAgICB0aGlzLl9UaGVtZVZvID0gX3RoZW1lVm87XG4gICAgICB0aGlzLlJlc2V0Um9vdEVsZW1UaGVtZShfdGhlbWVWbyk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIlJlc2V0Um9vdEVsZW1UaGVtZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBSZXNldFJvb3RFbGVtVGhlbWUoX3RoZW1lVm8pIHtcbiAgICAgIGlmICh0aGlzLkdldENLRWRpdG9ySW5zdCgpKSB7XG4gICAgICAgIHZhciBzb3VyY2VIVE1MID0gdGhpcy5HZXRDS0VkaXRvckhUTUwoKTtcblxuICAgICAgICBpZiAoc291cmNlSFRNTCAhPSBudWxsICYmIHNvdXJjZUhUTUwgIT0gXCJcIikge1xuICAgICAgICAgIHZhciByb290RWxlbSA9ICQoc291cmNlSFRNTCk7XG5cbiAgICAgICAgICBpZiAocm9vdEVsZW0ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdmFyIGNsYXNzTGlzdCA9IHJvb3RFbGVtLmF0dHIoJ2NsYXNzJykuc3BsaXQoL1xccysvKTtcbiAgICAgICAgICAgIHZhciBjbGFzc2FyeSA9IFtdO1xuICAgICAgICAgICAgJC5lYWNoKGNsYXNzTGlzdCwgZnVuY3Rpb24gKGluZGV4LCBpdGVtKSB7XG4gICAgICAgICAgICAgIGlmIChpdGVtLmluZGV4T2YoJ2h0bWwtZGVzaWduLXRoZW1lLScpID49IDApIHtcbiAgICAgICAgICAgICAgICByb290RWxlbS5yZW1vdmVDbGFzcyhpdGVtKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByb290RWxlbS5hZGRDbGFzcyhfdGhlbWVWby5yb290RWxlbUNsYXNzKTtcbiAgICAgICAgICAgIHRoaXMuU2V0Q0tFZGl0b3JIVE1MKHJvb3RFbGVtLm91dGVySFRNTCgpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiQ2xlYXJBTExGb3JEaXZFbGVtQnV0dG9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIENsZWFyQUxMRm9yRGl2RWxlbUJ1dHRvbigpIHtcbiAgICAgIHZhciBvbGREZWxCdXR0b25zID0gQ0tFZGl0b3JVdGlsaXR5LkdldENLRWRpdG9ySW5zdCgpLmRvY3VtZW50LmZpbmQoXCIuZGVsLWJ1dHRvblwiKTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvbGREZWxCdXR0b25zLmNvdW50KCk7IGkrKykge1xuICAgICAgICBvbGREZWxCdXR0b25zLmdldEl0ZW0oaSkucmVtb3ZlKCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIlNpbmdsZUVsZW1CaW5kRGVmYXVsdEV2ZW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIFNpbmdsZUVsZW1CaW5kRGVmYXVsdEV2ZW50KGVsZW0pIHtcbiAgICAgIGlmIChlbGVtLmdldEF0dHJpYnV0ZShcInNob3dfcmVtb3ZlX2J1dHRvblwiKSA9PSBcInRydWVcIikge1xuICAgICAgICBlbGVtLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBDS0VkaXRvclV0aWxpdHkuR2V0Q0tFZGl0b3JJbnN0KCkuZ2V0U2VsZWN0aW9uKCkuc2VsZWN0RWxlbWVudCh0aGlzKTtcbiAgICAgICAgICBDS0VkaXRvclV0aWxpdHkuU2V0U2VsZWN0ZWRFbGVtKHRoaXMuZ2V0T3V0ZXJIdG1sKCkpO1xuICAgICAgICAgIENLRWRpdG9yVXRpbGl0eS5DbGVhckFMTEZvckRpdkVsZW1CdXR0b24oKTtcbiAgICAgICAgICB2YXIgbmV3RGVsQnV0dG9uID0gbmV3IENLRURJVE9SLmRvbS5lbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICBuZXdEZWxCdXR0b24uYWRkQ2xhc3MoXCJkZWwtYnV0dG9uXCIpO1xuICAgICAgICAgIGVsZW0uYXBwZW5kKG5ld0RlbEJ1dHRvbik7XG4gICAgICAgICAgbmV3RGVsQnV0dG9uLm9uKCdjbGljaycsIGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgZWxlbS5yZW1vdmUoKTtcbiAgICAgICAgICAgIHZhciBkb21FdmVudCA9IGV2LmRhdGE7XG4gICAgICAgICAgICBkb21FdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZG9tRXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJBTExFbGVtQmluZERlZmF1bHRFdmVudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBBTExFbGVtQmluZERlZmF1bHRFdmVudCgpIHtcbiAgICAgIHZhciBlbGVtZW50cyA9IENLRWRpdG9yVXRpbGl0eS5HZXRDS0VkaXRvckluc3QoKS5kb2N1bWVudC5nZXRCb2R5KCkuZ2V0RWxlbWVudHNCeVRhZygnKicpO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnRzLmNvdW50KCk7ICsraSkge1xuICAgICAgICB2YXIgZWxlbSA9IGVsZW1lbnRzLmdldEl0ZW0oaSk7XG4gICAgICAgIHRoaXMuU2luZ2xlRWxlbUJpbmREZWZhdWx0RXZlbnQoZWxlbSk7XG4gICAgICB9XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIENLRWRpdG9yVXRpbGl0eTtcbn0oKTtcblxuX2RlZmluZVByb3BlcnR5KENLRWRpdG9yVXRpbGl0eSwgXCJfJENLRWRpdG9yU2VsZWN0RWxlbVwiLCBudWxsKTtcblxuX2RlZmluZVByb3BlcnR5KENLRWRpdG9yVXRpbGl0eSwgXCJfQ0tFZGl0b3JJbnN0XCIsIG51bGwpO1xuXG5fZGVmaW5lUHJvcGVydHkoQ0tFZGl0b3JVdGlsaXR5LCBcIl9UaGVtZVZvXCIsIG51bGwpOyIsIlwidXNlIHN0cmljdFwiO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbnZhciBIVE1MRWRpdG9yVXRpbGl0eSA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gSFRNTEVkaXRvclV0aWxpdHkoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEhUTUxFZGl0b3JVdGlsaXR5KTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhIVE1MRWRpdG9yVXRpbGl0eSwgbnVsbCwgW3tcbiAgICBrZXk6IFwiR2V0SFRNTEVkaXRvckluc3RcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gR2V0SFRNTEVkaXRvckluc3QoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fSFRNTEVkaXRvckluc3Q7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIlNldEhUTUxFZGl0b3JIVE1MXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIFNldEhUTUxFZGl0b3JIVE1MKGh0bWwpIHtcbiAgICAgIGlmICghU3RyaW5nVXRpbGl0eS5Jc051bGxPckVtcHR5KGh0bWwpKSB7XG4gICAgICAgIHRoaXMuR2V0SFRNTEVkaXRvckluc3QoKS5zZXRWYWx1ZShodG1sKTtcbiAgICAgICAgQ29kZU1pcnJvci5jb21tYW5kc1tcInNlbGVjdEFsbFwiXSh0aGlzLkdldEhUTUxFZGl0b3JJbnN0KCkpO1xuICAgICAgICB2YXIgcmFuZ2UgPSB7XG4gICAgICAgICAgZnJvbTogdGhpcy5HZXRIVE1MRWRpdG9ySW5zdCgpLmdldEN1cnNvcih0cnVlKSxcbiAgICAgICAgICB0bzogdGhpcy5HZXRIVE1MRWRpdG9ySW5zdCgpLmdldEN1cnNvcihmYWxzZSlcbiAgICAgICAgfTtcbiAgICAgICAgO1xuICAgICAgICB0aGlzLkdldEhUTUxFZGl0b3JJbnN0KCkuYXV0b0Zvcm1hdFJhbmdlKHJhbmdlLmZyb20sIHJhbmdlLnRvKTtcbiAgICAgICAgdmFyIGExID0ge1xuICAgICAgICAgIGxpbmU6IDAsXG4gICAgICAgICAgY2g6IDJcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5HZXRIVE1MRWRpdG9ySW5zdCgpLmdldERvYygpLmVhY2hMaW5lKGZ1bmN0aW9uIChsaW5lKSB7fSk7XG4gICAgICAgIHZhciBzZWxlY3RlZEVsZW0gPSBDS0VkaXRvclV0aWxpdHkuR2V0U2VsZWN0ZWRFbGVtKCk7XG4gICAgICAgIHZhciBzZWFyY2hIVE1MID0gXCJcIjtcblxuICAgICAgICBpZiAoc2VsZWN0ZWRFbGVtKSB7XG4gICAgICAgICAgc2VhcmNoSFRNTCA9IHNlbGVjdGVkRWxlbS5vdXRlckhUTUwoKS5zcGxpdChcIj5cIilbMF07XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgY3Vyc29yID0gdGhpcy5HZXRIVE1MRWRpdG9ySW5zdCgpLmdldFNlYXJjaEN1cnNvcihzZWFyY2hIVE1MKTtcbiAgICAgICAgY3Vyc29yLmZpbmROZXh0KCk7XG5cbiAgICAgICAgaWYgKGN1cnNvci5mcm9tKCkgJiYgY3Vyc29yLnRvKCkpIHtcbiAgICAgICAgICB0aGlzLkdldEhUTUxFZGl0b3JJbnN0KCkuZ2V0RG9jKCkuc2V0U2VsZWN0aW9uKGN1cnNvci5mcm9tKCksIGN1cnNvci50bygpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJHZXRIdG1sRWRpdG9ySFRNTFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBHZXRIdG1sRWRpdG9ySFRNTCgpIHtcbiAgICAgIHJldHVybiB0aGlzLkdldEhUTUxFZGl0b3JJbnN0KCkuZ2V0VmFsdWUoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiSW5pdGlhbGl6ZUhUTUxDb2RlRGVzaWduXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIEluaXRpYWxpemVIVE1MQ29kZURlc2lnbigpIHtcbiAgICAgIHZhciBtaXhlZE1vZGUgPSB7XG4gICAgICAgIG5hbWU6IFwiaHRtbG1peGVkXCIsXG4gICAgICAgIHNjcmlwdFR5cGVzOiBbe1xuICAgICAgICAgIG1hdGNoZXM6IC9cXC94LWhhbmRsZWJhcnMtdGVtcGxhdGV8XFwveC1tdXN0YWNoZS9pLFxuICAgICAgICAgIG1vZGU6IG51bGxcbiAgICAgICAgfSwge1xuICAgICAgICAgIG1hdGNoZXM6IC8odGV4dHxhcHBsaWNhdGlvbilcXC8oeC0pP3ZiKGF8c2NyaXB0KS9pLFxuICAgICAgICAgIG1vZGU6IFwidmJzY3JpcHRcIlxuICAgICAgICB9XVxuICAgICAgfTtcbiAgICAgIHRoaXMuX0hUTUxFZGl0b3JJbnN0ID0gQ29kZU1pcnJvci5mcm9tVGV4dEFyZWEoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJUZXh0QXJlYUhUTUxFZGl0b3JcIiksIHtcbiAgICAgICAgbW9kZTogbWl4ZWRNb2RlLFxuICAgICAgICBzZWxlY3Rpb25Qb2ludGVyOiB0cnVlLFxuICAgICAgICB0aGVtZTogXCJtb25va2FpXCIsXG4gICAgICAgIGZvbGRHdXR0ZXI6IHRydWUsXG4gICAgICAgIGd1dHRlcnM6IFtcIkNvZGVNaXJyb3ItbGluZW51bWJlcnNcIiwgXCJDb2RlTWlycm9yLWZvbGRndXR0ZXJcIl0sXG4gICAgICAgIGxpbmVOdW1iZXJzOiB0cnVlLFxuICAgICAgICBsaW5lV3JhcHBpbmc6IHRydWVcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLl9IVE1MRWRpdG9ySW5zdC5zZXRTaXplKFwiMTAwJVwiLCBQYWdlU3R5bGVVdGlsaXR5LkdldFdpbmRvd0hlaWdodCgpIC0gODUpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBIVE1MRWRpdG9yVXRpbGl0eTtcbn0oKTtcblxuX2RlZmluZVByb3BlcnR5KEhUTUxFZGl0b3JVdGlsaXR5LCBcIl9IVE1MRWRpdG9ySW5zdFwiLCBudWxsKTsiLCJcInVzZSBzdHJpY3RcIjtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXG52YXIgSnNFZGl0b3JVdGlsaXR5ID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBKc0VkaXRvclV0aWxpdHkoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEpzRWRpdG9yVXRpbGl0eSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoSnNFZGl0b3JVdGlsaXR5LCBudWxsLCBbe1xuICAgIGtleTogXCJfR2V0TmV3Rm9ybUpzU3RyaW5nXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIF9HZXROZXdGb3JtSnNTdHJpbmcoKSB7XG4gICAgICByZXR1cm4gXCI8c2NyaXB0PnZhciBGb3JtUGFnZU9iamVjdEluc3RhbmNlPXtcIiArIFwiZGF0YTp7XCIgKyBcInVzZXJFbnRpdHk6e30sXCIgKyBcImZvcm1FbnRpdHk6W10sXCIgKyBcImNvbmZpZzpbXVwiICsgXCJ9LFwiICsgXCJwYWdlUmVhZHk6ZnVuY3Rpb24oKXt9LFwiICsgXCJiaW5kUmVjb3JkRGF0YVJlYWR5OmZ1bmN0aW9uKCl7fSxcIiArIFwidmFsaWRhdGVFdmVyeUZyb21Db250cm9sOmZ1bmN0aW9uKGNvbnRyb2xPYmope31cIiArIFwifTwvc2NyaXB0PlwiO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJHZXRKc0VkaXRvckluc3RcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gR2V0SnNFZGl0b3JJbnN0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuX0pzRWRpdG9ySW5zdDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiU2V0SnNFZGl0b3JKc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBTZXRKc0VkaXRvckpzKGpzKSB7XG4gICAgICB0aGlzLkdldEpzRWRpdG9ySW5zdCgpLnNldFZhbHVlKGpzKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiR2V0SnNFZGl0b3JKc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBHZXRKc0VkaXRvckpzKCkge1xuICAgICAgcmV0dXJuIHRoaXMuR2V0SnNFZGl0b3JJbnN0KCkuZ2V0VmFsdWUoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiSW5pdGlhbGl6ZUpzQ29kZURlc2lnblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBJbml0aWFsaXplSnNDb2RlRGVzaWduKHN0YXR1cykge1xuICAgICAgdGhpcy5fSnNFZGl0b3JJbnN0ID0gQ29kZU1pcnJvci5mcm9tVGV4dEFyZWEoJChcIiNUZXh0QXJlYUpzRWRpdG9yXCIpWzBdLCB7XG4gICAgICAgIG1vZGU6IFwiYXBwbGljYXRpb24vbGQranNvblwiLFxuICAgICAgICBsaW5lTnVtYmVyczogdHJ1ZSxcbiAgICAgICAgbGluZVdyYXBwaW5nOiB0cnVlLFxuICAgICAgICBleHRyYUtleXM6IHtcbiAgICAgICAgICBcIkN0cmwtUVwiOiBmdW5jdGlvbiBDdHJsUShjbSkge1xuICAgICAgICAgICAgY20uZm9sZENvZGUoY20uZ2V0Q3Vyc29yKCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZm9sZEd1dHRlcjogdHJ1ZSxcbiAgICAgICAgc21hcnRJbmRlbnQ6IHRydWUsXG4gICAgICAgIG1hdGNoQnJhY2tldHM6IHRydWUsXG4gICAgICAgIHRoZW1lOiBcIm1vbm9rYWlcIixcbiAgICAgICAgZ3V0dGVyczogW1wiQ29kZU1pcnJvci1saW5lbnVtYmVyc1wiLCBcIkNvZGVNaXJyb3ItZm9sZGd1dHRlclwiXVxuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuX0pzRWRpdG9ySW5zdC5zZXRTaXplKFwiMTAwJVwiLCBQYWdlU3R5bGVVdGlsaXR5LkdldFdpbmRvd0hlaWdodCgpIC0gODUpO1xuXG4gICAgICBpZiAoc3RhdHVzID09IFwiYWRkXCIpIHtcbiAgICAgICAgdGhpcy5TZXRKc0VkaXRvckpzKHRoaXMuX0dldE5ld0Zvcm1Kc1N0cmluZygpKTtcbiAgICAgICAgQ29kZU1pcnJvci5jb21tYW5kc1tcInNlbGVjdEFsbFwiXSh0aGlzLkdldEpzRWRpdG9ySW5zdCgpKTtcbiAgICAgICAgdmFyIHJhbmdlID0ge1xuICAgICAgICAgIGZyb206IHRoaXMuR2V0SnNFZGl0b3JJbnN0KCkuZ2V0Q3Vyc29yKHRydWUpLFxuICAgICAgICAgIHRvOiB0aGlzLkdldEpzRWRpdG9ySW5zdCgpLmdldEN1cnNvcihmYWxzZSlcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5HZXRKc0VkaXRvckluc3QoKS5hdXRvRm9ybWF0UmFuZ2UocmFuZ2UuZnJvbSwgcmFuZ2UudG8pO1xuICAgICAgfVxuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBKc0VkaXRvclV0aWxpdHk7XG59KCk7XG5cbl9kZWZpbmVQcm9wZXJ0eShKc0VkaXRvclV0aWxpdHksIFwiX0pzRWRpdG9ySW5zdFwiLCBudWxsKTsiXX0=
