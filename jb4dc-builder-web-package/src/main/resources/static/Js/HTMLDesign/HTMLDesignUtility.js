"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var CKEditorPluginUtility=function(){function s(){_classCallCheck(this,s)}return _createClass(s,null,[{key:"AddPluginsServerConfig",value:function(e,t,i,n,o,r,l,a,s,u,d,c,m,f){this.PluginsServerConfig[e]={SingleName:e,ToolbarLocation:t,ToolbarLabel:i,ClientResolve:n,ServerResolve:o,ClientResolveJs:r,DialogWidth:l,DialogHeight:a,IsJBuild4DCData:s,ControlCategory:u,ServerDynamicBind:d,ShowRemoveButton:c,ShowInEditorToolbar:m,EnableChildControls:f}}},{key:"_UseServerConfigCoverEmptyPluginProp",value:function(e){var t=this.PluginsServerConfig[e.SingleName];if(t){for(var i in e)"function"!=typeof e[i]&&(""!=e[i]&&null!=e[i]||t[i]&&(e[i]=t[i]));return e}return null}},{key:"GetGeneralPluginInstance",value:function(e,t){var i={SingleName:e,DialogName:"",DialogWidth:null,DialogHeight:null,DialogPageUrl:BaseUtility.AppendTimeStampUrl("Dialog.html"),DialogTitle:"DIV",ToolbarCommand:"",ToolbarIcon:"Icon.png",ToolbarLabel:"",ToolbarLocation:"",IFrameWindow:null,IFrameExecuteActionName:"Insert",DesignModalInputCss:"",ClientResolve:"",ServerResolve:"",IsJBuild4DCData:"",ControlCategory:"",ServerDynamicBind:"",ShowRemoveButton:"",ShowInEditorToolbar:"",EnableChildControls:""};return i=$.extend(!0,{},i,t),null!=(i=s._UseServerConfigCoverEmptyPluginProp(i))?(i.DialogName=i.SingleName,i.ToolbarCommand="JBuild4DC.FormDesign.Plugins."+i.SingleName,i.DialogSettingTitle=i.ToolbarLabel+"Web控件",{Setting:i}):{}}},{key:"GetEnableChildControls",value:function(e){return this.Plugins[e].Setting.EnableChildControls}},{key:"GetPlugins",value:function(){return this.Plugins}},{key:"RegGeneralPluginToEditor",value:function(t,e,i,n){CKEDITOR.dialog.addIframe(i.DialogName,i.DialogSettingTitle,e+i.DialogPageUrl,i.DialogWidth,i.DialogHeight,function(){var e=document.getElementById(this._.frameId);i.IFrameWindow=e,s.SetElemPropsInEditDialog(i.IFrameWindow,i.IFrameExecuteActionName)},{onOk:function(){var e=i.IFrameWindow.contentWindow.DialogApp.getControlProps();if(0==e.success)return!1;n(t,i,e,i.IFrameWindow.contentWindow),i.IFrameExecuteActionName=s.DialogExecuteInsertActionName},onCancel:function(){i.IFrameExecuteActionName=s.DialogExecuteInsertActionName}}),t.addCommand(i.ToolbarCommand,new CKEDITOR.dialogCommand(i.DialogName)),"true"==i.ShowInEditorToolbar&&t.ui.addButton(i.SingleName,{label:i.ToolbarLabel,icon:e+i.ToolbarIcon,command:i.ToolbarCommand,toolbar:i.ToolbarLocation}),t.on("doubleclick",function(e){i.IFrameExecuteActionName=s.DialogExecuteEditActionName,s.OnCKWysiwygElemDBClickEvent(e,i)})}},{key:"OnCKWysiwygElemDBClickEvent",value:function(e,t){var i=e.data.element;"true"==i.getAttribute("runtime_auto_remove")&&(i=e.data.element.getParent()),i.getAttribute("singleName")==t.SingleName&&(CKEditorUtility.SetSelectedElem(i.getOuterHtml()),e.data.dialog=t.DialogName)}},{key:"SerializePropsToElem",value:function(e,t,i){if(e.setAttribute("jbuild4dc_custom","true"),e.setAttribute("singlename",i.SingleName),e.setAttribute("is_jbuild4dc_data",i.IsJBuild4DCData),e.setAttribute("control_category",i.ControlCategory),e.setAttribute("show_remove_button",i.ShowRemoveButton),t.baseInfo)for(var n in t.baseInfo)"readonly"==n?"readonly"==t.baseInfo[n]?e.setAttribute(n.toLocaleLowerCase(),t.baseInfo[n]):e.removeAttribute("readonly"):"disabled"==n?"disabled"==t.baseInfo[n]?e.setAttribute(n.toLocaleLowerCase(),t.baseInfo[n]):e.removeAttribute("disabled"):e.setAttribute(n.toLocaleLowerCase(),t.baseInfo[n]);if(t.bindToField)for(var n in t.bindToField)e.setAttribute(n.toLocaleLowerCase(),t.bindToField[n]);if(t.defaultValue)for(var n in t.defaultValue)e.setAttribute(n.toLocaleLowerCase(),t.defaultValue[n]);if(t.validateRules&&t.validateRules.rules&&0<t.validateRules.rules.length&&e.setAttribute("validaterules",encodeURIComponent(JsonUtility.JsonToString(t.validateRules))),t.normalProps)for(var n in t.normalProps)e.setAttribute(n.toLocaleLowerCase(),t.normalProps[n]);if(t.bindToSearchField)for(var n in t.bindToSearchField)e.setAttribute(n.toLocaleLowerCase(),t.bindToSearchField[n]);return e}},{key:"DeserializePropsFromElem",value:function(e){var t={},o=$(e);function i(e,t){var i={};for(var n in this.DefaultProps[t])o.attr(n)?i[n]=o.attr(n):i[n]=this.DefaultProps[t][n];return e[t]=i,e}return t=i.call(this,t,"baseInfo"),t=i.call(this,t,"bindToField"),t=i.call(this,t,"defaultValue"),t=i.call(this,t,"bindToSearchField"),o.attr("validateRules")&&(t.validateRules=JsonUtility.StringToJson(decodeURIComponent(o.attr("validateRules")))),t}},{key:"BuildGeneralElemToCKWysiwyg",value:function(e,t,i,n){if(this.ValidateBuildEnable(e,t,i,n))if(t.IFrameExecuteActionName==s.DialogExecuteInsertActionName){var o=CKEDITOR.dom.element.createFromHtml(e);this.SerializePropsToElem(o,i,t),CKEditorUtility.GetCKEditorInst().insertElement(o),CKEditorUtility.SingleElemBindDefaultEvent(o)}else{var r=CKEditorUtility.GetSelectedCKEditorElem();if(r){var l=new CKEDITOR.dom.element.createFromHtml(r.getOuterHtml());if("InputControl"==l.getAttribute("control_category")){var a=$(e).text();l.setText(a)}r.copyAttributes(l,{temp:"temp"}),this.SerializePropsToElem(l,i,t),l.replace(r),CKEditorUtility.SingleElemBindDefaultEvent(l)}}}},{key:"ValidateBuildEnable",value:function(e,t,i,n){return!0}},{key:"ValidateSerializeControlDialogCompletedEnable",value:function(e){return"true"==e.baseInfo.serialize&&""==e.bindToField.fieldName?(DialogUtility.Alert(window,DialogUtility.DialogAlertId,{},"序列化的控件必须绑定字段!",null),{success:!1}):e}},{key:"SetElemPropsInEditDialog",value:function(e,t){var i=CKEditorUtility.GetCKEditorInst().getSelection().getStartElement(),n=null;if(i&&(n=i.getParents()),e.contentWindow.DialogApp.ready(t,i,n),t==this.DialogExecuteEditActionName){var o=CKEditorUtility.GetSelectedElem().outerHTML(),r=this.DeserializePropsFromElem(o);e.contentWindow.DialogApp.setControlProps($(o),r)}}},{key:"GetControlDescText",value:function(e,t){return"["+e.ToolbarLabel+"] 绑定:["+t.bindToField.tableCaption+"-"+t.bindToField.fieldCaption+"]"}},{key:"GetSearchControlDescText",value:function(e,t){return"["+e.ToolbarLabel+"] 绑定:["+t.bindToSearchField.columnCaption+"]("+t.bindToSearchField.columnOperator+")"}},{key:"GetAutoRemoveTipLabel",value:function(e){return e||(e="双击编辑该部件"),'<div runtime_auto_remove="true" class="wysiwyg-auto-remove-tip">'+e+"</div>"}},{key:"TryGetListButtonsInPluginPage",value:function(){var i=[],e=CKEditorUtility.GetCKEditorHTMLInPluginPage();return $(e).find("[buttoncaption]").each(function(){var e=$(this).attr("buttoncaption"),t=$(this).attr("id");i.push({buttonCaption:e,buttonId:t})}),i}},{key:"TryGetDataSetId",value:function(e,t){if(e)for(var i=t.length-1;i--;0<=i)if(null!=t[i].getAttribute("datasetid")&&""!=t[i].getAttribute("datasetid"))return t[i].getAttribute("datasetid");return this.dataSetId?null:window.parent.listDesign.listResourceEntity.listDatasetId}}]),s}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}_defineProperty(CKEditorPluginUtility,"PluginsServerConfig",{}),_defineProperty(CKEditorPluginUtility,"Plugins",{}),_defineProperty(CKEditorPluginUtility,"DefaultProps",{bindToField:{tableId:"",tableName:"",tableCaption:"",fieldName:"",fieldCaption:"",fieldDataType:"",fieldLength:""},defaultValue:{defaultType:"",defaultValue:"",defaultText:""},validateRules:{msg:"",rules:[]},baseInfo:{id:"",serialize:"true",name:"",className:"",placeholder:"",custReadonly:"noreadonly",custDisabled:"nodisabled",style:"",desc:""},bindToSearchField:{columnTitle:"",columnTableName:"",columnName:"",columnCaption:"",columnDataTypeName:"",columnOperator:"匹配"}}),_defineProperty(CKEditorPluginUtility,"DialogExecuteEditActionName","Edit"),_defineProperty(CKEditorPluginUtility,"DialogExecuteInsertActionName","Insert");var CKEditorUtility=function(){function S(){_classCallCheck(this,S)}return _createClass(S,null,[{key:"SetSelectedElem",value:function(e){this._$CKEditorSelectElem=$(e)}},{key:"GetSelectedElem",value:function(){return this._$CKEditorSelectElem&&0<this._$CKEditorSelectElem.length?this._$CKEditorSelectElem:null}},{key:"GetSelectedCKEditorElem",value:function(){if(this.GetSelectedElem()){var e=this.GetSelectedElem().attr("id");return this.GetCKEditorInst().document.getById(e)}return null}},{key:"GetCKEditorInst",value:function(){return this._CKEditorInst}},{key:"SetCKEditorInst",value:function(e){this._CKEditorInst=e}},{key:"GetCKEditorHTML",value:function(){return this.ClearALLForDivElemButton(),this.GetCKEditorInst().getData()}},{key:"SetCKEditorHTML",value:function(e){this.GetCKEditorInst().setData(e),window.setTimeout(function(){S.ALLElemBindDefaultEvent()},500)}},{key:"GetCKEditorHTMLInPluginPage",value:function(){return window.parent.CKEditorUtility.GetCKEditorHTML()}},{key:"InitializeCKEditor",value:function(e,t,i,n,o,r){for(var l=new Array,a=0;a<t.length;a++){var s=t[a],u=s.singleName,d=s.toolbarLocation,c=s.text,m=s.serverResolve,f=s.clientResolve,g=s.clientResolveJs,E=s.dialogWidth,C=s.dialogHeight,v=s.isJBuild4DCData,y=s.controlCategory,h=s.serverDynamicBind,b=s.showRemoveButton,p=s.showInEditorToolbar,T=s.enableChildControls,I=u+"Plugin.js",D=o+u+"/";CKEDITOR.plugins.addExternal(u,D,I),l.push(u),CKEditorPluginUtility.AddPluginsServerConfig(u,d,c,f,m,g,E,C,v,y,h,b,p,T)}this.SetThemeVo(r);var P=BaseUtility.AppendTimeStampUrl(n);CKEDITOR.replace(e,{customConfig:P,extraPlugins:l.join(",")}),CKEDITOR.instances.html_design.on("beforePaste",function(e){}),CKEDITOR.instances.html_design.on("paste",function(t){var i=t.data.dataValue;try{var e=$(i);e.find(".del-button").remove(),1==e.find("div").length&&(t.data.dataValue=e.find("div").attr("id","ct_copy_"+StringUtility.Timestamp()).outerHTML())}catch(e){console.log("黏贴异常,还原HTML"),t.data.dataValue=i}}),CKEDITOR.instances.html_design.on("afterPaste",function(e){S.ALLElemBindDefaultEvent()}),CKEDITOR.instances.html_design.on("insertElement",function(e){}),CKEDITOR.instances.html_design.on("insertHtml",function(e){}),CKEDITOR.instances.html_design.on("selectionChange",function(e){e.data.selection.getSelectedElement();for(var t="",i=0;i<e.data.path.elements.length;i++){var n=e.data.path.elements[i].getAttribute("singlename");if(n){t=n;break}}t&&(console.log(CKEditorPluginUtility.Plugins),S.DisplayPluginControls(CKEditorPluginUtility.GetEnableChildControls(t)))}),this.SetCKEditorInst(CKEDITOR.instances.html_design),CKEDITOR.on("instanceReady",function(e){"function"==typeof i&&i()})}},{key:"DisplayPluginControls",value:function(e){if($(".cke_button").show(),"*"!=e){console.log(e);var t=CKEditorPluginUtility.GetPlugins();for(var i in t){var n=t[i].Setting.SingleName;$(".cke_button__"+StringUtility.ToLowerCase(n)).hide()}for(var o=e.split(";"),r=0;r<o.length;r++){n=o[r];$(".cke_button__"+StringUtility.ToLowerCase(n)).show()}}}},{key:"GetThemeVo",value:function(){return this._ThemeVo}},{key:"SetThemeVo",value:function(e){this._ThemeVo=e,this.ResetRootElemTheme(e)}},{key:"ResetRootElemTheme",value:function(e){if(this.GetCKEditorInst()){var t=this.GetCKEditorHTML();if(null!=t&&""!=t){var i=$(t);if(0<i.length){var n=i.attr("class").split(/\s+/);$.each(n,function(e,t){0<=t.indexOf("html-design-theme-")&&i.removeClass(t)}),i.addClass(e.rootElemClass),this.SetCKEditorHTML(i.outerHTML())}}}}},{key:"ClearALLForDivElemButton",value:function(){for(var e=S.GetCKEditorInst().document.find(".del-button"),t=0;t<e.count();t++)e.getItem(t).remove()}},{key:"SingleElemBindDefaultEvent",value:function(i){"true"==i.getAttribute("show_remove_button")&&i.on("click",function(){S.GetCKEditorInst().getSelection().selectElement(this),S.SetSelectedElem(this.getOuterHtml()),S.ClearALLForDivElemButton();var e=new CKEDITOR.dom.element("div");e.addClass("del-button"),i.append(e),e.on("click",function(e){i.remove();var t=e.data;t.preventDefault(),t.stopPropagation()})})}},{key:"ALLElemBindDefaultEvent",value:function(){for(var e=S.GetCKEditorInst().document.getBody().getElementsByTag("*"),t=0;t<e.count();++t){var i=e.getItem(t);this.SingleElemBindDefaultEvent(i)}}}]),S}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}_defineProperty(CKEditorUtility,"_$CKEditorSelectElem",null),_defineProperty(CKEditorUtility,"_CKEditorInst",null),_defineProperty(CKEditorUtility,"_ThemeVo",null);var HTMLEditorUtility=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"GetHTMLEditorInst",value:function(){return this._HTMLEditorInst}},{key:"SetHTMLEditorHTML",value:function(e){if(!StringUtility.IsNullOrEmpty(e)){this.GetHTMLEditorInst().setValue(e),CodeMirror.commands.selectAll(this.GetHTMLEditorInst());var t={from:this.GetHTMLEditorInst().getCursor(!0),to:this.GetHTMLEditorInst().getCursor(!1)};this.GetHTMLEditorInst().autoFormatRange(t.from,t.to);this.GetHTMLEditorInst().getDoc().eachLine(function(e){});var i=CKEditorUtility.GetSelectedElem(),n="";i&&(n=i.outerHTML().split(">")[0]);var o=this.GetHTMLEditorInst().getSearchCursor(n);o.findNext(),o.from()&&o.to()&&this.GetHTMLEditorInst().getDoc().setSelection(o.from(),o.to())}}},{key:"GetHtmlEditorHTML",value:function(){return this.GetHTMLEditorInst().getValue()}},{key:"InitializeHTMLCodeDesign",value:function(){this._HTMLEditorInst=CodeMirror.fromTextArea(document.getElementById("TextAreaHTMLEditor"),{mode:{name:"htmlmixed",scriptTypes:[{matches:/\/x-handlebars-template|\/x-mustache/i,mode:null},{matches:/(text|application)\/(x-)?vb(a|script)/i,mode:"vbscript"}]},selectionPointer:!0,theme:"monokai",foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],lineNumbers:!0,lineWrapping:!0}),this._HTMLEditorInst.setSize("100%",PageStyleUtility.GetWindowHeight()-85)}}]),e}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}_defineProperty(HTMLEditorUtility,"_HTMLEditorInst",null);var JsEditorUtility=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"_GetNewFormJsString",value:function(){return"<script>var FormPageObjectInstance={data:{userEntity:{},formEntity:[],config:[]},pageReady:function(){},bindRecordDataReady:function(){},validateEveryFromControl:function(controlObj){}}<\/script>"}},{key:"GetJsEditorInst",value:function(){return this._JsEditorInst}},{key:"SetJsEditorJs",value:function(e){this.GetJsEditorInst().setValue(e)}},{key:"GetJsEditorJs",value:function(){return this.GetJsEditorInst().getValue()}},{key:"InitializeJsCodeDesign",value:function(e){if(this._JsEditorInst=CodeMirror.fromTextArea($("#TextAreaJsEditor")[0],{mode:"application/ld+json",lineNumbers:!0,lineWrapping:!0,extraKeys:{"Ctrl-Q":function(e){e.foldCode(e.getCursor())}},foldGutter:!0,smartIndent:!0,matchBrackets:!0,theme:"monokai",gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"]}),this._JsEditorInst.setSize("100%",PageStyleUtility.GetWindowHeight()-85),"add"==e){this.SetJsEditorJs(this._GetNewFormJsString()),CodeMirror.commands.selectAll(this.GetJsEditorInst());var t={from:this.GetJsEditorInst().getCursor(!0),to:this.GetJsEditorInst().getCursor(!1)};this.GetJsEditorInst().autoFormatRange(t.from,t.to)}}}]),e}();_defineProperty(JsEditorUtility,"_JsEditorInst",null);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNLRWRpdG9yUGx1Z2luVXRpbGl0eS5qcyIsIkNLRWRpdG9yVXRpbGl0eS5qcyIsIkhUTUxFZGl0b3JVdGlsaXR5LmpzIiwiSnNFZGl0b3JVdGlsaXR5LmpzIl0sIm5hbWVzIjpbIl9jbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiaSIsImxlbmd0aCIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImtleSIsIl9jcmVhdGVDbGFzcyIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsInByb3RvdHlwZSIsIl9kZWZpbmVQcm9wZXJ0eSIsIm9iaiIsInZhbHVlIiwiQ0tFZGl0b3JQbHVnaW5VdGlsaXR5IiwidGhpcyIsInNpbmdsZU5hbWUiLCJ0b29sYmFyTG9jYXRpb24iLCJ0ZXh0IiwiY2xpZW50UmVzb2x2ZSIsInNlcnZlclJlc29sdmUiLCJjbGllbnRSZXNvbHZlSnMiLCJkaWFsb2dXaWR0aCIsImRpYWxvZ0hlaWdodCIsImlzSkJ1aWxkNERDRGF0YSIsImNvbnRyb2xDYXRlZ29yeSIsInNlcnZlckR5bmFtaWNCaW5kIiwic2hvd1JlbW92ZUJ1dHRvbiIsInNob3dJbkVkaXRvclRvb2xiYXIiLCJlbmFibGVDaGlsZENvbnRyb2xzIiwiUGx1Z2luc1NlcnZlckNvbmZpZyIsIlNpbmdsZU5hbWUiLCJUb29sYmFyTG9jYXRpb24iLCJUb29sYmFyTGFiZWwiLCJDbGllbnRSZXNvbHZlIiwiU2VydmVyUmVzb2x2ZSIsIkNsaWVudFJlc29sdmVKcyIsIkRpYWxvZ1dpZHRoIiwiRGlhbG9nSGVpZ2h0IiwiSXNKQnVpbGQ0RENEYXRhIiwiQ29udHJvbENhdGVnb3J5IiwiU2VydmVyRHluYW1pY0JpbmQiLCJTaG93UmVtb3ZlQnV0dG9uIiwiU2hvd0luRWRpdG9yVG9vbGJhciIsIkVuYWJsZUNoaWxkQ29udHJvbHMiLCJjb3Zlck9iaiIsInByb3AiLCJwbHVnaW5TaW5nbGVOYW1lIiwiZXhDb25maWciLCJkZWZhdWx0U2V0dGluZyIsIkRpYWxvZ05hbWUiLCJEaWFsb2dQYWdlVXJsIiwiQmFzZVV0aWxpdHkiLCJBcHBlbmRUaW1lU3RhbXBVcmwiLCJEaWFsb2dUaXRsZSIsIlRvb2xiYXJDb21tYW5kIiwiVG9vbGJhckljb24iLCJJRnJhbWVXaW5kb3ciLCJJRnJhbWVFeGVjdXRlQWN0aW9uTmFtZSIsIkRlc2lnbk1vZGFsSW5wdXRDc3MiLCIkIiwiZXh0ZW5kIiwiX1VzZVNlcnZlckNvbmZpZ0NvdmVyRW1wdHlQbHVnaW5Qcm9wIiwiRGlhbG9nU2V0dGluZ1RpdGxlIiwiU2V0dGluZyIsIlBsdWdpbnMiLCJja0VkaXRvciIsInBhdGgiLCJwbHVnaW5TZXR0aW5nIiwib2tGdW5jIiwiQ0tFRElUT1IiLCJkaWFsb2ciLCJhZGRJZnJhbWUiLCJpZnJhbWUiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiXyIsImZyYW1lSWQiLCJTZXRFbGVtUHJvcHNJbkVkaXREaWFsb2ciLCJvbk9rIiwiY29udGVudFdpbmRvdyIsIkRpYWxvZ0FwcCIsImdldENvbnRyb2xQcm9wcyIsInN1Y2Nlc3MiLCJEaWFsb2dFeGVjdXRlSW5zZXJ0QWN0aW9uTmFtZSIsIm9uQ2FuY2VsIiwiYWRkQ29tbWFuZCIsImRpYWxvZ0NvbW1hbmQiLCJ1aSIsImFkZEJ1dHRvbiIsImxhYmVsIiwiaWNvbiIsImNvbW1hbmQiLCJ0b29sYmFyIiwib24iLCJldmVudCIsIkRpYWxvZ0V4ZWN1dGVFZGl0QWN0aW9uTmFtZSIsIk9uQ0tXeXNpd3lnRWxlbURCQ2xpY2tFdmVudCIsImNvbnRyb2xTZXR0aW5nIiwiZWxlbWVudCIsImRhdGEiLCJnZXRBdHRyaWJ1dGUiLCJnZXRQYXJlbnQiLCJDS0VkaXRvclV0aWxpdHkiLCJTZXRTZWxlY3RlZEVsZW0iLCJnZXRPdXRlckh0bWwiLCJlbGVtIiwic2V0QXR0cmlidXRlIiwidG9Mb2NhbGVMb3dlckNhc2UiLCJyZW1vdmVBdHRyaWJ1dGUiLCJydWxlcyIsImVuY29kZVVSSUNvbXBvbmVudCIsIkpzb25VdGlsaXR5IiwiSnNvblRvU3RyaW5nIiwiJGVsZW0iLCJhdHRyVG9Qcm9wIiwiZ3JvdXBOYW1lIiwiZ3JvdXBQcm9wIiwiRGVmYXVsdFByb3BzIiwiYXR0ciIsImNhbGwiLCJ2YWxpZGF0ZVJ1bGVzIiwiU3RyaW5nVG9Kc29uIiwiZGVjb2RlVVJJQ29tcG9uZW50IiwiaHRtbCIsImNvbnRyb2xQcm9wcyIsIl9pZnJhbWUiLCJWYWxpZGF0ZUJ1aWxkRW5hYmxlIiwiZG9tIiwiY3JlYXRlRnJvbUh0bWwiLCJTZXJpYWxpemVQcm9wc1RvRWxlbSIsIkdldENLRWRpdG9ySW5zdCIsImluc2VydEVsZW1lbnQiLCJTaW5nbGVFbGVtQmluZERlZmF1bHRFdmVudCIsInNlbGVjdGVkRWxlbSIsIkdldFNlbGVjdGVkQ0tFZGl0b3JFbGVtIiwicmVGcmVzaEVsZW0iLCJuZXdUZXh0Iiwic2V0VGV4dCIsImNvcHlBdHRyaWJ1dGVzIiwidGVtcCIsInJlcGxhY2UiLCJyZXR1cm5SZXN1bHQiLCJiYXNlSW5mbyIsInNlcmlhbGl6ZSIsImJpbmRUb0ZpZWxkIiwiZmllbGROYW1lIiwiRGlhbG9nVXRpbGl0eSIsIkFsZXJ0Iiwid2luZG93IiwiRGlhbG9nQWxlcnRJZCIsImlmcmFtZU9iaiIsImFjdGlvbk5hbWUiLCJzZWwiLCJnZXRTZWxlY3Rpb24iLCJnZXRTdGFydEVsZW1lbnQiLCJwYXJlbnRzIiwiZ2V0UGFyZW50cyIsInJlYWR5IiwiR2V0U2VsZWN0ZWRFbGVtIiwib3V0ZXJIVE1MIiwiRGVzZXJpYWxpemVQcm9wc0Zyb21FbGVtIiwic2V0Q29udHJvbFByb3BzIiwidGFibGVDYXB0aW9uIiwiZmllbGRDYXB0aW9uIiwiYmluZFRvU2VhcmNoRmllbGQiLCJjb2x1bW5DYXB0aW9uIiwiY29sdW1uT3BlcmF0b3IiLCJ0aXBNc2ciLCJidXR0b25zIiwiR2V0Q0tFZGl0b3JIVE1MSW5QbHVnaW5QYWdlIiwiZmluZCIsImVhY2giLCJidXR0b25DYXB0aW9uIiwiYnV0dG9uSWQiLCJwdXNoIiwiZGF0YVNldElkIiwicGFyZW50IiwibGlzdERlc2lnbiIsImxpc3RSZXNvdXJjZUVudGl0eSIsImxpc3REYXRhc2V0SWQiLCJ0YWJsZUlkIiwidGFibGVOYW1lIiwiZmllbGREYXRhVHlwZSIsImZpZWxkTGVuZ3RoIiwiZGVmYXVsdFZhbHVlIiwiZGVmYXVsdFR5cGUiLCJkZWZhdWx0VGV4dCIsIm1zZyIsImlkIiwibmFtZSIsImNsYXNzTmFtZSIsInBsYWNlaG9sZGVyIiwiY3VzdFJlYWRvbmx5IiwiY3VzdERpc2FibGVkIiwic3R5bGUiLCJkZXNjIiwiY29sdW1uVGl0bGUiLCJjb2x1bW5UYWJsZU5hbWUiLCJjb2x1bW5OYW1lIiwiY29sdW1uRGF0YVR5cGVOYW1lIiwiZWxlbUh0bWwiLCJfJENLRWRpdG9yU2VsZWN0RWxlbSIsImdldEJ5SWQiLCJfQ0tFZGl0b3JJbnN0IiwiaW5zdCIsIkNsZWFyQUxMRm9yRGl2RWxlbUJ1dHRvbiIsImdldERhdGEiLCJzZXREYXRhIiwic2V0VGltZW91dCIsIkFMTEVsZW1CaW5kRGVmYXVsdEV2ZW50IiwiR2V0Q0tFZGl0b3JIVE1MIiwidGV4dEFyZWFFbGVtSWQiLCJwbHVnaW5zQ29uZmlnIiwibG9hZENvbXBsZXRlZEZ1bmMiLCJja2VkaXRvckNvbmZpZ0Z1bGxQYXRoIiwicGx1Z2luQmFzZVBhdGgiLCJ0aGVtZVZvIiwiZXh0cmFQbHVnaW5zIiwiQXJyYXkiLCJzaW5nbGVQbHVnaW5Db25maWciLCJwbHVnaW5GaWxlTmFtZSIsInBsdWdpbkZvbGRlck5hbWUiLCJwbHVnaW5zIiwiYWRkRXh0ZXJuYWwiLCJBZGRQbHVnaW5zU2VydmVyQ29uZmlnIiwiU2V0VGhlbWVWbyIsImVkaXRvckNvbmZpZ1VybCIsImN1c3RvbUNvbmZpZyIsImpvaW4iLCJpbnN0YW5jZXMiLCJodG1sX2Rlc2lnbiIsInNvdXJjZUhUTUwiLCJkYXRhVmFsdWUiLCIkc291cmNlSFRNTCIsInJlbW92ZSIsIlN0cmluZ1V0aWxpdHkiLCJUaW1lc3RhbXAiLCJlIiwiY29uc29sZSIsImxvZyIsInNlbGVjdGlvbiIsImdldFNlbGVjdGVkRWxlbWVudCIsImxhc3RDdXN0U2luZ2xlTmFtZSIsImVsZW1lbnRzIiwiRGlzcGxheVBsdWdpbkNvbnRyb2xzIiwiR2V0RW5hYmxlQ2hpbGRDb250cm9scyIsIlNldENLRWRpdG9ySW5zdCIsInNob3ciLCJHZXRQbHVnaW5zIiwiVG9Mb3dlckNhc2UiLCJoaWRlIiwiZW5hYmxlUGx1Z2lucyIsInNwbGl0IiwiX1RoZW1lVm8iLCJfdGhlbWVWbyIsIlJlc2V0Um9vdEVsZW1UaGVtZSIsInJvb3RFbGVtIiwiY2xhc3NMaXN0IiwiaW5kZXgiLCJpdGVtIiwiaW5kZXhPZiIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJyb290RWxlbUNsYXNzIiwiU2V0Q0tFZGl0b3JIVE1MIiwib2xkRGVsQnV0dG9ucyIsImNvdW50IiwiZ2V0SXRlbSIsInNlbGVjdEVsZW1lbnQiLCJuZXdEZWxCdXR0b24iLCJhcHBlbmQiLCJldiIsImRvbUV2ZW50IiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJnZXRCb2R5IiwiZ2V0RWxlbWVudHNCeVRhZyIsIkhUTUxFZGl0b3JVdGlsaXR5IiwiX0hUTUxFZGl0b3JJbnN0IiwiSXNOdWxsT3JFbXB0eSIsIkdldEhUTUxFZGl0b3JJbnN0Iiwic2V0VmFsdWUiLCJDb2RlTWlycm9yIiwiY29tbWFuZHMiLCJyYW5nZSIsImZyb20iLCJnZXRDdXJzb3IiLCJ0byIsImF1dG9Gb3JtYXRSYW5nZSIsImdldERvYyIsImVhY2hMaW5lIiwibGluZSIsInNlYXJjaEhUTUwiLCJjdXJzb3IiLCJnZXRTZWFyY2hDdXJzb3IiLCJmaW5kTmV4dCIsInNldFNlbGVjdGlvbiIsImdldFZhbHVlIiwiZnJvbVRleHRBcmVhIiwibW9kZSIsInNjcmlwdFR5cGVzIiwibWF0Y2hlcyIsInNlbGVjdGlvblBvaW50ZXIiLCJ0aGVtZSIsImZvbGRHdXR0ZXIiLCJndXR0ZXJzIiwibGluZU51bWJlcnMiLCJsaW5lV3JhcHBpbmciLCJzZXRTaXplIiwiUGFnZVN0eWxlVXRpbGl0eSIsIkdldFdpbmRvd0hlaWdodCIsIkpzRWRpdG9yVXRpbGl0eSIsIl9Kc0VkaXRvckluc3QiLCJqcyIsIkdldEpzRWRpdG9ySW5zdCIsInN0YXR1cyIsImV4dHJhS2V5cyIsIkN0cmwtUSIsImNtIiwiZm9sZENvZGUiLCJzbWFydEluZGVudCIsIm1hdGNoQnJhY2tldHMiLCJTZXRKc0VkaXRvckpzIiwiX0dldE5ld0Zvcm1Kc1N0cmluZyJdLCJtYXBwaW5ncyI6IkFBQUEsYUFFQSxTQUFBQSxnQkFBQUMsRUFBQUMsR0FBQSxLQUFBRCxhQUFBQyxHQUFBLE1BQUEsSUFBQUMsVUFBQSxxQ0FFQSxTQUFBQyxrQkFBQUMsRUFBQUMsR0FBQSxJQUFBLElBQUFDLEVBQUEsRUFBQUEsRUFBQUQsRUFBQUUsT0FBQUQsSUFBQSxDQUFBLElBQUFFLEVBQUFILEVBQUFDLEdBQUFFLEVBQUFDLFdBQUFELEVBQUFDLGFBQUEsRUFBQUQsRUFBQUUsY0FBQSxFQUFBLFVBQUFGLElBQUFBLEVBQUFHLFVBQUEsR0FBQUMsT0FBQUMsZUFBQVQsRUFBQUksRUFBQU0sSUFBQU4sSUFFQSxTQUFBTyxhQUFBZCxFQUFBZSxFQUFBQyxHQUFBLE9BQUFELEdBQUFiLGtCQUFBRixFQUFBaUIsVUFBQUYsR0FBQUMsR0FBQWQsa0JBQUFGLEVBQUFnQixHQUFBaEIsRUFFQSxTQUFBa0IsZ0JBQUFDLEVBQUFOLEVBQUFPLEdBQUEsT0FBQVAsS0FBQU0sRUFBQVIsT0FBQUMsZUFBQU8sRUFBQU4sRUFBQSxDQUFBTyxNQUFBQSxFQUFBWixZQUFBLEVBQUFDLGNBQUEsRUFBQUMsVUFBQSxJQUFBUyxFQUFBTixHQUFBTyxFQUFBRCxFQUVBLElBQUFFLHNCQUFBLFdBQ0EsU0FBQUEsSUFDQXZCLGdCQUFBd0IsS0FBQUQsR0EwV0EsT0F2V0FQLGFBQUFPLEVBQUEsS0FBQSxDQUFBLENBQ0FSLElBQUEseUJBQ0FPLE1BQUEsU0FBQUcsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsRUFBQUMsR0FDQWQsS0FBQWUsb0JBQUFkLEdBQUEsQ0FDQWUsV0FBQWYsRUFDQWdCLGdCQUFBZixFQUNBZ0IsYUFBQWYsRUFDQWdCLGNBQUFmLEVBQ0FnQixjQUFBZixFQUNBZ0IsZ0JBQUFmLEVBQ0FnQixZQUFBZixFQUNBZ0IsYUFBQWYsRUFDQWdCLGdCQUFBZixFQUNBZ0IsZ0JBQUFmLEVBQ0FnQixrQkFBQWYsRUFDQWdCLGlCQUFBZixFQUNBZ0Isb0JBQUFmLEVBQ0FnQixvQkFBQWYsS0FHQSxDQUNBdkIsSUFBQSx1Q0FDQU8sTUFBQSxTQUFBRCxHQUNBLElBQUFpQyxFQUFBOUIsS0FBQWUsb0JBQUFsQixFQUFBbUIsWUFFQSxHQUFBYyxFQUFBLENBQ0EsSUFBQSxJQUFBQyxLQUFBbEMsRUFDQSxtQkFBQUEsRUFBQWtDLEtBQ0EsSUFBQWxDLEVBQUFrQyxJQUFBLE1BQUFsQyxFQUFBa0MsSUFDQUQsRUFBQUMsS0FDQWxDLEVBQUFrQyxHQUFBRCxFQUFBQyxLQU1BLE9BQUFsQyxFQUdBLE9BQUEsT0FFQSxDQUNBTixJQUFBLDJCQUNBTyxNQUFBLFNBQUFrQyxFQUFBQyxHQUNBLElBQUFDLEVBQUEsQ0FDQWxCLFdBQUFnQixFQUNBRyxXQUFBLEdBQ0FiLFlBQUEsS0FDQUMsYUFBQSxLQUNBYSxjQUFBQyxZQUFBQyxtQkFBQSxlQUNBQyxZQUFBLE1BQ0FDLGVBQUEsR0FDQUMsWUFBQSxXQUNBdkIsYUFBQSxHQUNBRCxnQkFBQSxHQUNBeUIsYUFBQSxLQUNBQyx3QkFBQSxTQUNBQyxvQkFBQSxHQUNBekIsY0FBQSxHQUNBQyxjQUFBLEdBQ0FJLGdCQUFBLEdBQ0FDLGdCQUFBLEdBQ0FDLGtCQUFBLEdBQ0FDLGlCQUFBLEdBQ0FDLG9CQUFBLEdBQ0FDLG9CQUFBLElBS0EsT0FIQUssRUFBQVcsRUFBQUMsUUFBQSxFQUFBLEdBQUFaLEVBQUFELEdBR0EsT0FGQUMsRUFBQW5DLEVBQUFnRCxxQ0FBQWIsS0FHQUEsRUFBQUMsV0FBQUQsRUFBQWxCLFdBQ0FrQixFQUFBTSxlQUFBLGdDQUFBTixFQUFBbEIsV0FDQWtCLEVBQUFjLG1CQUFBZCxFQUFBaEIsYUFBQSxRQUNBLENBQ0ErQixRQUFBZixJQUlBLEtBRUEsQ0FDQTNDLElBQUEseUJBQ0FPLE1BQUEsU0FBQUcsR0FDQSxPQUFBRCxLQUFBa0QsUUFBQWpELEdBQUFnRCxRQUFBcEIsc0JBRUEsQ0FDQXRDLElBQUEsYUFDQU8sTUFBQSxXQUNBLE9BQUFFLEtBQUFrRCxVQUVBLENBQ0EzRCxJQUFBLDJCQUNBTyxNQUFBLFNBQUFxRCxFQUFBQyxFQUFBQyxFQUFBQyxHQUNBQyxTQUFBQyxPQUFBQyxVQUFBSixFQUFBbEIsV0FBQWtCLEVBQUFMLG1CQUFBSSxFQUFBQyxFQUFBakIsY0FBQWlCLEVBQUEvQixZQUFBK0IsRUFBQTlCLGFBQUEsV0FDQSxJQUFBbUMsRUFBQUMsU0FBQUMsZUFBQTVELEtBQUE2RCxFQUFBQyxTQUNBVCxFQUFBWCxhQUFBZ0IsRUFDQTNELEVBQUFnRSx5QkFBQVYsRUFBQVgsYUFBQVcsRUFBQVYsMEJBQ0EsQ0FDQXFCLEtBQUEsV0FDQSxJQUFBbEYsRUFBQXVFLEVBQUFYLGFBQUF1QixjQUFBQyxVQUFBQyxrQkFFQSxHQUFBLEdBQUFyRixFQUFBc0YsUUFDQSxPQUFBLEVBR0FkLEVBQUFILEVBQUFFLEVBQUF2RSxFQUFBdUUsRUFBQVgsYUFBQXVCLGVBQ0FaLEVBQUFWLHdCQUFBNUMsRUFBQXNFLCtCQUVBQyxTQUFBLFdBQ0FqQixFQUFBVix3QkFBQTVDLEVBQUFzRSxpQ0FHQWxCLEVBQUFvQixXQUFBbEIsRUFBQWIsZUFBQSxJQUFBZSxTQUFBaUIsY0FBQW5CLEVBQUFsQixhQUVBLFFBQUFrQixFQUFBekIscUJBQ0F1QixFQUFBc0IsR0FBQUMsVUFBQXJCLEVBQUFyQyxXQUFBLENBQ0EyRCxNQUFBdEIsRUFBQW5DLGFBQ0EwRCxLQUFBeEIsRUFBQUMsRUFBQVosWUFDQW9DLFFBQUF4QixFQUFBYixlQUNBc0MsUUFBQXpCLEVBQUFwQyxrQkFJQWtDLEVBQUE0QixHQUFBLGNBQUEsU0FBQUMsR0FDQTNCLEVBQUFWLHdCQUFBNUMsRUFBQWtGLDRCQUNBbEYsRUFBQW1GLDRCQUFBRixFQUFBM0IsT0FHQSxDQUNBOUQsSUFBQSw4QkFDQU8sTUFBQSxTQUFBa0YsRUFBQUcsR0FDQSxJQUFBQyxFQUFBSixFQUFBSyxLQUFBRCxRQUVBLFFBQUFBLEVBQUFFLGFBQUEseUJBQ0FGLEVBQUFKLEVBQUFLLEtBQUFELFFBQUFHLGFBR0FILEVBQUFFLGFBQUEsZUFFQUgsRUFBQW5FLGFBQ0F3RSxnQkFBQUMsZ0JBQUFMLEVBQUFNLGdCQUNBVixFQUFBSyxLQUFBN0IsT0FBQTJCLEVBQUFoRCxjQUdBLENBQ0E1QyxJQUFBLHVCQUNBTyxNQUFBLFNBQUE2RixFQUFBN0csRUFBQXFHLEdBT0EsR0FOQVEsRUFBQUMsYUFBQSxtQkFBQSxRQUNBRCxFQUFBQyxhQUFBLGFBQUFULEVBQUFuRSxZQUNBMkUsRUFBQUMsYUFBQSxvQkFBQVQsRUFBQTNELGlCQUNBbUUsRUFBQUMsYUFBQSxtQkFBQVQsRUFBQTFELGlCQUNBa0UsRUFBQUMsYUFBQSxxQkFBQVQsRUFBQXhELGtCQUVBN0MsRUFBQSxTQUNBLElBQUEsSUFBQVMsS0FBQVQsRUFBQSxTQUNBLFlBQUFTLEVBQ0EsWUFBQVQsRUFBQSxTQUFBUyxHQUNBb0csRUFBQUMsYUFBQXJHLEVBQUFzRyxvQkFBQS9HLEVBQUEsU0FBQVMsSUFFQW9HLEVBQUFHLGdCQUFBLFlBRUEsWUFBQXZHLEVBQ0EsWUFBQVQsRUFBQSxTQUFBUyxHQUNBb0csRUFBQUMsYUFBQXJHLEVBQUFzRyxvQkFBQS9HLEVBQUEsU0FBQVMsSUFFQW9HLEVBQUFHLGdCQUFBLFlBR0FILEVBQUFDLGFBQUFyRyxFQUFBc0csb0JBQUEvRyxFQUFBLFNBQUFTLElBS0EsR0FBQVQsRUFBQSxZQUNBLElBQUEsSUFBQVMsS0FBQVQsRUFBQSxZQUNBNkcsRUFBQUMsYUFBQXJHLEVBQUFzRyxvQkFBQS9HLEVBQUEsWUFBQVMsSUFJQSxHQUFBVCxFQUFBLGFBQ0EsSUFBQSxJQUFBUyxLQUFBVCxFQUFBLGFBQ0E2RyxFQUFBQyxhQUFBckcsRUFBQXNHLG9CQUFBL0csRUFBQSxhQUFBUyxJQVlBLEdBUkFULEVBQUEsZUFDQUEsRUFBQSxjQUFBaUgsT0FDQSxFQUFBakgsRUFBQSxjQUFBaUgsTUFBQS9HLFFBQ0EyRyxFQUFBQyxhQUFBLGdCQUFBSSxtQkFBQUMsWUFBQUMsYUFBQXBILEVBQUEsaUJBS0FBLEVBQUEsWUFDQSxJQUFBLElBQUFTLEtBQUFULEVBQUEsWUFDQTZHLEVBQUFDLGFBQUFyRyxFQUFBc0csb0JBQUEvRyxFQUFBLFlBQUFTLElBSUEsR0FBQVQsRUFBQSxrQkFDQSxJQUFBLElBQUFTLEtBQUFULEVBQUEsa0JBQ0E2RyxFQUFBQyxhQUFBckcsRUFBQXNHLG9CQUFBL0csRUFBQSxrQkFBQVMsSUFJQSxPQUFBb0csSUFFQSxDQUNBcEcsSUFBQSwyQkFDQU8sTUFBQSxTQUFBNkYsR0FDQSxJQUFBN0csRUFBQSxHQUNBcUgsRUFBQXRELEVBQUE4QyxHQUVBLFNBQUFTLEVBQUF0SCxFQUFBdUgsR0FDQSxJQUFBQyxFQUFBLEdBRUEsSUFBQSxJQUFBL0csS0FBQVMsS0FBQXVHLGFBQUFGLEdBQ0FGLEVBQUFLLEtBQUFqSCxHQUNBK0csRUFBQS9HLEdBQUE0RyxFQUFBSyxLQUFBakgsR0FFQStHLEVBQUEvRyxHQUFBUyxLQUFBdUcsYUFBQUYsR0FBQTlHLEdBS0EsT0FEQVQsRUFBQXVILEdBQUFDLEVBQ0F4SCxFQVlBLE9BVEFBLEVBQUFzSCxFQUFBSyxLQUFBekcsS0FBQWxCLEVBQUEsWUFDQUEsRUFBQXNILEVBQUFLLEtBQUF6RyxLQUFBbEIsRUFBQSxlQUNBQSxFQUFBc0gsRUFBQUssS0FBQXpHLEtBQUFsQixFQUFBLGdCQUNBQSxFQUFBc0gsRUFBQUssS0FBQXpHLEtBQUFsQixFQUFBLHFCQUVBcUgsRUFBQUssS0FBQSxtQkFDQTFILEVBQUE0SCxjQUFBVCxZQUFBVSxhQUFBQyxtQkFBQVQsRUFBQUssS0FBQSxvQkFHQTFILElBRUEsQ0FDQVMsSUFBQSw4QkFDQU8sTUFBQSxTQUFBK0csRUFBQTFCLEVBQUEyQixFQUFBQyxHQUNBLEdBQUEvRyxLQUFBZ0gsb0JBQUFILEVBQUExQixFQUFBMkIsRUFBQUMsR0FDQSxHQUFBNUIsRUFBQXhDLHlCQUFBNUMsRUFBQXNFLDhCQUFBLENBQ0EsSUFBQXNCLEVBQUFwQyxTQUFBMEQsSUFBQTdCLFFBQUE4QixlQUFBTCxHQUNBN0csS0FBQW1ILHFCQUFBeEIsRUFBQW1CLEVBQUEzQixHQUNBSyxnQkFBQTRCLGtCQUFBQyxjQUFBMUIsR0FDQUgsZ0JBQUE4QiwyQkFBQTNCLE9BQ0EsQ0FDQSxJQUFBNEIsRUFBQS9CLGdCQUFBZ0MsMEJBRUEsR0FBQUQsRUFBQSxDQUNBLElBQUFFLEVBQUEsSUFBQWxFLFNBQUEwRCxJQUFBN0IsUUFBQThCLGVBQUFLLEVBQUE3QixnQkFFQSxHQUFBLGdCQUFBK0IsRUFBQW5DLGFBQUEsb0JBQUEsQ0FDQSxJQUFBb0MsRUFBQTdFLEVBQUFnRSxHQUFBMUcsT0FDQXNILEVBQUFFLFFBQUFELEdBR0FILEVBQUFLLGVBQUFILEVBQUEsQ0FDQUksS0FBQSxTQUVBN0gsS0FBQW1ILHFCQUFBTSxFQUFBWCxFQUFBM0IsR0FDQXNDLEVBQUFLLFFBQUFQLEdBQ0EvQixnQkFBQThCLDJCQUFBRyxPQUtBLENBQ0FsSSxJQUFBLHNCQUNBTyxNQUFBLFNBQUErRyxFQUFBMUIsRUFBQTJCLEVBQUFDLEdBQ0EsT0FBQSxJQUVBLENBQ0F4SCxJQUFBLGdEQUNBTyxNQUFBLFNBQUFpSSxHQUNBLE1BQUEsUUFBQUEsRUFBQUMsU0FBQUMsV0FBQSxJQUFBRixFQUFBRyxZQUFBQyxXQUNBQyxjQUFBQyxNQUFBQyxPQUFBRixjQUFBRyxjQUFBLEdBQUEsZ0JBQUEsTUFDQSxDQUNBbkUsU0FBQSxJQUlBMkQsSUFFQSxDQUNBeEksSUFBQSwyQkFDQU8sTUFBQSxTQUFBMEksRUFBQUMsR0FDQSxJQUFBQyxFQUFBbEQsZ0JBQUE0QixrQkFBQXVCLGVBQUFDLGtCQUNBQyxFQUFBLEtBUUEsR0FOQUgsSUFDQUcsRUFBQUgsRUFBQUksY0FHQU4sRUFBQXZFLGNBQUFDLFVBQUE2RSxNQUFBTixFQUFBQyxFQUFBRyxHQUVBSixHQUFBekksS0FBQWlGLDRCQUFBLENBQ0EsSUFBQVUsRUFBQUgsZ0JBQUF3RCxrQkFBQUMsWUFDQW5LLEVBQUFrQixLQUFBa0oseUJBQUF2RCxHQUNBNkMsRUFBQXZFLGNBQUFDLFVBQUFpRixnQkFBQXRHLEVBQUE4QyxHQUFBN0csTUFHQSxDQUNBUyxJQUFBLHFCQUNBTyxNQUFBLFNBQUF1RCxFQUFBdkUsR0FDQSxNQUFBLElBQUF1RSxFQUFBbkMsYUFBQSxTQUFBcEMsRUFBQW9KLFlBQUFrQixhQUFBLElBQUF0SyxFQUFBb0osWUFBQW1CLGFBQUEsTUFFQSxDQUNBOUosSUFBQSwyQkFDQU8sTUFBQSxTQUFBdUQsRUFBQXZFLEdBQ0EsTUFBQSxJQUFBdUUsRUFBQW5DLGFBQUEsU0FBQXBDLEVBQUF3SyxrQkFBQUMsY0FBQSxLQUFBekssRUFBQXdLLGtCQUFBRSxlQUFBLE1BRUEsQ0FDQWpLLElBQUEsd0JBQ0FPLE1BQUEsU0FBQTJKLEdBS0EsT0FKQUEsSUFDQUEsRUFBQSxXQUdBLG1FQUFBQSxFQUFBLFdBRUEsQ0FDQWxLLElBQUEsZ0NBQ0FPLE1BQUEsV0FDQSxJQUFBNEosRUFBQSxHQUNBN0MsRUFBQXJCLGdCQUFBbUUsOEJBVUEsT0FUQTlHLEVBQUFnRSxHQUFBK0MsS0FBQSxtQkFDQUMsS0FBQSxXQUNBLElBQUFDLEVBQUFqSCxFQUFBN0MsTUFBQXdHLEtBQUEsaUJBQ0F1RCxFQUFBbEgsRUFBQTdDLE1BQUF3RyxLQUFBLE1BQ0FrRCxFQUFBTSxLQUFBLENBQ0FGLGNBQUFBLEVBQ0FDLFNBQUFBLE1BR0FMLElBRUEsQ0FDQW5LLElBQUEsa0JBQ0FPLE1BQUEsU0FBQTRJLEVBQUFHLEdBQ0EsR0FBQUgsRUFDQSxJQUFBLElBQUEzSixFQUFBOEosRUFBQTdKLE9BQUEsRUFBQUQsSUFBQSxHQUFBQSxFQUNBLEdBQUEsTUFBQThKLEVBQUE5SixHQUFBdUcsYUFBQSxjQUFBLElBQUF1RCxFQUFBOUosR0FBQXVHLGFBQUEsYUFDQSxPQUFBdUQsRUFBQTlKLEdBQUF1RyxhQUFBLGFBS0EsT0FBQXRGLEtBQUFpSyxVQUlBLEtBSEEzQixPQUFBNEIsT0FBQUMsV0FBQUMsbUJBQUFDLGtCQU9BdEssRUE1V0EsR0NSQSxTQUFBdkIsZ0JBQUFDLEVBQUFDLEdBQUEsS0FBQUQsYUFBQUMsR0FBQSxNQUFBLElBQUFDLFVBQUEscUNBRUEsU0FBQUMsa0JBQUFDLEVBQUFDLEdBQUEsSUFBQSxJQUFBQyxFQUFBLEVBQUFBLEVBQUFELEVBQUFFLE9BQUFELElBQUEsQ0FBQSxJQUFBRSxFQUFBSCxFQUFBQyxHQUFBRSxFQUFBQyxXQUFBRCxFQUFBQyxhQUFBLEVBQUFELEVBQUFFLGNBQUEsRUFBQSxVQUFBRixJQUFBQSxFQUFBRyxVQUFBLEdBQUFDLE9BQUFDLGVBQUFULEVBQUFJLEVBQUFNLElBQUFOLElBRUEsU0FBQU8sYUFBQWQsRUFBQWUsRUFBQUMsR0FBQSxPQUFBRCxHQUFBYixrQkFBQUYsRUFBQWlCLFVBQUFGLEdBQUFDLEdBQUFkLGtCQUFBRixFQUFBZ0IsR0FBQWhCLEVBRUEsU0FBQWtCLGdCQUFBQyxFQUFBTixFQUFBTyxHQUFBLE9BQUFQLEtBQUFNLEVBQUFSLE9BQUFDLGVBQUFPLEVBQUFOLEVBQUEsQ0FBQU8sTUFBQUEsRUFBQVosWUFBQSxFQUFBQyxjQUFBLEVBQUFDLFVBQUEsSUFBQVMsRUFBQU4sR0FBQU8sRUFBQUQsRURpWEFELGdCQUFBRyxzQkFBQSxzQkFBQSxJQUVBSCxnQkFBQUcsc0JBQUEsVUFBQSxJQUVBSCxnQkFBQUcsc0JBQUEsZUFBQSxDQUNBbUksWUFBQSxDQUNBb0MsUUFBQSxHQUNBQyxVQUFBLEdBQ0FuQixhQUFBLEdBQ0FqQixVQUFBLEdBQ0FrQixhQUFBLEdBQ0FtQixjQUFBLEdBQ0FDLFlBQUEsSUFFQUMsYUFBQSxDQUNBQyxZQUFBLEdBQ0FELGFBQUEsR0FDQUUsWUFBQSxJQUVBbEUsY0FBQSxDQUNBbUUsSUFBQSxHQUNBOUUsTUFBQSxJQUVBaUMsU0FBQSxDQUNBOEMsR0FBQSxHQUNBN0MsVUFBQSxPQUNBOEMsS0FBQSxHQUNBQyxVQUFBLEdBQ0FDLFlBQUEsR0FDQUMsYUFBQSxhQUNBQyxhQUFBLGFBQ0FDLE1BQUEsR0FDQUMsS0FBQSxJQUVBL0Isa0JBQUEsQ0FDQWdDLFlBQUEsR0FDQUMsZ0JBQUEsR0FDQUMsV0FBQSxHQUNBakMsY0FBQSxHQUNBa0MsbUJBQUEsR0FDQWpDLGVBQUEsUUFJQTVKLGdCQUFBRyxzQkFBQSw4QkFBQSxRQUVBSCxnQkFBQUcsc0JBQUEsZ0NBQUEsVUM3WkEsSUFBQXlGLGdCQUFBLFdBQ0EsU0FBQUEsSUFDQWhILGdCQUFBd0IsS0FBQXdGLEdBaVBBLE9BOU9BaEcsYUFBQWdHLEVBQUEsS0FBQSxDQUFBLENBQ0FqRyxJQUFBLGtCQUNBTyxNQUFBLFNBQUE0TCxHQUNBMUwsS0FBQTJMLHFCQUFBOUksRUFBQTZJLEtBRUEsQ0FDQW5NLElBQUEsa0JBQ0FPLE1BQUEsV0FDQSxPQUFBRSxLQUFBMkwsc0JBQ0EsRUFBQTNMLEtBQUEyTCxxQkFBQTNNLE9BQ0FnQixLQUFBMkwscUJBSUEsT0FFQSxDQUNBcE0sSUFBQSwwQkFDQU8sTUFBQSxXQUNBLEdBQUFFLEtBQUFnSixrQkFBQSxDQUNBLElBQUE4QixFQUFBOUssS0FBQWdKLGtCQUFBeEMsS0FBQSxNQUVBLE9BREF4RyxLQUFBb0gsa0JBQUF6RCxTQUFBaUksUUFBQWQsR0FJQSxPQUFBLE9BRUEsQ0FDQXZMLElBQUEsa0JBQ0FPLE1BQUEsV0FDQSxPQUFBRSxLQUFBNkwsZ0JBRUEsQ0FDQXRNLElBQUEsa0JBQ0FPLE1BQUEsU0FBQWdNLEdBQ0E5TCxLQUFBNkwsY0FBQUMsSUFFQSxDQUNBdk0sSUFBQSxrQkFDQU8sTUFBQSxXQUVBLE9BREFFLEtBQUErTCwyQkFDQS9MLEtBQUFvSCxrQkFBQTRFLFlBRUEsQ0FDQXpNLElBQUEsa0JBQ0FPLE1BQUEsU0FBQStHLEdBQ0E3RyxLQUFBb0gsa0JBQUE2RSxRQUFBcEYsR0FDQXlCLE9BQUE0RCxXQUFBLFdBQ0ExRyxFQUFBMkcsMkJBQ0EsT0FFQSxDQUNBNU0sSUFBQSw4QkFDQU8sTUFBQSxXQUNBLE9BQUF3SSxPQUFBNEIsT0FBQTFFLGdCQUFBNEcsb0JBRUEsQ0FDQTdNLElBQUEscUJBQ0FPLE1BQUEsU0FBQXVNLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBR0EsSUFGQSxJQUFBQyxFQUFBLElBQUFDLE1BRUE3TixFQUFBLEVBQUFBLEVBQUF1TixFQUFBdE4sT0FBQUQsSUFBQSxDQUNBLElBQUE4TixFQUFBUCxFQUFBdk4sR0FDQWtCLEVBQUE0TSxFQUFBNU0sV0FDQUMsRUFBQTJNLEVBQUEzTSxnQkFDQUMsRUFBQTBNLEVBQUExTSxLQUNBRSxFQUFBd00sRUFBQXhNLGNBQ0FELEVBQUF5TSxFQUFBek0sY0FDQUUsRUFBQXVNLEVBQUF2TSxnQkFDQUMsRUFBQXNNLEVBQUF0TSxZQUNBQyxFQUFBcU0sRUFBQXJNLGFBQ0FDLEVBQUFvTSxFQUFBcE0sZ0JBQ0FDLEVBQUFtTSxFQUFBbk0sZ0JBQ0FDLEVBQUFrTSxFQUFBbE0sa0JBQ0FDLEVBQUFpTSxFQUFBak0saUJBQ0FDLEVBQUFnTSxFQUFBaE0sb0JBQ0FDLEVBQUErTCxFQUFBL0wsb0JBQ0FnTSxFQUFBN00sRUFBQSxZQUNBOE0sRUFBQU4sRUFBQXhNLEVBQUEsSUFDQXNELFNBQUF5SixRQUFBQyxZQUFBaE4sRUFBQThNLEVBQUFELEdBQ0FILEVBQUEzQyxLQUFBL0osR0FDQUYsc0JBQUFtTix1QkFBQWpOLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBR0FkLEtBQUFtTixXQUFBVCxHQUNBLElBQUFVLEVBQUEvSyxZQUFBQyxtQkFBQWtLLEdBQ0FqSixTQUFBdUUsUUFBQXVFLEVBQUEsQ0FDQWdCLGFBQUFELEVBQ0FULGFBQUFBLEVBQUFXLEtBQUEsT0FFQS9KLFNBQUFnSyxVQUFBQyxZQUFBekksR0FBQSxjQUFBLFNBQUFDLE1BQ0F6QixTQUFBZ0ssVUFBQUMsWUFBQXpJLEdBQUEsUUFBQSxTQUFBQyxHQUNBLElBQUF5SSxFQUFBekksRUFBQUssS0FBQXFJLFVBRUEsSUFDQSxJQUFBQyxFQUFBOUssRUFBQTRLLEdBQ0FFLEVBQUEvRCxLQUFBLGVBQUFnRSxTQUVBLEdBQUFELEVBQUEvRCxLQUFBLE9BQUE1SyxTQUNBZ0csRUFBQUssS0FBQXFJLFVBQUFDLEVBQUEvRCxLQUFBLE9BQUFwRCxLQUFBLEtBQUEsV0FBQXFILGNBQUFDLGFBQUE3RSxhQUVBLE1BQUE4RSxHQUNBQyxRQUFBQyxJQUFBLGVBQ0FqSixFQUFBSyxLQUFBcUksVUFBQUQsS0FHQWxLLFNBQUFnSyxVQUFBQyxZQUFBekksR0FBQSxhQUFBLFNBQUFDLEdBQ0FRLEVBQUEyRyw0QkFFQTVJLFNBQUFnSyxVQUFBQyxZQUFBekksR0FBQSxnQkFBQSxTQUFBQyxNQUNBekIsU0FBQWdLLFVBQUFDLFlBQUF6SSxHQUFBLGFBQUEsU0FBQUMsTUFDQXpCLFNBQUFnSyxVQUFBQyxZQUFBekksR0FBQSxrQkFBQSxTQUFBQyxHQUNBQSxFQUFBSyxLQUFBNkksVUFBQUMscUJBR0EsSUFIQSxJQUNBQyxFQUFBLEdBRUFyUCxFQUFBLEVBQUFBLEVBQUFpRyxFQUFBSyxLQUFBakMsS0FBQWlMLFNBQUFyUCxPQUFBRCxJQUFBLENBQ0EsSUFDQWtCLEVBREErRSxFQUFBSyxLQUFBakMsS0FBQWlMLFNBQUF0UCxHQUNBdUcsYUFBQSxjQUVBLEdBQUFyRixFQUFBLENBQ0FtTyxFQUFBbk8sRUFDQSxPQUlBbU8sSUFDQUosUUFBQUMsSUFBQWxPLHNCQUFBbUQsU0FDQXNDLEVBQUE4SSxzQkFBQXZPLHNCQUFBd08sdUJBQUFILE9BR0FwTyxLQUFBd08sZ0JBQUFqTCxTQUFBZ0ssVUFBQUMsYUFDQWpLLFNBQUF3QixHQUFBLGdCQUFBLFNBQUFnSixHQUNBLG1CQUFBeEIsR0FDQUEsUUFLQSxDQUNBaE4sSUFBQSx3QkFDQU8sTUFBQSxTQUFBZ0IsR0FHQSxHQUZBK0IsRUFBQSxlQUFBNEwsT0FFQSxLQUFBM04sRUFBQSxDQUlBa04sUUFBQUMsSUFBQW5OLEdBQ0EsSUFBQWtNLEVBQUFqTixzQkFBQTJPLGFBRUEsSUFBQSxJQUFBblAsS0FBQXlOLEVBQUEsQ0FDQSxJQUNBL00sRUFEQStNLEVBQUF6TixHQUNBMEQsUUFBQWpDLFdBQ0E2QixFQUFBLGdCQUFBZ0wsY0FBQWMsWUFBQTFPLElBQUEyTyxPQUtBLElBRkEsSUFBQUMsRUFBQS9OLEVBQUFnTyxNQUFBLEtBRUEvUCxFQUFBLEVBQUFBLEVBQUE4UCxFQUFBN1AsT0FBQUQsSUFBQSxDQUNBa0IsRUFBQTRPLEVBQUE5UCxHQUNBOEQsRUFBQSxnQkFBQWdMLGNBQUFjLFlBQUExTyxJQUFBd08sV0FHQSxDQUNBbFAsSUFBQSxhQUNBTyxNQUFBLFdBQ0EsT0FBQUUsS0FBQStPLFdBRUEsQ0FDQXhQLElBQUEsYUFDQU8sTUFBQSxTQUFBa1AsR0FDQWhQLEtBQUErTyxTQUFBQyxFQUNBaFAsS0FBQWlQLG1CQUFBRCxLQUVBLENBQ0F6UCxJQUFBLHFCQUNBTyxNQUFBLFNBQUFrUCxHQUNBLEdBQUFoUCxLQUFBb0gsa0JBQUEsQ0FDQSxJQUFBcUcsRUFBQXpOLEtBQUFvTSxrQkFFQSxHQUFBLE1BQUFxQixHQUFBLElBQUFBLEVBQUEsQ0FDQSxJQUFBeUIsRUFBQXJNLEVBQUE0SyxHQUVBLEdBQUEsRUFBQXlCLEVBQUFsUSxPQUFBLENBQ0EsSUFBQW1RLEVBQUFELEVBQUExSSxLQUFBLFNBQUFzSSxNQUFBLE9BRUFqTSxFQUFBZ0gsS0FBQXNGLEVBQUEsU0FBQUMsRUFBQUMsR0FDQSxHQUFBQSxFQUFBQyxRQUFBLHVCQUNBSixFQUFBSyxZQUFBRixLQUdBSCxFQUFBTSxTQUFBUixFQUFBUyxlQUNBelAsS0FBQTBQLGdCQUFBUixFQUFBakcsa0JBS0EsQ0FDQTFKLElBQUEsMkJBQ0FPLE1BQUEsV0FHQSxJQUZBLElBQUE2UCxFQUFBbkssRUFBQTRCLGtCQUFBekQsU0FBQWlHLEtBQUEsZUFFQTdLLEVBQUEsRUFBQUEsRUFBQTRRLEVBQUFDLFFBQUE3USxJQUNBNFEsRUFBQUUsUUFBQTlRLEdBQUE2TyxXQUdBLENBQ0FyTyxJQUFBLDZCQUNBTyxNQUFBLFNBQUE2RixHQUNBLFFBQUFBLEVBQUFMLGFBQUEsdUJBQ0FLLEVBQUFaLEdBQUEsUUFBQSxXQUNBUyxFQUFBNEIsa0JBQUF1QixlQUFBbUgsY0FBQTlQLE1BQ0F3RixFQUFBQyxnQkFBQXpGLEtBQUEwRixnQkFDQUYsRUFBQXVHLDJCQUNBLElBQUFnRSxFQUFBLElBQUF4TSxTQUFBMEQsSUFBQTdCLFFBQUEsT0FDQTJLLEVBQUFQLFNBQUEsY0FDQTdKLEVBQUFxSyxPQUFBRCxHQUNBQSxFQUFBaEwsR0FBQSxRQUFBLFNBQUFrTCxHQUNBdEssRUFBQWlJLFNBQ0EsSUFBQXNDLEVBQUFELEVBQUE1SyxLQUNBNkssRUFBQUMsaUJBQ0FELEVBQUFFLHdCQUtBLENBQ0E3USxJQUFBLDBCQUNBTyxNQUFBLFdBR0EsSUFGQSxJQUFBdU8sRUFBQTdJLEVBQUE0QixrQkFBQXpELFNBQUEwTSxVQUFBQyxpQkFBQSxLQUVBdlIsRUFBQSxFQUFBQSxFQUFBc1AsRUFBQXVCLFVBQUE3USxFQUFBLENBQ0EsSUFBQTRHLEVBQUEwSSxFQUFBd0IsUUFBQTlRLEdBQ0FpQixLQUFBc0gsMkJBQUEzQixRQUtBSCxFQW5QQSxHQ1JBLFNBQUFoSCxnQkFBQUMsRUFBQUMsR0FBQSxLQUFBRCxhQUFBQyxHQUFBLE1BQUEsSUFBQUMsVUFBQSxxQ0FFQSxTQUFBQyxrQkFBQUMsRUFBQUMsR0FBQSxJQUFBLElBQUFDLEVBQUEsRUFBQUEsRUFBQUQsRUFBQUUsT0FBQUQsSUFBQSxDQUFBLElBQUFFLEVBQUFILEVBQUFDLEdBQUFFLEVBQUFDLFdBQUFELEVBQUFDLGFBQUEsRUFBQUQsRUFBQUUsY0FBQSxFQUFBLFVBQUFGLElBQUFBLEVBQUFHLFVBQUEsR0FBQUMsT0FBQUMsZUFBQVQsRUFBQUksRUFBQU0sSUFBQU4sSUFFQSxTQUFBTyxhQUFBZCxFQUFBZSxFQUFBQyxHQUFBLE9BQUFELEdBQUFiLGtCQUFBRixFQUFBaUIsVUFBQUYsR0FBQUMsR0FBQWQsa0JBQUFGLEVBQUFnQixHQUFBaEIsRUFFQSxTQUFBa0IsZ0JBQUFDLEVBQUFOLEVBQUFPLEdBQUEsT0FBQVAsS0FBQU0sRUFBQVIsT0FBQUMsZUFBQU8sRUFBQU4sRUFBQSxDQUFBTyxNQUFBQSxFQUFBWixZQUFBLEVBQUFDLGNBQUEsRUFBQUMsVUFBQSxJQUFBUyxFQUFBTixHQUFBTyxFQUFBRCxFRHdQQUQsZ0JBQUE0RixnQkFBQSx1QkFBQSxNQUVBNUYsZ0JBQUE0RixnQkFBQSxnQkFBQSxNQUVBNUYsZ0JBQUE0RixnQkFBQSxXQUFBLE1DMVBBLElBQUErSyxrQkFBQSxXQUNBLFNBQUFBLElBQ0EvUixnQkFBQXdCLEtBQUF1USxHQXdFQSxPQXJFQS9RLGFBQUErUSxFQUFBLEtBQUEsQ0FBQSxDQUNBaFIsSUFBQSxvQkFDQU8sTUFBQSxXQUNBLE9BQUFFLEtBQUF3USxrQkFFQSxDQUNBalIsSUFBQSxvQkFDQU8sTUFBQSxTQUFBK0csR0FDQSxJQUFBZ0gsY0FBQTRDLGNBQUE1SixHQUFBLENBQ0E3RyxLQUFBMFEsb0JBQUFDLFNBQUE5SixHQUNBK0osV0FBQUMsU0FBQSxVQUFBN1EsS0FBQTBRLHFCQUNBLElBQUFJLEVBQUEsQ0FDQUMsS0FBQS9RLEtBQUEwUSxvQkFBQU0sV0FBQSxHQUNBQyxHQUFBalIsS0FBQTBRLG9CQUFBTSxXQUFBLElBR0FoUixLQUFBMFEsb0JBQUFRLGdCQUFBSixFQUFBQyxLQUFBRCxFQUFBRyxJQUtBalIsS0FBQTBRLG9CQUFBUyxTQUFBQyxTQUFBLFNBQUFDLE1BQ0EsSUFBQTlKLEVBQUEvQixnQkFBQXdELGtCQUNBc0ksRUFBQSxHQUVBL0osSUFDQStKLEVBQUEvSixFQUFBMEIsWUFBQTZGLE1BQUEsS0FBQSxJQUdBLElBQUF5QyxFQUFBdlIsS0FBQTBRLG9CQUFBYyxnQkFBQUYsR0FDQUMsRUFBQUUsV0FFQUYsRUFBQVIsUUFBQVEsRUFBQU4sTUFDQWpSLEtBQUEwUSxvQkFBQVMsU0FBQU8sYUFBQUgsRUFBQVIsT0FBQVEsRUFBQU4sU0FJQSxDQUNBMVIsSUFBQSxvQkFDQU8sTUFBQSxXQUNBLE9BQUFFLEtBQUEwUSxvQkFBQWlCLGFBRUEsQ0FDQXBTLElBQUEsMkJBQ0FPLE1BQUEsV0FXQUUsS0FBQXdRLGdCQUFBSSxXQUFBZ0IsYUFBQWpPLFNBQUFDLGVBQUEsc0JBQUEsQ0FDQWlPLEtBWEEsQ0FDQTlHLEtBQUEsWUFDQStHLFlBQUEsQ0FBQSxDQUNBQyxRQUFBLHdDQUNBRixLQUFBLE1BQ0EsQ0FDQUUsUUFBQSx5Q0FDQUYsS0FBQSxjQUtBRyxrQkFBQSxFQUNBQyxNQUFBLFVBQ0FDLFlBQUEsRUFDQUMsUUFBQSxDQUFBLHlCQUFBLHlCQUNBQyxhQUFBLEVBQ0FDLGNBQUEsSUFHQXJTLEtBQUF3USxnQkFBQThCLFFBQUEsT0FBQUMsaUJBQUFDLGtCQUFBLFFBSUFqQyxFQTFFQSxHQ1JBLFNBQUEvUixnQkFBQUMsRUFBQUMsR0FBQSxLQUFBRCxhQUFBQyxHQUFBLE1BQUEsSUFBQUMsVUFBQSxxQ0FFQSxTQUFBQyxrQkFBQUMsRUFBQUMsR0FBQSxJQUFBLElBQUFDLEVBQUEsRUFBQUEsRUFBQUQsRUFBQUUsT0FBQUQsSUFBQSxDQUFBLElBQUFFLEVBQUFILEVBQUFDLEdBQUFFLEVBQUFDLFdBQUFELEVBQUFDLGFBQUEsRUFBQUQsRUFBQUUsY0FBQSxFQUFBLFVBQUFGLElBQUFBLEVBQUFHLFVBQUEsR0FBQUMsT0FBQUMsZUFBQVQsRUFBQUksRUFBQU0sSUFBQU4sSUFFQSxTQUFBTyxhQUFBZCxFQUFBZSxFQUFBQyxHQUFBLE9BQUFELEdBQUFiLGtCQUFBRixFQUFBaUIsVUFBQUYsR0FBQUMsR0FBQWQsa0JBQUFGLEVBQUFnQixHQUFBaEIsRUFFQSxTQUFBa0IsZ0JBQUFDLEVBQUFOLEVBQUFPLEdBQUEsT0FBQVAsS0FBQU0sRUFBQVIsT0FBQUMsZUFBQU8sRUFBQU4sRUFBQSxDQUFBTyxNQUFBQSxFQUFBWixZQUFBLEVBQUFDLGNBQUEsRUFBQUMsVUFBQSxJQUFBUyxFQUFBTixHQUFBTyxFQUFBRCxFRCtFQUQsZ0JBQUEyUSxrQkFBQSxrQkFBQSxNQzdFQSxJQUFBa0MsZ0JBQUEsV0FDQSxTQUFBQSxJQUNBalUsZ0JBQUF3QixLQUFBeVMsR0F3REEsT0FyREFqVCxhQUFBaVQsRUFBQSxLQUFBLENBQUEsQ0FDQWxULElBQUEsc0JBQ0FPLE1BQUEsV0FDQSxNQUFBLHdNQUVBLENBQ0FQLElBQUEsa0JBQ0FPLE1BQUEsV0FDQSxPQUFBRSxLQUFBMFMsZ0JBRUEsQ0FDQW5ULElBQUEsZ0JBQ0FPLE1BQUEsU0FBQTZTLEdBQ0EzUyxLQUFBNFMsa0JBQUFqQyxTQUFBZ0MsS0FFQSxDQUNBcFQsSUFBQSxnQkFDQU8sTUFBQSxXQUNBLE9BQUFFLEtBQUE0UyxrQkFBQWpCLGFBRUEsQ0FDQXBTLElBQUEseUJBQ0FPLE1BQUEsU0FBQStTLEdBbUJBLEdBbEJBN1MsS0FBQTBTLGNBQUE5QixXQUFBZ0IsYUFBQS9PLEVBQUEscUJBQUEsR0FBQSxDQUNBZ1AsS0FBQSxzQkFDQU8sYUFBQSxFQUNBQyxjQUFBLEVBQ0FTLFVBQUEsQ0FDQUMsU0FBQSxTQUFBQyxHQUNBQSxFQUFBQyxTQUFBRCxFQUFBaEMsZUFHQWtCLFlBQUEsRUFDQWdCLGFBQUEsRUFDQUMsZUFBQSxFQUNBbEIsTUFBQSxVQUNBRSxRQUFBLENBQUEseUJBQUEsMkJBR0FuUyxLQUFBMFMsY0FBQUosUUFBQSxPQUFBQyxpQkFBQUMsa0JBQUEsSUFFQSxPQUFBSyxFQUFBLENBQ0E3UyxLQUFBb1QsY0FBQXBULEtBQUFxVCx1QkFDQXpDLFdBQUFDLFNBQUEsVUFBQTdRLEtBQUE0UyxtQkFDQSxJQUFBOUIsRUFBQSxDQUNBQyxLQUFBL1EsS0FBQTRTLGtCQUFBNUIsV0FBQSxHQUNBQyxHQUFBalIsS0FBQTRTLGtCQUFBNUIsV0FBQSxJQUVBaFIsS0FBQTRTLGtCQUFBMUIsZ0JBQUFKLEVBQUFDLEtBQUFELEVBQUFHLFNBS0F3QixFQTFEQSxHQTZEQTdTLGdCQUFBNlMsZ0JBQUEsZ0JBQUEiLCJmaWxlIjoiSFRNTERlc2lnblV0aWxpdHkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzdHJpY3RcIjtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXG52YXIgQ0tFZGl0b3JQbHVnaW5VdGlsaXR5ID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBDS0VkaXRvclBsdWdpblV0aWxpdHkoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENLRWRpdG9yUGx1Z2luVXRpbGl0eSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoQ0tFZGl0b3JQbHVnaW5VdGlsaXR5LCBudWxsLCBbe1xuICAgIGtleTogXCJBZGRQbHVnaW5zU2VydmVyQ29uZmlnXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIEFkZFBsdWdpbnNTZXJ2ZXJDb25maWcoc2luZ2xlTmFtZSwgdG9vbGJhckxvY2F0aW9uLCB0ZXh0LCBjbGllbnRSZXNvbHZlLCBzZXJ2ZXJSZXNvbHZlLCBjbGllbnRSZXNvbHZlSnMsIGRpYWxvZ1dpZHRoLCBkaWFsb2dIZWlnaHQsIGlzSkJ1aWxkNERDRGF0YSwgY29udHJvbENhdGVnb3J5LCBzZXJ2ZXJEeW5hbWljQmluZCwgc2hvd1JlbW92ZUJ1dHRvbiwgc2hvd0luRWRpdG9yVG9vbGJhciwgZW5hYmxlQ2hpbGRDb250cm9scykge1xuICAgICAgdGhpcy5QbHVnaW5zU2VydmVyQ29uZmlnW3NpbmdsZU5hbWVdID0ge1xuICAgICAgICBTaW5nbGVOYW1lOiBzaW5nbGVOYW1lLFxuICAgICAgICBUb29sYmFyTG9jYXRpb246IHRvb2xiYXJMb2NhdGlvbixcbiAgICAgICAgVG9vbGJhckxhYmVsOiB0ZXh0LFxuICAgICAgICBDbGllbnRSZXNvbHZlOiBjbGllbnRSZXNvbHZlLFxuICAgICAgICBTZXJ2ZXJSZXNvbHZlOiBzZXJ2ZXJSZXNvbHZlLFxuICAgICAgICBDbGllbnRSZXNvbHZlSnM6IGNsaWVudFJlc29sdmVKcyxcbiAgICAgICAgRGlhbG9nV2lkdGg6IGRpYWxvZ1dpZHRoLFxuICAgICAgICBEaWFsb2dIZWlnaHQ6IGRpYWxvZ0hlaWdodCxcbiAgICAgICAgSXNKQnVpbGQ0RENEYXRhOiBpc0pCdWlsZDREQ0RhdGEsXG4gICAgICAgIENvbnRyb2xDYXRlZ29yeTogY29udHJvbENhdGVnb3J5LFxuICAgICAgICBTZXJ2ZXJEeW5hbWljQmluZDogc2VydmVyRHluYW1pY0JpbmQsXG4gICAgICAgIFNob3dSZW1vdmVCdXR0b246IHNob3dSZW1vdmVCdXR0b24sXG4gICAgICAgIFNob3dJbkVkaXRvclRvb2xiYXI6IHNob3dJbkVkaXRvclRvb2xiYXIsXG4gICAgICAgIEVuYWJsZUNoaWxkQ29udHJvbHM6IGVuYWJsZUNoaWxkQ29udHJvbHNcbiAgICAgIH07XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIl9Vc2VTZXJ2ZXJDb25maWdDb3ZlckVtcHR5UGx1Z2luUHJvcFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBfVXNlU2VydmVyQ29uZmlnQ292ZXJFbXB0eVBsdWdpblByb3Aob2JqKSB7XG4gICAgICB2YXIgY292ZXJPYmogPSB0aGlzLlBsdWdpbnNTZXJ2ZXJDb25maWdbb2JqLlNpbmdsZU5hbWVdO1xuXG4gICAgICBpZiAoY292ZXJPYmopIHtcbiAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBvYmopIHtcbiAgICAgICAgICBpZiAodHlwZW9mIG9ialtwcm9wXSAhPSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICAgIGlmIChvYmpbcHJvcF0gPT0gXCJcIiB8fCBvYmpbcHJvcF0gPT0gbnVsbCkge1xuICAgICAgICAgICAgICBpZiAoY292ZXJPYmpbcHJvcF0pIHtcbiAgICAgICAgICAgICAgICBvYmpbcHJvcF0gPSBjb3Zlck9ialtwcm9wXTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBvYmo7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJHZXRHZW5lcmFsUGx1Z2luSW5zdGFuY2VcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gR2V0R2VuZXJhbFBsdWdpbkluc3RhbmNlKHBsdWdpblNpbmdsZU5hbWUsIGV4Q29uZmlnKSB7XG4gICAgICB2YXIgZGVmYXVsdFNldHRpbmcgPSB7XG4gICAgICAgIFNpbmdsZU5hbWU6IHBsdWdpblNpbmdsZU5hbWUsXG4gICAgICAgIERpYWxvZ05hbWU6ICcnLFxuICAgICAgICBEaWFsb2dXaWR0aDogbnVsbCxcbiAgICAgICAgRGlhbG9nSGVpZ2h0OiBudWxsLFxuICAgICAgICBEaWFsb2dQYWdlVXJsOiBCYXNlVXRpbGl0eS5BcHBlbmRUaW1lU3RhbXBVcmwoJ0RpYWxvZy5odG1sJyksXG4gICAgICAgIERpYWxvZ1RpdGxlOiBcIkRJVlwiLFxuICAgICAgICBUb29sYmFyQ29tbWFuZDogJycsXG4gICAgICAgIFRvb2xiYXJJY29uOiAnSWNvbi5wbmcnLFxuICAgICAgICBUb29sYmFyTGFiZWw6IFwiXCIsXG4gICAgICAgIFRvb2xiYXJMb2NhdGlvbjogJycsXG4gICAgICAgIElGcmFtZVdpbmRvdzogbnVsbCxcbiAgICAgICAgSUZyYW1lRXhlY3V0ZUFjdGlvbk5hbWU6IFwiSW5zZXJ0XCIsXG4gICAgICAgIERlc2lnbk1vZGFsSW5wdXRDc3M6IFwiXCIsXG4gICAgICAgIENsaWVudFJlc29sdmU6IFwiXCIsXG4gICAgICAgIFNlcnZlclJlc29sdmU6IFwiXCIsXG4gICAgICAgIElzSkJ1aWxkNERDRGF0YTogXCJcIixcbiAgICAgICAgQ29udHJvbENhdGVnb3J5OiBcIlwiLFxuICAgICAgICBTZXJ2ZXJEeW5hbWljQmluZDogXCJcIixcbiAgICAgICAgU2hvd1JlbW92ZUJ1dHRvbjogXCJcIixcbiAgICAgICAgU2hvd0luRWRpdG9yVG9vbGJhcjogXCJcIixcbiAgICAgICAgRW5hYmxlQ2hpbGRDb250cm9sczogXCJcIlxuICAgICAgfTtcbiAgICAgIGRlZmF1bHRTZXR0aW5nID0gJC5leHRlbmQodHJ1ZSwge30sIGRlZmF1bHRTZXR0aW5nLCBleENvbmZpZyk7XG4gICAgICBkZWZhdWx0U2V0dGluZyA9IENLRWRpdG9yUGx1Z2luVXRpbGl0eS5fVXNlU2VydmVyQ29uZmlnQ292ZXJFbXB0eVBsdWdpblByb3AoZGVmYXVsdFNldHRpbmcpO1xuXG4gICAgICBpZiAoZGVmYXVsdFNldHRpbmcgIT0gbnVsbCkge1xuICAgICAgICBkZWZhdWx0U2V0dGluZy5EaWFsb2dOYW1lID0gZGVmYXVsdFNldHRpbmcuU2luZ2xlTmFtZTtcbiAgICAgICAgZGVmYXVsdFNldHRpbmcuVG9vbGJhckNvbW1hbmQgPSBcIkpCdWlsZDREQy5Gb3JtRGVzaWduLlBsdWdpbnMuXCIgKyBkZWZhdWx0U2V0dGluZy5TaW5nbGVOYW1lO1xuICAgICAgICBkZWZhdWx0U2V0dGluZy5EaWFsb2dTZXR0aW5nVGl0bGUgPSBkZWZhdWx0U2V0dGluZy5Ub29sYmFyTGFiZWwgKyBcIldlYuaOp+S7tlwiO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIFNldHRpbmc6IGRlZmF1bHRTZXR0aW5nXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7fTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiR2V0RW5hYmxlQ2hpbGRDb250cm9sc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBHZXRFbmFibGVDaGlsZENvbnRyb2xzKHNpbmdsZU5hbWUpIHtcbiAgICAgIHJldHVybiB0aGlzLlBsdWdpbnNbc2luZ2xlTmFtZV0uU2V0dGluZy5FbmFibGVDaGlsZENvbnRyb2xzO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJHZXRQbHVnaW5zXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIEdldFBsdWdpbnMoKSB7XG4gICAgICByZXR1cm4gdGhpcy5QbHVnaW5zO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJSZWdHZW5lcmFsUGx1Z2luVG9FZGl0b3JcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gUmVnR2VuZXJhbFBsdWdpblRvRWRpdG9yKGNrRWRpdG9yLCBwYXRoLCBwbHVnaW5TZXR0aW5nLCBva0Z1bmMpIHtcbiAgICAgIENLRURJVE9SLmRpYWxvZy5hZGRJZnJhbWUocGx1Z2luU2V0dGluZy5EaWFsb2dOYW1lLCBwbHVnaW5TZXR0aW5nLkRpYWxvZ1NldHRpbmdUaXRsZSwgcGF0aCArIHBsdWdpblNldHRpbmcuRGlhbG9nUGFnZVVybCwgcGx1Z2luU2V0dGluZy5EaWFsb2dXaWR0aCwgcGx1Z2luU2V0dGluZy5EaWFsb2dIZWlnaHQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGlmcmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuXy5mcmFtZUlkKTtcbiAgICAgICAgcGx1Z2luU2V0dGluZy5JRnJhbWVXaW5kb3cgPSBpZnJhbWU7XG4gICAgICAgIENLRWRpdG9yUGx1Z2luVXRpbGl0eS5TZXRFbGVtUHJvcHNJbkVkaXREaWFsb2cocGx1Z2luU2V0dGluZy5JRnJhbWVXaW5kb3csIHBsdWdpblNldHRpbmcuSUZyYW1lRXhlY3V0ZUFjdGlvbk5hbWUpO1xuICAgICAgfSwge1xuICAgICAgICBvbk9rOiBmdW5jdGlvbiBvbk9rKCkge1xuICAgICAgICAgIHZhciBwcm9wcyA9IHBsdWdpblNldHRpbmcuSUZyYW1lV2luZG93LmNvbnRlbnRXaW5kb3cuRGlhbG9nQXBwLmdldENvbnRyb2xQcm9wcygpO1xuXG4gICAgICAgICAgaWYgKHByb3BzLnN1Y2Nlc3MgPT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBva0Z1bmMoY2tFZGl0b3IsIHBsdWdpblNldHRpbmcsIHByb3BzLCBwbHVnaW5TZXR0aW5nLklGcmFtZVdpbmRvdy5jb250ZW50V2luZG93KTtcbiAgICAgICAgICBwbHVnaW5TZXR0aW5nLklGcmFtZUV4ZWN1dGVBY3Rpb25OYW1lID0gQ0tFZGl0b3JQbHVnaW5VdGlsaXR5LkRpYWxvZ0V4ZWN1dGVJbnNlcnRBY3Rpb25OYW1lO1xuICAgICAgICB9LFxuICAgICAgICBvbkNhbmNlbDogZnVuY3Rpb24gb25DYW5jZWwoKSB7XG4gICAgICAgICAgcGx1Z2luU2V0dGluZy5JRnJhbWVFeGVjdXRlQWN0aW9uTmFtZSA9IENLRWRpdG9yUGx1Z2luVXRpbGl0eS5EaWFsb2dFeGVjdXRlSW5zZXJ0QWN0aW9uTmFtZTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBja0VkaXRvci5hZGRDb21tYW5kKHBsdWdpblNldHRpbmcuVG9vbGJhckNvbW1hbmQsIG5ldyBDS0VESVRPUi5kaWFsb2dDb21tYW5kKHBsdWdpblNldHRpbmcuRGlhbG9nTmFtZSkpO1xuXG4gICAgICBpZiAocGx1Z2luU2V0dGluZy5TaG93SW5FZGl0b3JUb29sYmFyID09IFwidHJ1ZVwiKSB7XG4gICAgICAgIGNrRWRpdG9yLnVpLmFkZEJ1dHRvbihwbHVnaW5TZXR0aW5nLlNpbmdsZU5hbWUsIHtcbiAgICAgICAgICBsYWJlbDogcGx1Z2luU2V0dGluZy5Ub29sYmFyTGFiZWwsXG4gICAgICAgICAgaWNvbjogcGF0aCArIHBsdWdpblNldHRpbmcuVG9vbGJhckljb24sXG4gICAgICAgICAgY29tbWFuZDogcGx1Z2luU2V0dGluZy5Ub29sYmFyQ29tbWFuZCxcbiAgICAgICAgICB0b29sYmFyOiBwbHVnaW5TZXR0aW5nLlRvb2xiYXJMb2NhdGlvblxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgY2tFZGl0b3Iub24oJ2RvdWJsZWNsaWNrJywgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHBsdWdpblNldHRpbmcuSUZyYW1lRXhlY3V0ZUFjdGlvbk5hbWUgPSBDS0VkaXRvclBsdWdpblV0aWxpdHkuRGlhbG9nRXhlY3V0ZUVkaXRBY3Rpb25OYW1lO1xuICAgICAgICBDS0VkaXRvclBsdWdpblV0aWxpdHkuT25DS1d5c2l3eWdFbGVtREJDbGlja0V2ZW50KGV2ZW50LCBwbHVnaW5TZXR0aW5nKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJPbkNLV3lzaXd5Z0VsZW1EQkNsaWNrRXZlbnRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gT25DS1d5c2l3eWdFbGVtREJDbGlja0V2ZW50KGV2ZW50LCBjb250cm9sU2V0dGluZykge1xuICAgICAgdmFyIGVsZW1lbnQgPSBldmVudC5kYXRhLmVsZW1lbnQ7XG5cbiAgICAgIGlmIChlbGVtZW50LmdldEF0dHJpYnV0ZShcInJ1bnRpbWVfYXV0b19yZW1vdmVcIikgPT0gXCJ0cnVlXCIpIHtcbiAgICAgICAgZWxlbWVudCA9IGV2ZW50LmRhdGEuZWxlbWVudC5nZXRQYXJlbnQoKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHNpbmdsZU5hbWUgPSBlbGVtZW50LmdldEF0dHJpYnV0ZShcInNpbmdsZU5hbWVcIik7XG5cbiAgICAgIGlmIChzaW5nbGVOYW1lID09IGNvbnRyb2xTZXR0aW5nLlNpbmdsZU5hbWUpIHtcbiAgICAgICAgQ0tFZGl0b3JVdGlsaXR5LlNldFNlbGVjdGVkRWxlbShlbGVtZW50LmdldE91dGVySHRtbCgpKTtcbiAgICAgICAgZXZlbnQuZGF0YS5kaWFsb2cgPSBjb250cm9sU2V0dGluZy5EaWFsb2dOYW1lO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJTZXJpYWxpemVQcm9wc1RvRWxlbVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBTZXJpYWxpemVQcm9wc1RvRWxlbShlbGVtLCBwcm9wcywgY29udHJvbFNldHRpbmcpIHtcbiAgICAgIGVsZW0uc2V0QXR0cmlidXRlKFwiamJ1aWxkNGRjX2N1c3RvbVwiLCBcInRydWVcIik7XG4gICAgICBlbGVtLnNldEF0dHJpYnV0ZShcInNpbmdsZW5hbWVcIiwgY29udHJvbFNldHRpbmcuU2luZ2xlTmFtZSk7XG4gICAgICBlbGVtLnNldEF0dHJpYnV0ZShcImlzX2pidWlsZDRkY19kYXRhXCIsIGNvbnRyb2xTZXR0aW5nLklzSkJ1aWxkNERDRGF0YSk7XG4gICAgICBlbGVtLnNldEF0dHJpYnV0ZShcImNvbnRyb2xfY2F0ZWdvcnlcIiwgY29udHJvbFNldHRpbmcuQ29udHJvbENhdGVnb3J5KTtcbiAgICAgIGVsZW0uc2V0QXR0cmlidXRlKFwic2hvd19yZW1vdmVfYnV0dG9uXCIsIGNvbnRyb2xTZXR0aW5nLlNob3dSZW1vdmVCdXR0b24pO1xuXG4gICAgICBpZiAocHJvcHNbXCJiYXNlSW5mb1wiXSkge1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gcHJvcHNbXCJiYXNlSW5mb1wiXSkge1xuICAgICAgICAgIGlmIChrZXkgPT0gXCJyZWFkb25seVwiKSB7XG4gICAgICAgICAgICBpZiAocHJvcHNbXCJiYXNlSW5mb1wiXVtrZXldID09IFwicmVhZG9ubHlcIikge1xuICAgICAgICAgICAgICBlbGVtLnNldEF0dHJpYnV0ZShrZXkudG9Mb2NhbGVMb3dlckNhc2UoKSwgcHJvcHNbXCJiYXNlSW5mb1wiXVtrZXldKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGVsZW0ucmVtb3ZlQXR0cmlidXRlKFwicmVhZG9ubHlcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChrZXkgPT0gXCJkaXNhYmxlZFwiKSB7XG4gICAgICAgICAgICBpZiAocHJvcHNbXCJiYXNlSW5mb1wiXVtrZXldID09IFwiZGlzYWJsZWRcIikge1xuICAgICAgICAgICAgICBlbGVtLnNldEF0dHJpYnV0ZShrZXkudG9Mb2NhbGVMb3dlckNhc2UoKSwgcHJvcHNbXCJiYXNlSW5mb1wiXVtrZXldKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGVsZW0ucmVtb3ZlQXR0cmlidXRlKFwiZGlzYWJsZWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGVsZW0uc2V0QXR0cmlidXRlKGtleS50b0xvY2FsZUxvd2VyQ2FzZSgpLCBwcm9wc1tcImJhc2VJbmZvXCJdW2tleV0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAocHJvcHNbXCJiaW5kVG9GaWVsZFwiXSkge1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gcHJvcHNbXCJiaW5kVG9GaWVsZFwiXSkge1xuICAgICAgICAgIGVsZW0uc2V0QXR0cmlidXRlKGtleS50b0xvY2FsZUxvd2VyQ2FzZSgpLCBwcm9wc1tcImJpbmRUb0ZpZWxkXCJdW2tleV0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9wc1tcImRlZmF1bHRWYWx1ZVwiXSkge1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gcHJvcHNbXCJkZWZhdWx0VmFsdWVcIl0pIHtcbiAgICAgICAgICBlbGVtLnNldEF0dHJpYnV0ZShrZXkudG9Mb2NhbGVMb3dlckNhc2UoKSwgcHJvcHNbXCJkZWZhdWx0VmFsdWVcIl1ba2V5XSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHByb3BzW1widmFsaWRhdGVSdWxlc1wiXSkge1xuICAgICAgICBpZiAocHJvcHNbXCJ2YWxpZGF0ZVJ1bGVzXCJdLnJ1bGVzKSB7XG4gICAgICAgICAgaWYgKHByb3BzW1widmFsaWRhdGVSdWxlc1wiXS5ydWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICBlbGVtLnNldEF0dHJpYnV0ZShcInZhbGlkYXRlcnVsZXNcIiwgZW5jb2RlVVJJQ29tcG9uZW50KEpzb25VdGlsaXR5Lkpzb25Ub1N0cmluZyhwcm9wc1tcInZhbGlkYXRlUnVsZXNcIl0pKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9wc1tcIm5vcm1hbFByb3BzXCJdKSB7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBwcm9wc1tcIm5vcm1hbFByb3BzXCJdKSB7XG4gICAgICAgICAgZWxlbS5zZXRBdHRyaWJ1dGUoa2V5LnRvTG9jYWxlTG93ZXJDYXNlKCksIHByb3BzW1wibm9ybWFsUHJvcHNcIl1ba2V5XSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHByb3BzW1wiYmluZFRvU2VhcmNoRmllbGRcIl0pIHtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHByb3BzW1wiYmluZFRvU2VhcmNoRmllbGRcIl0pIHtcbiAgICAgICAgICBlbGVtLnNldEF0dHJpYnV0ZShrZXkudG9Mb2NhbGVMb3dlckNhc2UoKSwgcHJvcHNbXCJiaW5kVG9TZWFyY2hGaWVsZFwiXVtrZXldKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gZWxlbTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiRGVzZXJpYWxpemVQcm9wc0Zyb21FbGVtXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIERlc2VyaWFsaXplUHJvcHNGcm9tRWxlbShlbGVtKSB7XG4gICAgICB2YXIgcHJvcHMgPSB7fTtcbiAgICAgIHZhciAkZWxlbSA9ICQoZWxlbSk7XG5cbiAgICAgIGZ1bmN0aW9uIGF0dHJUb1Byb3AocHJvcHMsIGdyb3VwTmFtZSkge1xuICAgICAgICB2YXIgZ3JvdXBQcm9wID0ge307XG5cbiAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuRGVmYXVsdFByb3BzW2dyb3VwTmFtZV0pIHtcbiAgICAgICAgICBpZiAoJGVsZW0uYXR0cihrZXkpKSB7XG4gICAgICAgICAgICBncm91cFByb3Bba2V5XSA9ICRlbGVtLmF0dHIoa2V5KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ3JvdXBQcm9wW2tleV0gPSB0aGlzLkRlZmF1bHRQcm9wc1tncm91cE5hbWVdW2tleV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcHJvcHNbZ3JvdXBOYW1lXSA9IGdyb3VwUHJvcDtcbiAgICAgICAgcmV0dXJuIHByb3BzO1xuICAgICAgfVxuXG4gICAgICBwcm9wcyA9IGF0dHJUb1Byb3AuY2FsbCh0aGlzLCBwcm9wcywgXCJiYXNlSW5mb1wiKTtcbiAgICAgIHByb3BzID0gYXR0clRvUHJvcC5jYWxsKHRoaXMsIHByb3BzLCBcImJpbmRUb0ZpZWxkXCIpO1xuICAgICAgcHJvcHMgPSBhdHRyVG9Qcm9wLmNhbGwodGhpcywgcHJvcHMsIFwiZGVmYXVsdFZhbHVlXCIpO1xuICAgICAgcHJvcHMgPSBhdHRyVG9Qcm9wLmNhbGwodGhpcywgcHJvcHMsIFwiYmluZFRvU2VhcmNoRmllbGRcIik7XG5cbiAgICAgIGlmICgkZWxlbS5hdHRyKFwidmFsaWRhdGVSdWxlc1wiKSkge1xuICAgICAgICBwcm9wcy52YWxpZGF0ZVJ1bGVzID0gSnNvblV0aWxpdHkuU3RyaW5nVG9Kc29uKGRlY29kZVVSSUNvbXBvbmVudCgkZWxlbS5hdHRyKFwidmFsaWRhdGVSdWxlc1wiKSkpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcHJvcHM7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIkJ1aWxkR2VuZXJhbEVsZW1Ub0NLV3lzaXd5Z1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBCdWlsZEdlbmVyYWxFbGVtVG9DS1d5c2l3eWcoaHRtbCwgY29udHJvbFNldHRpbmcsIGNvbnRyb2xQcm9wcywgX2lmcmFtZSkge1xuICAgICAgaWYgKHRoaXMuVmFsaWRhdGVCdWlsZEVuYWJsZShodG1sLCBjb250cm9sU2V0dGluZywgY29udHJvbFByb3BzLCBfaWZyYW1lKSkge1xuICAgICAgICBpZiAoY29udHJvbFNldHRpbmcuSUZyYW1lRXhlY3V0ZUFjdGlvbk5hbWUgPT0gQ0tFZGl0b3JQbHVnaW5VdGlsaXR5LkRpYWxvZ0V4ZWN1dGVJbnNlcnRBY3Rpb25OYW1lKSB7XG4gICAgICAgICAgdmFyIGVsZW0gPSBDS0VESVRPUi5kb20uZWxlbWVudC5jcmVhdGVGcm9tSHRtbChodG1sKTtcbiAgICAgICAgICB0aGlzLlNlcmlhbGl6ZVByb3BzVG9FbGVtKGVsZW0sIGNvbnRyb2xQcm9wcywgY29udHJvbFNldHRpbmcpO1xuICAgICAgICAgIENLRWRpdG9yVXRpbGl0eS5HZXRDS0VkaXRvckluc3QoKS5pbnNlcnRFbGVtZW50KGVsZW0pO1xuICAgICAgICAgIENLRWRpdG9yVXRpbGl0eS5TaW5nbGVFbGVtQmluZERlZmF1bHRFdmVudChlbGVtKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YXIgc2VsZWN0ZWRFbGVtID0gQ0tFZGl0b3JVdGlsaXR5LkdldFNlbGVjdGVkQ0tFZGl0b3JFbGVtKCk7XG5cbiAgICAgICAgICBpZiAoc2VsZWN0ZWRFbGVtKSB7XG4gICAgICAgICAgICB2YXIgcmVGcmVzaEVsZW0gPSBuZXcgQ0tFRElUT1IuZG9tLmVsZW1lbnQuY3JlYXRlRnJvbUh0bWwoc2VsZWN0ZWRFbGVtLmdldE91dGVySHRtbCgpKTtcblxuICAgICAgICAgICAgaWYgKHJlRnJlc2hFbGVtLmdldEF0dHJpYnV0ZShcImNvbnRyb2xfY2F0ZWdvcnlcIikgPT0gXCJJbnB1dENvbnRyb2xcIikge1xuICAgICAgICAgICAgICB2YXIgbmV3VGV4dCA9ICQoaHRtbCkudGV4dCgpO1xuICAgICAgICAgICAgICByZUZyZXNoRWxlbS5zZXRUZXh0KG5ld1RleHQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBzZWxlY3RlZEVsZW0uY29weUF0dHJpYnV0ZXMocmVGcmVzaEVsZW0sIHtcbiAgICAgICAgICAgICAgdGVtcDogXCJ0ZW1wXCJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGhpcy5TZXJpYWxpemVQcm9wc1RvRWxlbShyZUZyZXNoRWxlbSwgY29udHJvbFByb3BzLCBjb250cm9sU2V0dGluZyk7XG4gICAgICAgICAgICByZUZyZXNoRWxlbS5yZXBsYWNlKHNlbGVjdGVkRWxlbSk7XG4gICAgICAgICAgICBDS0VkaXRvclV0aWxpdHkuU2luZ2xlRWxlbUJpbmREZWZhdWx0RXZlbnQocmVGcmVzaEVsZW0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJWYWxpZGF0ZUJ1aWxkRW5hYmxlXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIFZhbGlkYXRlQnVpbGRFbmFibGUoaHRtbCwgY29udHJvbFNldHRpbmcsIGNvbnRyb2xQcm9wcywgX2lmcmFtZSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIlZhbGlkYXRlU2VyaWFsaXplQ29udHJvbERpYWxvZ0NvbXBsZXRlZEVuYWJsZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBWYWxpZGF0ZVNlcmlhbGl6ZUNvbnRyb2xEaWFsb2dDb21wbGV0ZWRFbmFibGUocmV0dXJuUmVzdWx0KSB7XG4gICAgICBpZiAocmV0dXJuUmVzdWx0LmJhc2VJbmZvLnNlcmlhbGl6ZSA9PSBcInRydWVcIiAmJiByZXR1cm5SZXN1bHQuYmluZFRvRmllbGQuZmllbGROYW1lID09IFwiXCIpIHtcbiAgICAgICAgRGlhbG9nVXRpbGl0eS5BbGVydCh3aW5kb3csIERpYWxvZ1V0aWxpdHkuRGlhbG9nQWxlcnRJZCwge30sIFwi5bqP5YiX5YyW55qE5o6n5Lu25b+F6aG757uR5a6a5a2X5q61IVwiLCBudWxsKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmV0dXJuUmVzdWx0O1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJTZXRFbGVtUHJvcHNJbkVkaXREaWFsb2dcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gU2V0RWxlbVByb3BzSW5FZGl0RGlhbG9nKGlmcmFtZU9iaiwgYWN0aW9uTmFtZSkge1xuICAgICAgdmFyIHNlbCA9IENLRWRpdG9yVXRpbGl0eS5HZXRDS0VkaXRvckluc3QoKS5nZXRTZWxlY3Rpb24oKS5nZXRTdGFydEVsZW1lbnQoKTtcbiAgICAgIHZhciBwYXJlbnRzID0gbnVsbDtcblxuICAgICAgaWYgKHNlbCkge1xuICAgICAgICBwYXJlbnRzID0gc2VsLmdldFBhcmVudHMoKTtcbiAgICAgIH1cblxuICAgICAgaWZyYW1lT2JqLmNvbnRlbnRXaW5kb3cuRGlhbG9nQXBwLnJlYWR5KGFjdGlvbk5hbWUsIHNlbCwgcGFyZW50cyk7XG5cbiAgICAgIGlmIChhY3Rpb25OYW1lID09IHRoaXMuRGlhbG9nRXhlY3V0ZUVkaXRBY3Rpb25OYW1lKSB7XG4gICAgICAgIHZhciBlbGVtID0gQ0tFZGl0b3JVdGlsaXR5LkdldFNlbGVjdGVkRWxlbSgpLm91dGVySFRNTCgpO1xuICAgICAgICB2YXIgcHJvcHMgPSB0aGlzLkRlc2VyaWFsaXplUHJvcHNGcm9tRWxlbShlbGVtKTtcbiAgICAgICAgaWZyYW1lT2JqLmNvbnRlbnRXaW5kb3cuRGlhbG9nQXBwLnNldENvbnRyb2xQcm9wcygkKGVsZW0pLCBwcm9wcyk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIkdldENvbnRyb2xEZXNjVGV4dFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBHZXRDb250cm9sRGVzY1RleHQocGx1Z2luU2V0dGluZywgcHJvcHMpIHtcbiAgICAgIHJldHVybiBcIltcIiArIHBsdWdpblNldHRpbmcuVG9vbGJhckxhYmVsICsgXCJdIOe7keWumjpbXCIgKyBwcm9wcy5iaW5kVG9GaWVsZC50YWJsZUNhcHRpb24gKyBcIi1cIiArIHByb3BzLmJpbmRUb0ZpZWxkLmZpZWxkQ2FwdGlvbiArIFwiXVwiO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJHZXRTZWFyY2hDb250cm9sRGVzY1RleHRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gR2V0U2VhcmNoQ29udHJvbERlc2NUZXh0KHBsdWdpblNldHRpbmcsIHByb3BzKSB7XG4gICAgICByZXR1cm4gXCJbXCIgKyBwbHVnaW5TZXR0aW5nLlRvb2xiYXJMYWJlbCArIFwiXSDnu5Hlrpo6W1wiICsgcHJvcHMuYmluZFRvU2VhcmNoRmllbGQuY29sdW1uQ2FwdGlvbiArIFwiXShcIiArIHByb3BzLmJpbmRUb1NlYXJjaEZpZWxkLmNvbHVtbk9wZXJhdG9yICsgXCIpXCI7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIkdldEF1dG9SZW1vdmVUaXBMYWJlbFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBHZXRBdXRvUmVtb3ZlVGlwTGFiZWwodGlwTXNnKSB7XG4gICAgICBpZiAoIXRpcE1zZykge1xuICAgICAgICB0aXBNc2cgPSBcIuWPjOWHu+e8lui+keivpemDqOS7tlwiO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gJzxkaXYgcnVudGltZV9hdXRvX3JlbW92ZT1cInRydWVcIiBjbGFzcz1cInd5c2l3eWctYXV0by1yZW1vdmUtdGlwXCI+JyArIHRpcE1zZyArICc8L2Rpdj4nO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJUcnlHZXRMaXN0QnV0dG9uc0luUGx1Z2luUGFnZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBUcnlHZXRMaXN0QnV0dG9uc0luUGx1Z2luUGFnZSgpIHtcbiAgICAgIHZhciBidXR0b25zID0gW107XG4gICAgICB2YXIgaHRtbCA9IENLRWRpdG9yVXRpbGl0eS5HZXRDS0VkaXRvckhUTUxJblBsdWdpblBhZ2UoKTtcbiAgICAgIHZhciAkYnV0dG9ucyA9ICQoaHRtbCkuZmluZChcIltidXR0b25jYXB0aW9uXVwiKTtcbiAgICAgICRidXR0b25zLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgYnV0dG9uQ2FwdGlvbiA9ICQodGhpcykuYXR0cihcImJ1dHRvbmNhcHRpb25cIik7XG4gICAgICAgIHZhciBidXR0b25JZCA9ICQodGhpcykuYXR0cihcImlkXCIpO1xuICAgICAgICBidXR0b25zLnB1c2goe1xuICAgICAgICAgIGJ1dHRvbkNhcHRpb246IGJ1dHRvbkNhcHRpb24sXG4gICAgICAgICAgYnV0dG9uSWQ6IGJ1dHRvbklkXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gYnV0dG9ucztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiVHJ5R2V0RGF0YVNldElkXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIFRyeUdldERhdGFTZXRJZChzZWwsIHBhcmVudHMpIHtcbiAgICAgIGlmIChzZWwpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IHBhcmVudHMubGVuZ3RoIC0gMTsgaS0tOyBpID49IDApIHtcbiAgICAgICAgICBpZiAocGFyZW50c1tpXS5nZXRBdHRyaWJ1dGUoXCJkYXRhc2V0aWRcIikgIT0gbnVsbCAmJiBwYXJlbnRzW2ldLmdldEF0dHJpYnV0ZShcImRhdGFzZXRpZFwiKSAhPSBcIlwiKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFyZW50c1tpXS5nZXRBdHRyaWJ1dGUoXCJkYXRhc2V0aWRcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5kYXRhU2V0SWQpIHtcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5wYXJlbnQubGlzdERlc2lnbi5saXN0UmVzb3VyY2VFbnRpdHkubGlzdERhdGFzZXRJZDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIENLRWRpdG9yUGx1Z2luVXRpbGl0eTtcbn0oKTtcblxuX2RlZmluZVByb3BlcnR5KENLRWRpdG9yUGx1Z2luVXRpbGl0eSwgXCJQbHVnaW5zU2VydmVyQ29uZmlnXCIsIHt9KTtcblxuX2RlZmluZVByb3BlcnR5KENLRWRpdG9yUGx1Z2luVXRpbGl0eSwgXCJQbHVnaW5zXCIsIHt9KTtcblxuX2RlZmluZVByb3BlcnR5KENLRWRpdG9yUGx1Z2luVXRpbGl0eSwgXCJEZWZhdWx0UHJvcHNcIiwge1xuICBiaW5kVG9GaWVsZDoge1xuICAgIHRhYmxlSWQ6IFwiXCIsXG4gICAgdGFibGVOYW1lOiBcIlwiLFxuICAgIHRhYmxlQ2FwdGlvbjogXCJcIixcbiAgICBmaWVsZE5hbWU6IFwiXCIsXG4gICAgZmllbGRDYXB0aW9uOiBcIlwiLFxuICAgIGZpZWxkRGF0YVR5cGU6IFwiXCIsXG4gICAgZmllbGRMZW5ndGg6IFwiXCJcbiAgfSxcbiAgZGVmYXVsdFZhbHVlOiB7XG4gICAgZGVmYXVsdFR5cGU6IFwiXCIsXG4gICAgZGVmYXVsdFZhbHVlOiBcIlwiLFxuICAgIGRlZmF1bHRUZXh0OiBcIlwiXG4gIH0sXG4gIHZhbGlkYXRlUnVsZXM6IHtcbiAgICBtc2c6IFwiXCIsXG4gICAgcnVsZXM6IFtdXG4gIH0sXG4gIGJhc2VJbmZvOiB7XG4gICAgaWQ6IFwiXCIsXG4gICAgc2VyaWFsaXplOiBcInRydWVcIixcbiAgICBuYW1lOiBcIlwiLFxuICAgIGNsYXNzTmFtZTogXCJcIixcbiAgICBwbGFjZWhvbGRlcjogXCJcIixcbiAgICBjdXN0UmVhZG9ubHk6IFwibm9yZWFkb25seVwiLFxuICAgIGN1c3REaXNhYmxlZDogXCJub2Rpc2FibGVkXCIsXG4gICAgc3R5bGU6IFwiXCIsXG4gICAgZGVzYzogXCJcIlxuICB9LFxuICBiaW5kVG9TZWFyY2hGaWVsZDoge1xuICAgIGNvbHVtblRpdGxlOiBcIlwiLFxuICAgIGNvbHVtblRhYmxlTmFtZTogXCJcIixcbiAgICBjb2x1bW5OYW1lOiBcIlwiLFxuICAgIGNvbHVtbkNhcHRpb246IFwiXCIsXG4gICAgY29sdW1uRGF0YVR5cGVOYW1lOiBcIlwiLFxuICAgIGNvbHVtbk9wZXJhdG9yOiBcIuWMuemFjVwiXG4gIH1cbn0pO1xuXG5fZGVmaW5lUHJvcGVydHkoQ0tFZGl0b3JQbHVnaW5VdGlsaXR5LCBcIkRpYWxvZ0V4ZWN1dGVFZGl0QWN0aW9uTmFtZVwiLCBcIkVkaXRcIik7XG5cbl9kZWZpbmVQcm9wZXJ0eShDS0VkaXRvclBsdWdpblV0aWxpdHksIFwiRGlhbG9nRXhlY3V0ZUluc2VydEFjdGlvbk5hbWVcIiwgXCJJbnNlcnRcIik7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH1cblxuZnVuY3Rpb24gX2NyZWF0ZUNsYXNzKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnR5KG9iaiwga2V5LCB2YWx1ZSkgeyBpZiAoa2V5IGluIG9iaikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHsgdmFsdWU6IHZhbHVlLCBlbnVtZXJhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUsIHdyaXRhYmxlOiB0cnVlIH0pOyB9IGVsc2UgeyBvYmpba2V5XSA9IHZhbHVlOyB9IHJldHVybiBvYmo7IH1cblxudmFyIENLRWRpdG9yVXRpbGl0eSA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gQ0tFZGl0b3JVdGlsaXR5KCkge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDS0VkaXRvclV0aWxpdHkpO1xuICB9XG5cbiAgX2NyZWF0ZUNsYXNzKENLRWRpdG9yVXRpbGl0eSwgbnVsbCwgW3tcbiAgICBrZXk6IFwiU2V0U2VsZWN0ZWRFbGVtXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIFNldFNlbGVjdGVkRWxlbShlbGVtSHRtbCkge1xuICAgICAgdGhpcy5fJENLRWRpdG9yU2VsZWN0RWxlbSA9ICQoZWxlbUh0bWwpO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJHZXRTZWxlY3RlZEVsZW1cIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gR2V0U2VsZWN0ZWRFbGVtKCkge1xuICAgICAgaWYgKHRoaXMuXyRDS0VkaXRvclNlbGVjdEVsZW0pIHtcbiAgICAgICAgaWYgKHRoaXMuXyRDS0VkaXRvclNlbGVjdEVsZW0ubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHJldHVybiB0aGlzLl8kQ0tFZGl0b3JTZWxlY3RFbGVtO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJHZXRTZWxlY3RlZENLRWRpdG9yRWxlbVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBHZXRTZWxlY3RlZENLRWRpdG9yRWxlbSgpIHtcbiAgICAgIGlmICh0aGlzLkdldFNlbGVjdGVkRWxlbSgpKSB7XG4gICAgICAgIHZhciBpZCA9IHRoaXMuR2V0U2VsZWN0ZWRFbGVtKCkuYXR0cihcImlkXCIpO1xuICAgICAgICB2YXIgZWxlbWVudCA9IHRoaXMuR2V0Q0tFZGl0b3JJbnN0KCkuZG9jdW1lbnQuZ2V0QnlJZChpZCk7XG4gICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiR2V0Q0tFZGl0b3JJbnN0XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIEdldENLRWRpdG9ySW5zdCgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9DS0VkaXRvckluc3Q7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIlNldENLRWRpdG9ySW5zdFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBTZXRDS0VkaXRvckluc3QoaW5zdCkge1xuICAgICAgdGhpcy5fQ0tFZGl0b3JJbnN0ID0gaW5zdDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiR2V0Q0tFZGl0b3JIVE1MXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIEdldENLRWRpdG9ySFRNTCgpIHtcbiAgICAgIHRoaXMuQ2xlYXJBTExGb3JEaXZFbGVtQnV0dG9uKCk7XG4gICAgICByZXR1cm4gdGhpcy5HZXRDS0VkaXRvckluc3QoKS5nZXREYXRhKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIlNldENLRWRpdG9ySFRNTFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBTZXRDS0VkaXRvckhUTUwoaHRtbCkge1xuICAgICAgdGhpcy5HZXRDS0VkaXRvckluc3QoKS5zZXREYXRhKGh0bWwpO1xuICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICBDS0VkaXRvclV0aWxpdHkuQUxMRWxlbUJpbmREZWZhdWx0RXZlbnQoKTtcbiAgICAgIH0sIDUwMCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIkdldENLRWRpdG9ySFRNTEluUGx1Z2luUGFnZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBHZXRDS0VkaXRvckhUTUxJblBsdWdpblBhZ2UoKSB7XG4gICAgICByZXR1cm4gd2luZG93LnBhcmVudC5DS0VkaXRvclV0aWxpdHkuR2V0Q0tFZGl0b3JIVE1MKCk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIkluaXRpYWxpemVDS0VkaXRvclwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBJbml0aWFsaXplQ0tFZGl0b3IodGV4dEFyZWFFbGVtSWQsIHBsdWdpbnNDb25maWcsIGxvYWRDb21wbGV0ZWRGdW5jLCBja2VkaXRvckNvbmZpZ0Z1bGxQYXRoLCBwbHVnaW5CYXNlUGF0aCwgdGhlbWVWbykge1xuICAgICAgdmFyIGV4dHJhUGx1Z2lucyA9IG5ldyBBcnJheSgpO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBsdWdpbnNDb25maWcubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHNpbmdsZVBsdWdpbkNvbmZpZyA9IHBsdWdpbnNDb25maWdbaV07XG4gICAgICAgIHZhciBzaW5nbGVOYW1lID0gc2luZ2xlUGx1Z2luQ29uZmlnLnNpbmdsZU5hbWU7XG4gICAgICAgIHZhciB0b29sYmFyTG9jYXRpb24gPSBzaW5nbGVQbHVnaW5Db25maWcudG9vbGJhckxvY2F0aW9uO1xuICAgICAgICB2YXIgdGV4dCA9IHNpbmdsZVBsdWdpbkNvbmZpZy50ZXh0O1xuICAgICAgICB2YXIgc2VydmVyUmVzb2x2ZSA9IHNpbmdsZVBsdWdpbkNvbmZpZy5zZXJ2ZXJSZXNvbHZlO1xuICAgICAgICB2YXIgY2xpZW50UmVzb2x2ZSA9IHNpbmdsZVBsdWdpbkNvbmZpZy5jbGllbnRSZXNvbHZlO1xuICAgICAgICB2YXIgY2xpZW50UmVzb2x2ZUpzID0gc2luZ2xlUGx1Z2luQ29uZmlnLmNsaWVudFJlc29sdmVKcztcbiAgICAgICAgdmFyIGRpYWxvZ1dpZHRoID0gc2luZ2xlUGx1Z2luQ29uZmlnLmRpYWxvZ1dpZHRoO1xuICAgICAgICB2YXIgZGlhbG9nSGVpZ2h0ID0gc2luZ2xlUGx1Z2luQ29uZmlnLmRpYWxvZ0hlaWdodDtcbiAgICAgICAgdmFyIGlzSkJ1aWxkNERDRGF0YSA9IHNpbmdsZVBsdWdpbkNvbmZpZy5pc0pCdWlsZDREQ0RhdGE7XG4gICAgICAgIHZhciBjb250cm9sQ2F0ZWdvcnkgPSBzaW5nbGVQbHVnaW5Db25maWcuY29udHJvbENhdGVnb3J5O1xuICAgICAgICB2YXIgc2VydmVyRHluYW1pY0JpbmQgPSBzaW5nbGVQbHVnaW5Db25maWcuc2VydmVyRHluYW1pY0JpbmQ7XG4gICAgICAgIHZhciBzaG93UmVtb3ZlQnV0dG9uID0gc2luZ2xlUGx1Z2luQ29uZmlnLnNob3dSZW1vdmVCdXR0b247XG4gICAgICAgIHZhciBzaG93SW5FZGl0b3JUb29sYmFyID0gc2luZ2xlUGx1Z2luQ29uZmlnLnNob3dJbkVkaXRvclRvb2xiYXI7XG4gICAgICAgIHZhciBlbmFibGVDaGlsZENvbnRyb2xzID0gc2luZ2xlUGx1Z2luQ29uZmlnLmVuYWJsZUNoaWxkQ29udHJvbHM7XG4gICAgICAgIHZhciBwbHVnaW5GaWxlTmFtZSA9IHNpbmdsZU5hbWUgKyBcIlBsdWdpbi5qc1wiO1xuICAgICAgICB2YXIgcGx1Z2luRm9sZGVyTmFtZSA9IHBsdWdpbkJhc2VQYXRoICsgc2luZ2xlTmFtZSArIFwiL1wiO1xuICAgICAgICBDS0VESVRPUi5wbHVnaW5zLmFkZEV4dGVybmFsKHNpbmdsZU5hbWUsIHBsdWdpbkZvbGRlck5hbWUsIHBsdWdpbkZpbGVOYW1lKTtcbiAgICAgICAgZXh0cmFQbHVnaW5zLnB1c2goc2luZ2xlTmFtZSk7XG4gICAgICAgIENLRWRpdG9yUGx1Z2luVXRpbGl0eS5BZGRQbHVnaW5zU2VydmVyQ29uZmlnKHNpbmdsZU5hbWUsIHRvb2xiYXJMb2NhdGlvbiwgdGV4dCwgY2xpZW50UmVzb2x2ZSwgc2VydmVyUmVzb2x2ZSwgY2xpZW50UmVzb2x2ZUpzLCBkaWFsb2dXaWR0aCwgZGlhbG9nSGVpZ2h0LCBpc0pCdWlsZDREQ0RhdGEsIGNvbnRyb2xDYXRlZ29yeSwgc2VydmVyRHluYW1pY0JpbmQsIHNob3dSZW1vdmVCdXR0b24sIHNob3dJbkVkaXRvclRvb2xiYXIsIGVuYWJsZUNoaWxkQ29udHJvbHMpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLlNldFRoZW1lVm8odGhlbWVWbyk7XG4gICAgICB2YXIgZWRpdG9yQ29uZmlnVXJsID0gQmFzZVV0aWxpdHkuQXBwZW5kVGltZVN0YW1wVXJsKGNrZWRpdG9yQ29uZmlnRnVsbFBhdGgpO1xuICAgICAgQ0tFRElUT1IucmVwbGFjZSh0ZXh0QXJlYUVsZW1JZCwge1xuICAgICAgICBjdXN0b21Db25maWc6IGVkaXRvckNvbmZpZ1VybCxcbiAgICAgICAgZXh0cmFQbHVnaW5zOiBleHRyYVBsdWdpbnMuam9pbihcIixcIilcbiAgICAgIH0pO1xuICAgICAgQ0tFRElUT1IuaW5zdGFuY2VzLmh0bWxfZGVzaWduLm9uKFwiYmVmb3JlUGFzdGVcIiwgZnVuY3Rpb24gKGV2ZW50KSB7fSk7XG4gICAgICBDS0VESVRPUi5pbnN0YW5jZXMuaHRtbF9kZXNpZ24ub24oXCJwYXN0ZVwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgdmFyIHNvdXJjZUhUTUwgPSBldmVudC5kYXRhLmRhdGFWYWx1ZTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIHZhciAkc291cmNlSFRNTCA9ICQoc291cmNlSFRNTCk7XG4gICAgICAgICAgJHNvdXJjZUhUTUwuZmluZChcIi5kZWwtYnV0dG9uXCIpLnJlbW92ZSgpO1xuXG4gICAgICAgICAgaWYgKCRzb3VyY2VIVE1MLmZpbmQoXCJkaXZcIikubGVuZ3RoID09IDEpIHtcbiAgICAgICAgICAgIGV2ZW50LmRhdGEuZGF0YVZhbHVlID0gJHNvdXJjZUhUTUwuZmluZChcImRpdlwiKS5hdHRyKFwiaWRcIiwgXCJjdF9jb3B5X1wiICsgU3RyaW5nVXRpbGl0eS5UaW1lc3RhbXAoKSkub3V0ZXJIVE1MKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coXCLpu4/otLTlvILluLgs6L+Y5Y6fSFRNTFwiKTtcbiAgICAgICAgICBldmVudC5kYXRhLmRhdGFWYWx1ZSA9IHNvdXJjZUhUTUw7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgQ0tFRElUT1IuaW5zdGFuY2VzLmh0bWxfZGVzaWduLm9uKFwiYWZ0ZXJQYXN0ZVwiLCBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgQ0tFZGl0b3JVdGlsaXR5LkFMTEVsZW1CaW5kRGVmYXVsdEV2ZW50KCk7XG4gICAgICB9KTtcbiAgICAgIENLRURJVE9SLmluc3RhbmNlcy5odG1sX2Rlc2lnbi5vbignaW5zZXJ0RWxlbWVudCcsIGZ1bmN0aW9uIChldmVudCkge30pO1xuICAgICAgQ0tFRElUT1IuaW5zdGFuY2VzLmh0bWxfZGVzaWduLm9uKCdpbnNlcnRIdG1sJywgZnVuY3Rpb24gKGV2ZW50KSB7fSk7XG4gICAgICBDS0VESVRPUi5pbnN0YW5jZXMuaHRtbF9kZXNpZ24ub24oJ3NlbGVjdGlvbkNoYW5nZScsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgZWxlbSA9IGV2ZW50LmRhdGEuc2VsZWN0aW9uLmdldFNlbGVjdGVkRWxlbWVudCgpO1xuICAgICAgICB2YXIgbGFzdEN1c3RTaW5nbGVOYW1lID0gXCJcIjtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGV2ZW50LmRhdGEucGF0aC5lbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBlbGVtID0gZXZlbnQuZGF0YS5wYXRoLmVsZW1lbnRzW2ldO1xuICAgICAgICAgIHZhciBzaW5nbGVOYW1lID0gZWxlbS5nZXRBdHRyaWJ1dGUoXCJzaW5nbGVuYW1lXCIpO1xuXG4gICAgICAgICAgaWYgKHNpbmdsZU5hbWUpIHtcbiAgICAgICAgICAgIGxhc3RDdXN0U2luZ2xlTmFtZSA9IHNpbmdsZU5hbWU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAobGFzdEN1c3RTaW5nbGVOYW1lKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coQ0tFZGl0b3JQbHVnaW5VdGlsaXR5LlBsdWdpbnMpO1xuICAgICAgICAgIENLRWRpdG9yVXRpbGl0eS5EaXNwbGF5UGx1Z2luQ29udHJvbHMoQ0tFZGl0b3JQbHVnaW5VdGlsaXR5LkdldEVuYWJsZUNoaWxkQ29udHJvbHMobGFzdEN1c3RTaW5nbGVOYW1lKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgdGhpcy5TZXRDS0VkaXRvckluc3QoQ0tFRElUT1IuaW5zdGFuY2VzLmh0bWxfZGVzaWduKTtcbiAgICAgIENLRURJVE9SLm9uKCdpbnN0YW5jZVJlYWR5JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBsb2FkQ29tcGxldGVkRnVuYyA9PSBcImZ1bmN0aW9uXCIpIHtcbiAgICAgICAgICBsb2FkQ29tcGxldGVkRnVuYygpO1xuICAgICAgICAgIDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIkRpc3BsYXlQbHVnaW5Db250cm9sc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBEaXNwbGF5UGx1Z2luQ29udHJvbHMoZW5hYmxlQ2hpbGRDb250cm9scykge1xuICAgICAgJChcIi5ja2VfYnV0dG9uXCIpLnNob3coKTtcblxuICAgICAgaWYgKGVuYWJsZUNoaWxkQ29udHJvbHMgPT0gXCIqXCIpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZyhlbmFibGVDaGlsZENvbnRyb2xzKTtcbiAgICAgIHZhciBwbHVnaW5zID0gQ0tFZGl0b3JQbHVnaW5VdGlsaXR5LkdldFBsdWdpbnMoKTtcblxuICAgICAgZm9yICh2YXIga2V5IGluIHBsdWdpbnMpIHtcbiAgICAgICAgdmFyIHBsdWdpbiA9IHBsdWdpbnNba2V5XTtcbiAgICAgICAgdmFyIHNpbmdsZU5hbWUgPSBwbHVnaW4uU2V0dGluZy5TaW5nbGVOYW1lO1xuICAgICAgICAkKFwiLmNrZV9idXR0b25fX1wiICsgU3RyaW5nVXRpbGl0eS5Ub0xvd2VyQ2FzZShzaW5nbGVOYW1lKSkuaGlkZSgpO1xuICAgICAgfVxuXG4gICAgICB2YXIgZW5hYmxlUGx1Z2lucyA9IGVuYWJsZUNoaWxkQ29udHJvbHMuc3BsaXQoXCI7XCIpO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVuYWJsZVBsdWdpbnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHNpbmdsZU5hbWUgPSBlbmFibGVQbHVnaW5zW2ldO1xuICAgICAgICAkKFwiLmNrZV9idXR0b25fX1wiICsgU3RyaW5nVXRpbGl0eS5Ub0xvd2VyQ2FzZShzaW5nbGVOYW1lKSkuc2hvdygpO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJHZXRUaGVtZVZvXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIEdldFRoZW1lVm8oKSB7XG4gICAgICByZXR1cm4gdGhpcy5fVGhlbWVWbztcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiU2V0VGhlbWVWb1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBTZXRUaGVtZVZvKF90aGVtZVZvKSB7XG4gICAgICB0aGlzLl9UaGVtZVZvID0gX3RoZW1lVm87XG4gICAgICB0aGlzLlJlc2V0Um9vdEVsZW1UaGVtZShfdGhlbWVWbyk7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIlJlc2V0Um9vdEVsZW1UaGVtZVwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBSZXNldFJvb3RFbGVtVGhlbWUoX3RoZW1lVm8pIHtcbiAgICAgIGlmICh0aGlzLkdldENLRWRpdG9ySW5zdCgpKSB7XG4gICAgICAgIHZhciBzb3VyY2VIVE1MID0gdGhpcy5HZXRDS0VkaXRvckhUTUwoKTtcblxuICAgICAgICBpZiAoc291cmNlSFRNTCAhPSBudWxsICYmIHNvdXJjZUhUTUwgIT0gXCJcIikge1xuICAgICAgICAgIHZhciByb290RWxlbSA9ICQoc291cmNlSFRNTCk7XG5cbiAgICAgICAgICBpZiAocm9vdEVsZW0ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdmFyIGNsYXNzTGlzdCA9IHJvb3RFbGVtLmF0dHIoJ2NsYXNzJykuc3BsaXQoL1xccysvKTtcbiAgICAgICAgICAgIHZhciBjbGFzc2FyeSA9IFtdO1xuICAgICAgICAgICAgJC5lYWNoKGNsYXNzTGlzdCwgZnVuY3Rpb24gKGluZGV4LCBpdGVtKSB7XG4gICAgICAgICAgICAgIGlmIChpdGVtLmluZGV4T2YoJ2h0bWwtZGVzaWduLXRoZW1lLScpID49IDApIHtcbiAgICAgICAgICAgICAgICByb290RWxlbS5yZW1vdmVDbGFzcyhpdGVtKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByb290RWxlbS5hZGRDbGFzcyhfdGhlbWVWby5yb290RWxlbUNsYXNzKTtcbiAgICAgICAgICAgIHRoaXMuU2V0Q0tFZGl0b3JIVE1MKHJvb3RFbGVtLm91dGVySFRNTCgpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiQ2xlYXJBTExGb3JEaXZFbGVtQnV0dG9uXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIENsZWFyQUxMRm9yRGl2RWxlbUJ1dHRvbigpIHtcbiAgICAgIHZhciBvbGREZWxCdXR0b25zID0gQ0tFZGl0b3JVdGlsaXR5LkdldENLRWRpdG9ySW5zdCgpLmRvY3VtZW50LmZpbmQoXCIuZGVsLWJ1dHRvblwiKTtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvbGREZWxCdXR0b25zLmNvdW50KCk7IGkrKykge1xuICAgICAgICBvbGREZWxCdXR0b25zLmdldEl0ZW0oaSkucmVtb3ZlKCk7XG4gICAgICB9XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIlNpbmdsZUVsZW1CaW5kRGVmYXVsdEV2ZW50XCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIFNpbmdsZUVsZW1CaW5kRGVmYXVsdEV2ZW50KGVsZW0pIHtcbiAgICAgIGlmIChlbGVtLmdldEF0dHJpYnV0ZShcInNob3dfcmVtb3ZlX2J1dHRvblwiKSA9PSBcInRydWVcIikge1xuICAgICAgICBlbGVtLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBDS0VkaXRvclV0aWxpdHkuR2V0Q0tFZGl0b3JJbnN0KCkuZ2V0U2VsZWN0aW9uKCkuc2VsZWN0RWxlbWVudCh0aGlzKTtcbiAgICAgICAgICBDS0VkaXRvclV0aWxpdHkuU2V0U2VsZWN0ZWRFbGVtKHRoaXMuZ2V0T3V0ZXJIdG1sKCkpO1xuICAgICAgICAgIENLRWRpdG9yVXRpbGl0eS5DbGVhckFMTEZvckRpdkVsZW1CdXR0b24oKTtcbiAgICAgICAgICB2YXIgbmV3RGVsQnV0dG9uID0gbmV3IENLRURJVE9SLmRvbS5lbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICBuZXdEZWxCdXR0b24uYWRkQ2xhc3MoXCJkZWwtYnV0dG9uXCIpO1xuICAgICAgICAgIGVsZW0uYXBwZW5kKG5ld0RlbEJ1dHRvbik7XG4gICAgICAgICAgbmV3RGVsQnV0dG9uLm9uKCdjbGljaycsIGZ1bmN0aW9uIChldikge1xuICAgICAgICAgICAgZWxlbS5yZW1vdmUoKTtcbiAgICAgICAgICAgIHZhciBkb21FdmVudCA9IGV2LmRhdGE7XG4gICAgICAgICAgICBkb21FdmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZG9tRXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJBTExFbGVtQmluZERlZmF1bHRFdmVudFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBBTExFbGVtQmluZERlZmF1bHRFdmVudCgpIHtcbiAgICAgIHZhciBlbGVtZW50cyA9IENLRWRpdG9yVXRpbGl0eS5HZXRDS0VkaXRvckluc3QoKS5kb2N1bWVudC5nZXRCb2R5KCkuZ2V0RWxlbWVudHNCeVRhZygnKicpO1xuXG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVsZW1lbnRzLmNvdW50KCk7ICsraSkge1xuICAgICAgICB2YXIgZWxlbSA9IGVsZW1lbnRzLmdldEl0ZW0oaSk7XG4gICAgICAgIHRoaXMuU2luZ2xlRWxlbUJpbmREZWZhdWx0RXZlbnQoZWxlbSk7XG4gICAgICB9XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIENLRWRpdG9yVXRpbGl0eTtcbn0oKTtcblxuX2RlZmluZVByb3BlcnR5KENLRWRpdG9yVXRpbGl0eSwgXCJfJENLRWRpdG9yU2VsZWN0RWxlbVwiLCBudWxsKTtcblxuX2RlZmluZVByb3BlcnR5KENLRWRpdG9yVXRpbGl0eSwgXCJfQ0tFZGl0b3JJbnN0XCIsIG51bGwpO1xuXG5fZGVmaW5lUHJvcGVydHkoQ0tFZGl0b3JVdGlsaXR5LCBcIl9UaGVtZVZvXCIsIG51bGwpOyIsIlwidXNlIHN0cmljdFwiO1xuXG5mdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9XG5cbmZ1bmN0aW9uIF9jcmVhdGVDbGFzcyhDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgX2RlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9XG5cbmZ1bmN0aW9uIF9kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgdmFsdWUpIHsgaWYgKGtleSBpbiBvYmopIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7IHZhbHVlOiB2YWx1ZSwgZW51bWVyYWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlLCB3cml0YWJsZTogdHJ1ZSB9KTsgfSBlbHNlIHsgb2JqW2tleV0gPSB2YWx1ZTsgfSByZXR1cm4gb2JqOyB9XG5cbnZhciBIVE1MRWRpdG9yVXRpbGl0eSA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gSFRNTEVkaXRvclV0aWxpdHkoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEhUTUxFZGl0b3JVdGlsaXR5KTtcbiAgfVxuXG4gIF9jcmVhdGVDbGFzcyhIVE1MRWRpdG9yVXRpbGl0eSwgbnVsbCwgW3tcbiAgICBrZXk6IFwiR2V0SFRNTEVkaXRvckluc3RcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gR2V0SFRNTEVkaXRvckluc3QoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fSFRNTEVkaXRvckluc3Q7XG4gICAgfVxuICB9LCB7XG4gICAga2V5OiBcIlNldEhUTUxFZGl0b3JIVE1MXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIFNldEhUTUxFZGl0b3JIVE1MKGh0bWwpIHtcbiAgICAgIGlmICghU3RyaW5nVXRpbGl0eS5Jc051bGxPckVtcHR5KGh0bWwpKSB7XG4gICAgICAgIHRoaXMuR2V0SFRNTEVkaXRvckluc3QoKS5zZXRWYWx1ZShodG1sKTtcbiAgICAgICAgQ29kZU1pcnJvci5jb21tYW5kc1tcInNlbGVjdEFsbFwiXSh0aGlzLkdldEhUTUxFZGl0b3JJbnN0KCkpO1xuICAgICAgICB2YXIgcmFuZ2UgPSB7XG4gICAgICAgICAgZnJvbTogdGhpcy5HZXRIVE1MRWRpdG9ySW5zdCgpLmdldEN1cnNvcih0cnVlKSxcbiAgICAgICAgICB0bzogdGhpcy5HZXRIVE1MRWRpdG9ySW5zdCgpLmdldEN1cnNvcihmYWxzZSlcbiAgICAgICAgfTtcbiAgICAgICAgO1xuICAgICAgICB0aGlzLkdldEhUTUxFZGl0b3JJbnN0KCkuYXV0b0Zvcm1hdFJhbmdlKHJhbmdlLmZyb20sIHJhbmdlLnRvKTtcbiAgICAgICAgdmFyIGExID0ge1xuICAgICAgICAgIGxpbmU6IDAsXG4gICAgICAgICAgY2g6IDJcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5HZXRIVE1MRWRpdG9ySW5zdCgpLmdldERvYygpLmVhY2hMaW5lKGZ1bmN0aW9uIChsaW5lKSB7fSk7XG4gICAgICAgIHZhciBzZWxlY3RlZEVsZW0gPSBDS0VkaXRvclV0aWxpdHkuR2V0U2VsZWN0ZWRFbGVtKCk7XG4gICAgICAgIHZhciBzZWFyY2hIVE1MID0gXCJcIjtcblxuICAgICAgICBpZiAoc2VsZWN0ZWRFbGVtKSB7XG4gICAgICAgICAgc2VhcmNoSFRNTCA9IHNlbGVjdGVkRWxlbS5vdXRlckhUTUwoKS5zcGxpdChcIj5cIilbMF07XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgY3Vyc29yID0gdGhpcy5HZXRIVE1MRWRpdG9ySW5zdCgpLmdldFNlYXJjaEN1cnNvcihzZWFyY2hIVE1MKTtcbiAgICAgICAgY3Vyc29yLmZpbmROZXh0KCk7XG5cbiAgICAgICAgaWYgKGN1cnNvci5mcm9tKCkgJiYgY3Vyc29yLnRvKCkpIHtcbiAgICAgICAgICB0aGlzLkdldEhUTUxFZGl0b3JJbnN0KCkuZ2V0RG9jKCkuc2V0U2VsZWN0aW9uKGN1cnNvci5mcm9tKCksIGN1cnNvci50bygpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJHZXRIdG1sRWRpdG9ySFRNTFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBHZXRIdG1sRWRpdG9ySFRNTCgpIHtcbiAgICAgIHJldHVybiB0aGlzLkdldEhUTUxFZGl0b3JJbnN0KCkuZ2V0VmFsdWUoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiSW5pdGlhbGl6ZUhUTUxDb2RlRGVzaWduXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIEluaXRpYWxpemVIVE1MQ29kZURlc2lnbigpIHtcbiAgICAgIHZhciBtaXhlZE1vZGUgPSB7XG4gICAgICAgIG5hbWU6IFwiaHRtbG1peGVkXCIsXG4gICAgICAgIHNjcmlwdFR5cGVzOiBbe1xuICAgICAgICAgIG1hdGNoZXM6IC9cXC94LWhhbmRsZWJhcnMtdGVtcGxhdGV8XFwveC1tdXN0YWNoZS9pLFxuICAgICAgICAgIG1vZGU6IG51bGxcbiAgICAgICAgfSwge1xuICAgICAgICAgIG1hdGNoZXM6IC8odGV4dHxhcHBsaWNhdGlvbilcXC8oeC0pP3ZiKGF8c2NyaXB0KS9pLFxuICAgICAgICAgIG1vZGU6IFwidmJzY3JpcHRcIlxuICAgICAgICB9XVxuICAgICAgfTtcbiAgICAgIHRoaXMuX0hUTUxFZGl0b3JJbnN0ID0gQ29kZU1pcnJvci5mcm9tVGV4dEFyZWEoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJUZXh0QXJlYUhUTUxFZGl0b3JcIiksIHtcbiAgICAgICAgbW9kZTogbWl4ZWRNb2RlLFxuICAgICAgICBzZWxlY3Rpb25Qb2ludGVyOiB0cnVlLFxuICAgICAgICB0aGVtZTogXCJtb25va2FpXCIsXG4gICAgICAgIGZvbGRHdXR0ZXI6IHRydWUsXG4gICAgICAgIGd1dHRlcnM6IFtcIkNvZGVNaXJyb3ItbGluZW51bWJlcnNcIiwgXCJDb2RlTWlycm9yLWZvbGRndXR0ZXJcIl0sXG4gICAgICAgIGxpbmVOdW1iZXJzOiB0cnVlLFxuICAgICAgICBsaW5lV3JhcHBpbmc6IHRydWVcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLl9IVE1MRWRpdG9ySW5zdC5zZXRTaXplKFwiMTAwJVwiLCBQYWdlU3R5bGVVdGlsaXR5LkdldFdpbmRvd0hlaWdodCgpIC0gODUpO1xuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBIVE1MRWRpdG9yVXRpbGl0eTtcbn0oKTtcblxuX2RlZmluZVByb3BlcnR5KEhUTUxFZGl0b3JVdGlsaXR5LCBcIl9IVE1MRWRpdG9ySW5zdFwiLCBudWxsKTsiLCJcInVzZSBzdHJpY3RcIjtcblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuZnVuY3Rpb24gX2RlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfVxuXG5mdW5jdGlvbiBfY3JlYXRlQ2xhc3MoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBfZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIF9kZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfVxuXG5mdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXG52YXIgSnNFZGl0b3JVdGlsaXR5ID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBKc0VkaXRvclV0aWxpdHkoKSB7XG4gICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEpzRWRpdG9yVXRpbGl0eSk7XG4gIH1cblxuICBfY3JlYXRlQ2xhc3MoSnNFZGl0b3JVdGlsaXR5LCBudWxsLCBbe1xuICAgIGtleTogXCJfR2V0TmV3Rm9ybUpzU3RyaW5nXCIsXG4gICAgdmFsdWU6IGZ1bmN0aW9uIF9HZXROZXdGb3JtSnNTdHJpbmcoKSB7XG4gICAgICByZXR1cm4gXCI8c2NyaXB0PnZhciBGb3JtUGFnZU9iamVjdEluc3RhbmNlPXtcIiArIFwiZGF0YTp7XCIgKyBcInVzZXJFbnRpdHk6e30sXCIgKyBcImZvcm1FbnRpdHk6W10sXCIgKyBcImNvbmZpZzpbXVwiICsgXCJ9LFwiICsgXCJwYWdlUmVhZHk6ZnVuY3Rpb24oKXt9LFwiICsgXCJiaW5kUmVjb3JkRGF0YVJlYWR5OmZ1bmN0aW9uKCl7fSxcIiArIFwidmFsaWRhdGVFdmVyeUZyb21Db250cm9sOmZ1bmN0aW9uKGNvbnRyb2xPYmope31cIiArIFwifTwvc2NyaXB0PlwiO1xuICAgIH1cbiAgfSwge1xuICAgIGtleTogXCJHZXRKc0VkaXRvckluc3RcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gR2V0SnNFZGl0b3JJbnN0KCkge1xuICAgICAgcmV0dXJuIHRoaXMuX0pzRWRpdG9ySW5zdDtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiU2V0SnNFZGl0b3JKc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBTZXRKc0VkaXRvckpzKGpzKSB7XG4gICAgICB0aGlzLkdldEpzRWRpdG9ySW5zdCgpLnNldFZhbHVlKGpzKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiR2V0SnNFZGl0b3JKc1wiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBHZXRKc0VkaXRvckpzKCkge1xuICAgICAgcmV0dXJuIHRoaXMuR2V0SnNFZGl0b3JJbnN0KCkuZ2V0VmFsdWUoKTtcbiAgICB9XG4gIH0sIHtcbiAgICBrZXk6IFwiSW5pdGlhbGl6ZUpzQ29kZURlc2lnblwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBJbml0aWFsaXplSnNDb2RlRGVzaWduKHN0YXR1cykge1xuICAgICAgdGhpcy5fSnNFZGl0b3JJbnN0ID0gQ29kZU1pcnJvci5mcm9tVGV4dEFyZWEoJChcIiNUZXh0QXJlYUpzRWRpdG9yXCIpWzBdLCB7XG4gICAgICAgIG1vZGU6IFwiYXBwbGljYXRpb24vbGQranNvblwiLFxuICAgICAgICBsaW5lTnVtYmVyczogdHJ1ZSxcbiAgICAgICAgbGluZVdyYXBwaW5nOiB0cnVlLFxuICAgICAgICBleHRyYUtleXM6IHtcbiAgICAgICAgICBcIkN0cmwtUVwiOiBmdW5jdGlvbiBDdHJsUShjbSkge1xuICAgICAgICAgICAgY20uZm9sZENvZGUoY20uZ2V0Q3Vyc29yKCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgZm9sZEd1dHRlcjogdHJ1ZSxcbiAgICAgICAgc21hcnRJbmRlbnQ6IHRydWUsXG4gICAgICAgIG1hdGNoQnJhY2tldHM6IHRydWUsXG4gICAgICAgIHRoZW1lOiBcIm1vbm9rYWlcIixcbiAgICAgICAgZ3V0dGVyczogW1wiQ29kZU1pcnJvci1saW5lbnVtYmVyc1wiLCBcIkNvZGVNaXJyb3ItZm9sZGd1dHRlclwiXVxuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuX0pzRWRpdG9ySW5zdC5zZXRTaXplKFwiMTAwJVwiLCBQYWdlU3R5bGVVdGlsaXR5LkdldFdpbmRvd0hlaWdodCgpIC0gODUpO1xuXG4gICAgICBpZiAoc3RhdHVzID09IFwiYWRkXCIpIHtcbiAgICAgICAgdGhpcy5TZXRKc0VkaXRvckpzKHRoaXMuX0dldE5ld0Zvcm1Kc1N0cmluZygpKTtcbiAgICAgICAgQ29kZU1pcnJvci5jb21tYW5kc1tcInNlbGVjdEFsbFwiXSh0aGlzLkdldEpzRWRpdG9ySW5zdCgpKTtcbiAgICAgICAgdmFyIHJhbmdlID0ge1xuICAgICAgICAgIGZyb206IHRoaXMuR2V0SnNFZGl0b3JJbnN0KCkuZ2V0Q3Vyc29yKHRydWUpLFxuICAgICAgICAgIHRvOiB0aGlzLkdldEpzRWRpdG9ySW5zdCgpLmdldEN1cnNvcihmYWxzZSlcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5HZXRKc0VkaXRvckluc3QoKS5hdXRvRm9ybWF0UmFuZ2UocmFuZ2UuZnJvbSwgcmFuZ2UudG8pO1xuICAgICAgfVxuICAgIH1cbiAgfV0pO1xuXG4gIHJldHVybiBKc0VkaXRvclV0aWxpdHk7XG59KCk7XG5cbl9kZWZpbmVQcm9wZXJ0eShKc0VkaXRvclV0aWxpdHksIFwiX0pzRWRpdG9ySW5zdFwiLCBudWxsKTsiXX0=
